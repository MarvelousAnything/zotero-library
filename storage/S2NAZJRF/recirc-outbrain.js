!function(){"use strict";var e,t={6833:function(e,t,n){var r=n(7856),i=n.n(r),c=JSON.parse('{"xl":"1280","lg":"1024","md":"768","sm":"600","xs":"480"}'),o=Object.keys(c).reduce(((e,t)=>{const n="".concat(c[t]/16,"rem"),r="".concat((c[t]-1)/16,"rem");return e["".concat(t,"Min")]=window.matchMedia("(min-width: ".concat(n,")")),e["".concat(t,"Max")]=window.matchMedia("(max-width: ".concat(r,")")),e}),{});function s(){const e=document.querySelector("[data-ad-skin]");return e&&"true"===e.dataset.adSkin||!1}var a=n(787),u=n(24),d=n(5186),l=n(3845);const h={init:!1,containerModifierClass:"recirc__wrapper-",wrapperClass:"recirc__stories",watchSlidesVisibility:!0,slideClass:"recirc__story",slideActiveClass:"recirc__story--active",slideNextClass:"recirc__story--next",slidePrevClass:"recirc__story--prev",slideVisibleClass:"recirc__story--visible",slidesPerView:"auto",navigation:{nextEl:".recirc__nav--next",prevEl:".recirc__nav--prev",disabledClass:"recirc__nav--disabled"},a11y:!0,keyboard:!0};class f extends class{constructor(){this.swiperModules=[a.Z,u.Z,d.Z],this.swiper=!1,this.recirc=document.querySelector("[data-recirc-bar]"),this.recirc&&(window.addEventListener("reInitRecirc",(()=>this.init())),window.addEventListener("mobileInitRecirc",(()=>this.init())),o.smMin.matches&&this.init(),o.smMin.addEventListener("change",(()=>{this.swiper||this.init()})))}addEnabledClasses(){this.recirc.classList.add("recirc--enabled"),document.body.classList.remove("recirc-bar-mobile-disabled")}destroy(){const{recirc:e}=this;this.swiper&&this.swiper.destroy(),e.parentNode&&(e.parentNode.removeChild(e),document.body.classList.remove("header-recirc-bar-enabled"),document.body.classList.add("recirc-bar-mobile-disabled"))}initSwiper(){l.Z.use(this.swiperModules),this.swiper=new l.Z(".recirc__wrapper",h),this.swiper.init()}init(){this.initSwiper(),this.swiper&&this.addEnabledClasses(),!s()&&this.swiper||this.destroy()}}{constructor(){super(),this.recircSlides=document.querySelector(".recirc__stories")}getOutbrainHTML(e){const t=e.doc&&Array.isArray(e.doc)?e.doc:[];return null===e.count||0===e.count||0===t.length?(this.destroy(),null):t.reduce(((e,{content:t,orig_url:n,url:r,thumbnail:{url:i,width:c,height:o}},s)=>{const a=JSON.stringify({category:"Subheader recirculation module",action:n,label:"Slot ".concat(s+1)});return"".concat(e,'\n      <div class="recirc__story">\n        <a\n          href="').concat(n,'"\n          class="recirc__link"\n          data-outbrain-href="').concat(r,'"\n          data-ga-event="').concat(a,'"\n        >\n          <img\n            class="recirc__image"\n            src="').concat(i,'"\n            alt=""\n            width="').concat(c,'"\n            height="').concat(o,'"\n            loading="lazy"\n          >\n          <h5 class="recirc__headline" title="').concat(t,'">').concat(t,"</h5>\n        </a>\n      </div>")}),"")}async outbrainReady(){const e=Date.now()+3e4;for(;!(Object.prototype.hasOwnProperty.call(window,"OBR")||(await new Promise((e=>setTimeout(e,100))),e<Date.now())););}getOutbrainRecs(){return new Promise(((e,t)=>{this.outbrainReady().then((()=>{window.OBR.extern.callRecs({permalink:window.nypScripts.nypost_wp_vars.outbrain_permalink||window.location.href,widgetId:o.smMin.matches?"SL_2":"TBX_1",testMode:!window.nypScripts.nypost_wp_vars.vip},e)})).catch((e=>{const n=new Error("Failed to receive Outbrain recs. `window.OBR` was not available");this.destroy(),t(n,e)}))}))}displayOutbrainRecirc(e){if(e){const{recircSlides:t}=this;t.innerHTML=i().sanitize(e),this.initSwiper(),this.registerOutbrainClickHandler(),this.addEnabledClasses()}else this.destroy()}registerOutbrainClickHandler(){document.querySelectorAll(".recirc__link").forEach((e=>{const t=e;t.addEventListener("click",(()=>{const e={link:t.dataset.outbrainHref};this.options.OBR.extern.callClick(e)})),t.addEventListener("contextmenu",(()=>{t.href=t.dataset.outbrainHref}))}))}async init(){try{const e=await this.getOutbrainRecs(),t=this.getOutbrainHTML(e);this.displayOutbrainRecirc(t)}catch(e){console.log(e)}s()&&this.destroy()}}document.addEventListener("DOMContentLoaded",(()=>{new f}))},6156:function(e,t,n){function r(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function i(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(n){void 0===e[n]?e[n]=t[n]:r(t[n])&&r(e[n])&&Object.keys(t[n]).length>0&&i(e[n],t[n])}))}n.d(t,{Me:function(){return o},Jj:function(){return a}});var c={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function o(){var e="undefined"!=typeof document?document:{};return i(e,c),e}var s={document:c,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function a(){var e="undefined"!=typeof window?window:{};return i(e,s),e}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var c=n[e]={exports:{}};return t[e].call(c.exports,c,c.exports,r),c.exports}r.m=t,e=[],r.O=function(t,n,i,c){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],c=e[d][2];for(var s=!0,a=0;a<n.length;a++)(!1&c||o>=c)&&Object.keys(r.O).every((function(e){return r.O[e](n[a])}))?n.splice(a--,1):(s=!1,c<o&&(o=c));if(s){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[n,i,c]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={949:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,c,o=n[0],s=n[1],a=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(a)var d=a(r)}for(t&&t(n);u<o.length;u++)c=o[u],r.o(e,c)&&e[c]&&e[c][0](),e[o[u]]=0;return r.O(d)},n=self.webpackChunknypost_2021=self.webpackChunknypost_2021||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var i=r.O(void 0,[5972,3687,3703],(function(){return r(6833)}));i=r.O(i)}();
//# sourceMappingURL=recirc-outbrain.bundle.min.js.map