!function a(i,o,r){function l(e,t){if(!o[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=o[e]={exports:{}},i[e][0].call(n.exports,function(t){return l(i[e][1][t]||t)},n,n.exports,a,i,o,r)}return o[e].exports}for(var d="function"==typeof require&&require,t=0;t<r.length;t++)l(r[t]);return l}({1:[function(t,e,n){"use strict";var a,i=t("./index.js"),t=(a=i)&&a.__esModule?a:{default:a};window.atlasTracking=new t.default},{"./index.js":2}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o,r=t("./utils.js"),l=(o=r)&&o.__esModule?o:{default:o};var d,s={},g={},h={},c={},u={},m={},v={},f=null,p=window.parent,k=null,y=null,_={unload:null,scroll:null,infinityScroll:null,read:null,click:null,viewability:{},media:{},form:{}},b=Date.now(),w=b,a=(a(x,[{key:"getQueryValue",value:function(t){return this.utils.getQ(t)||""}},{key:"getCookieValue",value:function(t){return this.utils.getC(t)||""}},{key:"getLocalStorageValue",value:function(t){return this.utils.getLS(t)||""}},{key:"setDataSrc",value:function(t){c=JSON.parse(decodeURIComponent(t))}},{key:"getDataFromSrc",value:function(t){return c[t]||""}},{key:"getVisibility",value:function(t){return this.utils.getV(t)||""}},{key:"config",value:function(t){d=void 0!==t.system?t.system:{},p=d.targetWindow?window[d.targetWindow]:window.parent,u.url=void 0!==t.defaults.pageUrl?t.defaults.pageUrl:p.document.location.href,u.referrer=void 0!==t.defaults.pageReferrer?t.defaults.pageReferrer:p.document.referrer,u.page_title=void 0!==t.defaults.pageTitle?t.defaults.pageTitle:p.document.title,u.product_family=void 0!==t.product.productFamily?t.product.productFamily:null,u.product=void 0!==t.product.productName?t.product.productName:null,this.utils=new l.default(p),this.eventHandler=new this.utils.handler,y="onbeforeunload"in p?"beforeunload":"onpagehide"in p?"pagehide":"unload";try{k=new CustomEvent("atlasVisibilityStatus")}catch(t){(k=p.document.createEvent("CustomEvent")).initCustomEvent("atlasVisibilityStatus",!1,!1,{})}var i,e=p.requestAnimationFrame||p.mozRequestAnimationFrame||p.webkitRequestAnimationFrame||p.msRequestAnimationFrame;e?p.requestAnimationFrame=e:(i=0,p.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(0,16-(e-i)),a=p.setTimeout(function(){t(e+n)},n);return i=e+n,a});var n=null;!function t(){return p.requestAnimationFrame(t),!n&&void(n=setTimeout(function(){p.dispatchEvent(k),n=null},250))}(),s=void 0!==t.options?t.options:{},this.utils.initSystem(d)}},{key:"setCustomVars",value:function(t,e){h[t]=e}},{key:"setCustomObject",value:function(t,e){h.custom_object[t]=e}},{key:"setCustomId",value:function(t,e){g.external_ids[t]=e}},{key:"delCustomVars",value:function(t){delete h[t]}},{key:"delCustomObject",value:function(t){delete h.custom_object[t]}},{key:"delCustomId",value:function(t){delete g.external_ids[t]}},{key:"initEventListeners",value:function(){var t=this;(s.trackClick&&s.trackClick.enable||s.trackLink&&s.trackLink.enable||s.trackDownload&&s.trackDownload.enable)&&this.delegateClickEvents({trackClick:s.trackClick,trackLink:s.trackLink,trackDownload:s.trackDownload}),s.trackUnload&&s.trackUnload.enable&&this.setEventToUnload(),s.trackScroll&&s.trackScroll.enable&&this.trackScroll(s.trackScroll.granularity,s.trackScroll.threshold),s.trackInfinityScroll&&s.trackInfinityScroll.enable&&this.trackInfinityScroll(s.trackInfinityScroll.step,s.trackInfinityScroll.threshold),s.trackRead&&s.trackRead.enable&&this.trackRead(s.trackRead.target,s.trackRead.granularity,s.trackRead.milestones),s.trackViewability&&s.trackViewability.enable&&this.trackViewability(s.trackViewability.targets),s.trackMedia&&s.trackMedia.enable&&this.trackMedia(s.trackMedia.selector,s.trackMedia.heartbeat),s.trackForm&&s.trackForm.enable&&this.trackForm(s.trackForm.target),s.trackPerformance&&s.trackPerformance.enable&&(f=function(){v=t.utils.getP(),h.navigation_timing=v.performanceResult||{},h.navigation_type=v.navigationType||{}},p.addEventListener("DOMContentLoaded",f,!1)),s.trackThroughMessage&&s.trackThroughMessage.enable&&this.trackThroughMessage()}},{key:"initPage",value:function(t){void 0!==t.user&&(g={user_id:t.user.user_id||void 0,user_status:t.user.user_status||void 0,site_session:t.user.site_session||void 0,external_ids:{},custom_object:t.user.custom_object||{},federation_id:t.user.federation_id||void 0}),void 0!==t.context&&(h={root_id:this.utils.generateRootId(),url:(void 0!==t.context.url?t.context:u).url,referrer:(void 0!==t.context.referrer?t.context:u).referrer,product_family:(void 0!==t.context.product_family?t.context:u).product_family,product:t.context.product||u.product,app:t.context.app||void 0,app_version:t.context.app_version||void 0,page_title:t.context.page_title||u.page_title,source:t.context.source||void 0,edition:t.context.edition||void 0,content_id:t.context.content_id||void 0,content_name:t.context.content_name||void 0,content_status:t.context.content_status||void 0,page_name:t.context.page_name||void 0,page_num:t.context.page_num||1,category_l1:t.context.category_l1||void 0,category_l2:t.context.category_l2||void 0,category_l3:t.context.category_l3||void 0,tracking_code:t.context.tracking_code||void 0,campaign:t.context.campaign||void 0,search:t.context.search||void 0,events:t.context.events||void 0,custom_object:t.context.custom_object||{},funnel:t.context.funnel||{},visibility:p.document.visibilityState||"unknown"}),s.trackNavigation&&s.trackNavigation.enable&&(h.navigation=this.utils.getNav()||{}),s.trackPerformance&&s.trackPerformance.enable&&(v=this.utils.getP(),h.navigation_timing=v.performanceResult||{},h.navigation_type=v.navigationType||{}),this.initEventListeners()}},{key:"disableTracking",value:function(){if((s.trackClick&&s.trackClick.enable||s.trackLink&&s.trackLink.enable||s.trackDownload&&s.trackDownload.enable)&&this.eventHandler.remove(_.click),s.trackUnload&&s.trackUnload.enable&&this.eventHandler.remove(_.unload),s.trackScroll&&s.trackScroll.enable&&this.eventHandler.remove(_.scroll),s.trackInfinityScroll&&s.trackInfinityScroll.enable&&this.eventHandler.remove(_.infinityScroll),s.trackRead&&s.trackRead.enable&&this.eventHandler.remove(_.read),s.trackViewability&&s.trackViewability.enable&&this.eventHandler.remove(_.viewability),s.trackMedia&&s.trackMedia.enable){var t=!0,e=!1,n=void 0;try{for(var a,i=["play","pause","end"][Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.eventHandler.remove(_.media[o])}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}if(s.trackForm&&s.trackForm.enable&&null!==s.trackForm.target){var r=!0,e=!1,n=void 0;try{for(var l,d=["focus","change"][Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var c=l.value;this.eventHandler.remove(_.form[c])}}catch(t){e=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(e)throw n}}}s.trackPerformance&&s.trackPerformance.enable&&p.removeEventListener("DOMContentLoaded",f),s={}}},{key:"trackPage",value:function(){this.utils.transmit("view","page",g,h,m)}},{key:"trackAction",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"action",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"unknown",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=Date.now();h.events=n||null,this.utils.transmit(t,e,g,h,{action:{location:a.location||void 0,destination:a.destination||void 0,dataset:a.dataset||void 0,name:a.action_name||void 0,elapsed_since_page_load:(i-b)/1e3,elapsed_since_prev_action:(i-w)/1e3,content_id:a.content_id||void 0,content_name:a.content_name||void 0,custom_vars:a.custom_vars||{}}}),h.events=null,w=i}},{key:"delegateClickEvents",value:function(o){var r=this;this.eventHandler.remove(_.click),_.click=this.eventHandler.add(p.document.body,"click",function(t){var e,n,a=!(!o.trackClick||!o.trackClick.targetAttribute)&&o.trackClick.targetAttribute,i=r.utils.qsM('a, button, [role="button"]',t.target,a);i&&i.element&&(n=((e=i.element).pathname||"").match(/.+\/.+?\.([a-z]+([?#;].*)?$)/),t={destination:e.href||void 0,dataset:e.dataset||void 0,target:e.target||void 0,media:e.media||void 0,type:e.type||void 0,tag:e.tagName.toLowerCase(),id:e.id||void 0,class:e.className||void 0,text:(e.innerText||e.value||"").substr(0,63)||void 0,elapsed_since_page_load:(Date.now()-b)/1e3},o.trackLink&&o.trackLink.enable&&e.hostname&&p.location.hostname!==e.hostname&&o.trackLink.internalDomains.indexOf(e.hostname)<0&&r.utils.transmit("open","outbound_link",g,h,{link:Object.assign(t,{location:i.pathDom,name:o.trackLink.nameAttribute?e.getAttribute(o.trackLink.nameAttribute):void 0})}),o.trackDownload&&o.trackDownload.enable&&e.hostname&&n&&0<=o.trackDownload.fileExtensions.indexOf(n[1])&&r.utils.transmit("download","file",g,h,{download:Object.assign(t,{location:i.pathDom,name:o.trackLink.nameAttribute?e.getAttribute(o.trackDownload.nameAttribute):void 0})}),i&&o.trackClick.enable&&(o.trackClick.targetAttribute?0<i.pathTrackable.length&&r.utils.transmit("click",i.category,g,h,{action:Object.assign(t,{location:i.pathTrackable,name:e.getAttribute(a)})}):r.utils.transmit("click",i.category,g,h,{action:Object.assign(t,{location:i.pathDom,name:void 0})})))},!1)}},{key:"setEventToUnload",value:function(){var t=this;this.eventHandler.remove(_.unload),_.unload=this.eventHandler.add(p,y,function(){t.utils.transmit("unload","page",g,h,{action:{name:"leave_from_page",elapsed_since_page_load:(Date.now()-b)/1e3}})},!1)}},{key:"trackScroll",value:function(t,e){var n,a,i=this,o=t||25,r=100/o,l=1e3*e||2e3,d=Date.now(),c=d,s=0;this.eventHandler.remove(_.scroll),_.scroll=this.eventHandler.add(p,"atlasVisibilityStatus",function(){"hidden"!==(n=i.utils.getV(null)).detail.documentIsVisible&&"prerender"!==n.detail.documentIsVisible&&(d=Date.now(),a=Math.round(n.detail.documentScrollRate*r)*o,s<a&&0<=a&&a<=100&&setTimeout(function(){s<a&&(i.utils.transmit("scroll","page",g,h,{scroll_depth:{page_height:n.detail.documentHeight,viewed_until:n.detail.documentScrollUntil,viewed_percent:a,elapsed_since_page_load:(d-b)/1e3,elapsed_since_prev_action:(d-c)/1e3}}),s=a),c=d},l))},!1)}},{key:"trackInfinityScroll",value:function(t,e){var n,a,i=this,o=1e3*e||2e3,r=Date.now(),l=r,d=0;this.eventHandler.remove(_.infinityScroll),_.infinityScroll=this.eventHandler.add(p,"atlasVisibilityStatus",function(){"hidden"!==(n=i.utils.getV(null)).detail.documentIsVisible&&"prerender"!==n.detail.documentIsVisible&&(r=Date.now(),a=n.detail.documentScrollUntil,d<a&&d<=a&&t<=a&&setTimeout(function(){d<a&&(i.utils.transmit("infinity_scroll","page",g,h,{scroll_depth:{page_height:n.detail.documentHeight,viewed_until:a,viewed_percent:n.detail.documentScrollRate,elapsed_since_page_load:(r-b)/1e3,elapsed_since_prev_action:(r-l)/1e3}}),d=a+t),l=r},o))},!1)}},{key:"trackRead",value:function(t,e,n){var a,i,o,r,l,d,c,s,u,m,v=this;t&&(i=100/(a=e||25),o=Date.now(),r=o,l={},s=c=null,m=u=d=0,this.eventHandler.remove(_.read),_.read=this.eventHandler.add(p,"atlasVisibilityStatus",function(){"hidden"!==(l=v.utils.getV(t)).detail.documentIsVisible&&"prerender"!==l.detail.documentIsVisible&&l.status.isInView&&(o=Date.now(),d+=o-(r=1e3<=o-r?o:r),r=o,n.forEach(function(t){d/1e3|t<=0&&o-r<1e3&&(n.shift(),c=t)}),c&&s!==c&&(v.utils.transmit("read","article",g,h,{read:{mode:"time",milestone:c,page_height:l.detail.documentHeight,element_height:l.detail.targetHeight,viewed_from:l.detail.targetVisibleTop,viewed_until:l.detail.targetVisibleBottom,viewed_percent:u,elapsed_since_page_load:(o-b)/1e3,elapsed_since_prev_action:(o-r)/1e3}}),s=c,c=null),u=Math.round(l.detail.targetScrollRate*i)*a,m<u&&0<=u&&u<=100&&setTimeout(function(){m<u&&(v.utils.transmit("read","article",g,h,{read:{mode:"scroll",page_height:l.detail.documentHeight,element_height:l.detail.targetHeight,viewed_from:l.detail.targetVisibleTop,viewed_until:l.detail.targetVisibleBottom,viewed_percent:u,elapsed_since_page_load:(o-b)/1e3,elapsed_since_prev_action:(o-r)/1e3}}),m=u)},1e3))},!1))}},{key:"trackViewability",value:function(e){var n=this,a=Date.now(),i={},o={};this.eventHandler.remove(_.viewability),_.viewability=this.eventHandler.add(p,"atlasVisibilityStatus",function(){for(var t=0;t<e.length;t++)!function(t){e[t]&&(i[t]=n.utils.getV(e[t]),!0===i[t].status.isInView&&"hidden"!==i[t].detail.documentIsVisible&&"prerender"!==i[t].detail.documentIsVisible&&.5<=i[t].detail.targetViewableRate&&!o[t]&&setTimeout(function(){.5<=i[t].detail.targetViewableRate&&!o[t]&&(a=Date.now(),o[t]=!0,n.utils.transmit("viewable_impression","ad",g,h,{viewability:{page_height:i[t].detail.documentHeight,element_order_in_target:t,element_tag:e[t].tagName,element_class:e[t].className,element_id:e[t].id,element_height:i[t].detail.targetHeight,elapsed_since_page_load:(a-b)/1e3}}))},1e3))}(t)},!1)}},{key:"trackMedia",value:function(a,i){for(var o=this,n=["play","pause","end"],r={},t=0;t<n.length;t++)!function(e){o.eventHandler.remove(_.media[n[e]]),_.media[n[e]]=o.eventHandler.add(p.document.body,n[e],function(t){o.utils.qsM(a,t.target)&&(t=o.utils.getM(t.target),o.utils.transmit(n[e],t.tag,g,h,{media:t}))},{capture:!0})}(t);this.eventHandler.remove(_.media.timeupdate),_.media.timeupdate=this.eventHandler.add(p.document,"timeupdate",function(t){if(o.utils.qsM(a,t.target)){var e=o.utils.getM(t.target),n=e.tag+"-"+e.id+"-"+e.src;if(r[n])return!1;r[n]=setTimeout(function(){!0!==t.target.paused&&!0!==t.target.ended&&o.utils.transmit("playing",e.tag,g,h,{media:e}),r[n]=!1},1e3*i)}},{capture:!0})}},{key:"trackForm",value:function(t){var n=this;if(t){for(var a=["focus","change"],i={name:t.name||t.id||"-",dataset:t.dataset,items_detail:{}},e=0;e<a.length;e++)!function(e){n.eventHandler.remove(_.form[a[e]]),_.form[a[e]]=n.eventHandler.add(t,a[e],function(t){i=n.utils.getF(i,a[e],t.target,b)},!1)}(e);this.eventHandler.remove(_.unload),_.unload=this.eventHandler.add(p,y,function(){n.utils.transmit("track","form",g,h,{form:i})},!1)}}},{key:"trackThroughMessage",value:function(){var n=this;this.eventHandler.remove(_.message),_.message=this.eventHandler.add(p,"message",function(t){var e={};try{e=JSON.parse(t.data.attributes)}catch(t){}t&&t.data&&t.data.isAtlasEvent&&n.utils.transmit(t.data.action,t.data.category,g,h,e)},!1)}}]),x);function x(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x)}n.default=a},{"./utils.js":3}],3:[function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(n,"__esModule",{value:!0});var c=null,s=null,u=null,m=null,v="0",i={},o=0,g=!0,r=(function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(l,[{key:"initSystem",value:function(t){c=t.endpoint||"astat.nikkei.com",s=t.apiKey||"885cfd611594f1cb21ecd50b741a9f55a68fc4d8",u=t.beaconTimeout||2e3,m=t.cookieName||"atlasId",(!(v=this.getC(m)||this.getLS("atlasId"))||"0"===v||0===v||"1"===v||1===v||v.length<5)&&(v=this.uid()+this.uid()),this.setLS("atlasId",v)}},{key:"uid",value:function(){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/x/g,function(){return t[Math.floor(Math.random()*t.length)]})}},{key:"qsM",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=null,i="button",o=[],r=[];for(3===e.nodeType&&(e=e.parentNode);e&&e!==this.targetWindow.document;){var l=(e.matches||e.msMatchesSelector||function(){return!1}).bind(e),d=e.tagName.toLowerCase();"html"!==d&&"body"!==d&&(e.id&&(d+="#"+e.id),e.className&&(d+="."+e.className),r.unshift(d)),n&&e.hasAttribute(n)&&o.unshift(e.getAttribute(n)),!a&&l(t)&&(i="a"===e.tagName.toLowerCase()?"link":e.tagName.toLowerCase(),a=e),e=e.parentNode}return{element:a,category:i,pathTrackable:o.join(">"),pathDom:r.join(">")}}},{key:"getC",value:function(t){for(var e=this.targetWindow.document.cookie.split(";"),n=0;n<e.length;n++){for(var a=e[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t+"="))return a.substring((t+"=").length,a.length)}return""}},{key:"getQ",value:function(t){var e=this.targetWindow.location.search.slice(1);if(""===e)return"";for(var n=e.split("&"),a=n.length,i=0;i<a;++i){var o=n[i].split("=");if(decodeURIComponent(o[0])===t)return decodeURIComponent(o[1])}return""}},{key:"getLS",value:function(t){var e="";try{e=this.targetWindow.localStorage[t]}catch(t){e=""}return e}},{key:"setLS",value:function(t,e){try{this.targetWindow.localStorage.setItem(t,e)}catch(t){}}},{key:"delLS",value:function(t){try{this.targetWindow.localStorage.removeItem(t)}catch(t){}}},{key:"getNav",value:function(){var t,e,n={history_length:this.targetWindow.history.length};return"performance"in this.targetWindow&&("getEntriesByType"in(e=this.targetWindow.performance)&&(1<=(t=e.getEntriesByType("navigation")).length&&(n.type=t[0].type,n.redirectCount=t[0].redirectCount,n.domContentLoaded=t[0].domContentLoadedEventStart)),"getEntriesByName"in e&&(1<=(e=e.getEntriesByName("first-paint")).length&&(n.first_paint=e[0].startTime))),n}},{key:"getP",value:function(){var t,e={},n={};return"performance"in this.targetWindow&&(n={unload:(t=this.targetWindow.performance.timing).unloadEventEnd-t.unloadEventStart,redirect:t.redirectEnd-t.redirectStart,dns:t.domainLookupEnd-t.domainLookupStart,tcp:t.connectEnd-t.connectStart,request:t.responseStart-t.requestStart,response:t.responseEnd-t.responseStart,dom:t.domContentLoadedEventStart-t.domLoading<0||36e5<t.domContentLoadedEventStart-t.domLoading?null:t.domContentLoadedEventStart-t.domLoading,domContent:t.domContentLoadedEventEnd-t.domContentLoadedEventStart<0||36e5<t.domContentLoadedEventEnd-t.domContentLoadedEventStart?null:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,onload:t.loadEventEnd-t.loadEventStart<0||36e5<t.loadEventEnd-t.loadEventStart?null:t.loadEventEnd-t.loadEventStart,untilResponseComplete:t.responseEnd-t.navigationStart<0||36e5<t.responseEnd-t.navigationStart?null:t.responseEnd-t.navigationStart,untilDomComplete:t.domContentLoadedEventStart-t.navigationStart<0||36e5<t.domContentLoadedEventStart-t.navigationStart?null:t.domContentLoadedEventStart-t.navigationStart},e=(this.targetWindow.performance||{}).navigation),{performanceResult:n,navigationType:e}}},{key:"handler",value:function(){return{add:function(t,e,n,a){return t.addEventListener(e,n,a),i[o]={target:t,type:e,listener:n,capture:a},o++},remove:function(t){t in i&&(t=i[t]).target.removeEventListener(t.type,t.listener,t.capture)}}}},{key:"getV",value:function(t){var e={};try{e=t.getBoundingClientRect()}catch(t){e={}}var n=this.targetWindow.innerHeight,a=this.targetWindow.document.documentElement.scrollHeight,i=this.targetWindow.document.visibilityState||"unknown",o="pageYOffset"in this.targetWindow?this.targetWindow.pageYOffset:(this.targetWindow.document.documentElement||this.targetWindow.document.body.parentNode||this.targetWindow.document.body).scrollTop,r=o+n,l=e.height,d=e.top<=0?0:e.top,c=-1*(e.bottom-n)<=0?0:-1*(e.bottom-n),s=null,u=null,m=!1,t=null,t=0<=e.top&&e.bottom>n&&e.top>=n?(u=s=null,m=!1,"pre"):0<=e.top&&e.bottom>n&&e.top<n?(u=n-e.top,m=!(s=0),"top"):e.top<0&&e.bottom>n?(u=(s=-1*e.top)+n,m=!0,"middle"):0<=e.top&&e.bottom<=n?(u=l,m=!(s=0),"all"):e.top<0&&0<=e.bottom&&e.bottom<=n?(s=l+e.top,u=l,m=!0,"bottom"):e.top<0&&e.bottom<0?(u=s=null,m=!1,"post"):(m=!1,"unknown");return{detail:{viewportHeight:n,documentHeight:a,documentIsVisible:i,documentVisibleTop:o,documentVisibleBottom:r,targetHeight:l,targetVisibleTop:s,targetVisibleBottom:u,targetMarginTop:d,targetMarginBottom:c,targetScrollUntil:u,targetScrollRate:u/l,targetViewableRate:(u-s)/l,documentScrollUntil:r,documentScrollRate:r/a},status:{isInView:m,location:t}}}},{key:"getM",value:function(t){if(void 0!==t)return{tag:t.nodeName.toLowerCase()||"na",id:t.id||"na",src:t.src||"na",type:t.type||void 0,codecs:t.codecs||void 0,muted:t.muted||!1,default_muted:t.defaultMuted||!1,autoplay:t.autoplay||!1,width:t.clientWidth||void 0,height:t.clientHeight||void 0,player_id:t.playerId||void 0,played_percent:Math.round(t.currentTime/t.duration*100),duration:t.duration,current_time:Math.round(10*t.currentTime)/10,dataset:t.dataset}}},{key:"getF",value:function(t,e,n,a){var i=n.name||n.id||"-",o=0;if("select"===n.tagName.toLowerCase()){for(var r=[],l=0;l<n.length;l++)n[l].selected&&r.push(!0);o=r.length}else o="input"!==n.tagName.toLowerCase()||"checkbox"!==n.type&&"radio"!==n.type?n.value.length:n.checked?1:0;return"hidden"!==n.type&&(t.items_detail[i]={status:e,length:o}),t.first_item||(t.first_item=n.name||n.id||"-",t.first_item_since_page_load=(Date.now()-a)/1e3),t.last_item=n.name||n.id||"-",t.last_item_since_page_load=(Date.now()-a)/1e3,t.last_item_since_first_item=t.last_item_since_page_load-t.first_item_since_page_load,t}},{key:"generateRootId",value:function(){return v+this.uid()}},{key:"buildIngest",value:function(t,e,n){var a,i,o={user:t,context:{}},r="unknown";for(a in this.targetWindow.orientation&&(r=90===Math.abs(this.targetWindow.orientation)?"landscape":"portrait"),e)o.context[a]=e[a];for(i in n)o.context[i]=n[i];t=new Date;return o.user.timezone=t.getTimezoneOffset()/60*-1,o.user.timestamp=t.toISOString(),o.user.viewport_height=this.targetWindow.innerHeight,o.user.viewport_width=this.targetWindow.innerWidth,o.user.screen_height=this.targetWindow.screen.height,o.user.screen_width=this.targetWindow.screen.width,o.user.layout=r,o}},{key:"compress",value:function(t){return t=(t=(t=(t=(t=(t=(t=t.replace(/%22%7D%2C%22/g,"%z")).replace(/%22%3A%22/g,"%y")).replace(/%22%2C%22/g,"%x")).replace(/%22%3A%7B/g,"%w")).replace(/%22%3A/g,"%v")).replace(/%2C%22/g,"%u")).replace(/%7D%7D%7D/g,"%t")}},{key:"xhr",value:function(t,e){var n=null;this.targetWindow.XDomainRequest?((n=new XDomainRequest).ontimeout=function(){},n.onprogress=function(){},n.onerror=function(){}):n=new XMLHttpRequest,n.open("GET",t,e),!0===e&&(n.timeout=u),n.withCredentials=!0;try{n.send()}catch(t){}}},{key:"transmit",value:function(t,e,n,a,i){var o=Date.now(),r=!("unload"===t&&"page"===e),l=1;this.getC(m)!==v&&(l=0);i=JSON.stringify(this.buildIngest(n,a,i)),e="https://"+c+"/ATJ-2.15.6/"+o+"/"+encodeURIComponent(v)+"/"+l+"/ingest?k="+s+"&a="+t+"&c="+e+"&aqe=%&d="+this.compress(encodeURIComponent(i));if("sendBeacon"in navigator&&!0===g){try{g=navigator.sendBeacon(e,null)}catch(t){g=!1}return g||this.xhr(e,r),!0}i=this.targetWindow;if("fetch"in i&&"function"==typeof i.fetch&&"AbortController"in i&&"function"==typeof i.AbortController){var d=new i.AbortController,i=d.signal;setTimeout(function(){return d.abort()},u);try{this.targetWindow.fetch(e,{signal:i,method:"GET",cache:"no-store",keepalive:!0})}catch(t){}}else this.xhr(e,r);return!0}}]),l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.targetWindow=t}n.default=r},{}]},{},[1]);