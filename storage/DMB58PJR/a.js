(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[591],{347:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[channel]/archive/[...article]",function(){return r(3439)}])},5881:function(e,t,r){"use strict";var n=r(5893),a=r(4184),i=r.n(a),o=r(9401),l=r(9151),c=r.n(l);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}t.Z=function(e){var t=e.className,r=e.enableMobile,a=void 0!==r&&r,l=s(e,["className","enableMobile"]);return(0,n.jsx)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}({className:i()(c().root,t),format:"leaderboard",sizesAt0:a?"mobile-wide":"",sizesAt976:"leaderboard",targetingPos:l.targetingPos||"leaderboard"},l))}},3439:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return be}});var n=r(4051),a=r.n(n),i=r(5893),o=r(4566),l=r(3437),c=r(3049),u=r(4625),s=r(6102),d=r(5152),f=r(9008),y=r(3174),p=r(1163),m=r(8277),v=r(3944),b=r(7294),g=r(903),h=r(1632),w=r(4184),j=r.n(w),x=r(2912),_=r.n(x),C=r(1176),O=r(5584),A=r(6420),P=r(7048),Z=r(2150),S=r(5876),L=r(2130),N=r(5402),k=r(675),B=r(491),T=r(5124),E=r(1317),I=r(5881);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){M(e,t,r[t])}))}return e}var H=(0,h.Z)((function(){return Promise.resolve().then(r.bind(r,6134))})),z=(0,h.Z)((function(){return Promise.resolve().then(r.bind(r,317))})),$=(0,h.Z)((function(){return r.e(694).then(r.bind(r,3694))})),R=(0,h.Z)((function(){return r.e(706).then(r.bind(r,1706))})),X=function(e){var t,r,n,a;return(0,b.useEffect)((function(){if(e.embeds.length){var t=!0,r=!1,n=void 0;try{for(var a,i=e.embeds[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if("script"===(null===o||void 0===o?void 0:o.type)){var l=document.createElement("script");l.type="text/javascript",l.src=o.src,document.body.appendChild(l)}}}catch(c){r=!0,n=c}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}}),[e.embeds]),(0,i.jsxs)("main",{id:"main-content","data-category":"story page",children:[e.editorialProject&&(null===(t=e.editorialProject.river)||void 0===t||null===(r=t.edges)||void 0===r?void 0:r.length)>3?(0,i.jsx)(C.Z,D({},e.editorialProject)):(0,i.jsx)(I.Z,{}),(0,i.jsxs)("article",{className:j()(_().article,e.layout===g.Bv.Standard&&_().articleStandard),children:[(0,i.jsxs)("header",{className:_().articleHeader,children:[(0,i.jsxs)("div",{className:j()(e.layout===g.Bv.Twocol&&_().twoColumnLockupWrapper),children:[e.layout===g.Bv.Feature&&e.leadArt&&(0,i.jsx)(P.Z,D({layout:e.layout},e.leadArt)),(0,i.jsxs)("div",{className:j()(e.layout===g.Bv.Twocol?_().twoColArticleLockup:_().defaultArticleLockup),children:[(0,i.jsx)("div",{className:j()(_().rubric,e.layout===g.Bv.Feature&&_().featureRubric,e.layout===g.Bv.Twocol&&_().twoColRubric),children:(0,i.jsx)(Z.Z,D({},e))}),(0,i.jsx)("div",{className:_().title,children:(0,i.jsx)(S.Z,D({},e))}),(0,i.jsx)("div",{className:_().dek,children:(0,i.jsx)(L.Z,D({},e))}),(0,i.jsx)("div",{className:j()(_().byline,e.layout===g.Bv.Feature&&_().featureByline,e.layout===g.Bv.Twocol&&_().twoColByline),children:(0,i.jsx)(N.Z,D({},e))})]}),(e.layout===g.Bv.Standard||e.layout===g.Bv.Twocol)&&e.leadArt&&(0,i.jsx)(P.Z,D({layout:e.layout},e.leadArt))]}),(0,i.jsxs)("div",{className:_().articleUtilityBar,children:[(0,i.jsx)(B.Z,D({},e)),(0,i.jsx)(T.Z,D({},e))]}),(0,i.jsxs)(O.Z,{borderBottom:!0,children:["ideas"===(null===(n=e.primaryChannel)||void 0===n?void 0:n.slug)&&e.authors.length>0&&"BlogArticle"===e.__typename&&(0,i.jsx)(k.Z,D({},e)),e.editorsNote&&(0,i.jsx)(E.Z,D({},e.editorsNote))]})]}),(0,i.jsx)(A.Z,D({},e)),(0,i.jsxs)(O.Z,{children:[(null===(a=e.editorialProject)||void 0===a?void 0:a.foundationLineArticle)&&(0,i.jsx)(H,D({},e.editorialProject)),e.authors&&e.authors.map((function(t,r){return(0,i.jsx)(z,D({index:r,reviews:e.reviews},t),t.displayName)}))]}),(0,i.jsx)(R,{id:e.id.split(":")[1],preview:e.preview})]}),(0,i.jsx)($,{})]})},q=r(234),F=r(6026),U=r(3721),Q=r(2063),W=r(9024),G=r(3416),Y=r(6134),J=r(317);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){V(e,t,r[t])}))}return e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(){var e,t,r=(e=["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n\n  query ArticleQuery($id: ID!, $preview: String) {\n    article(id: $id, preview: $preview) {\n      __typename\n      id\n      isTnfCompatible\n      datePublished\n      title\n      slug\n      wordCount\n      layout\n      isFreelance\n      isPython3\n      preview\n      watsonInfo {\n        topCategory {\n          full\n          one\n          two\n          three\n          four\n        }\n        categories\n      }\n      grapeshot {\n        segments\n      }\n      editorialProject {\n        slug\n        displayName\n        ...articleBentoRecircSwan\n        ...articleFoundationLineSwan\n      }\n      ...articleMetadata\n      ...articleRubric\n      ...articleTitle\n      ...articleSwanDek\n      ...articleTimestamp\n      ...articleBioSwan\n      ...aboutTheAuthors\n      ...articleBylines\n      ...articleJsonLdData\n      ...articleShare\n      ...articleBodyContent\n\n      leadArt {\n        ...articleLeadArtSwan\n      }\n      embeds {\n        type\n        src\n      }\n      primaryChannel {\n        slug\n        displayName\n      }\n      primaryCategory {\n        ... on Category {\n          slug\n        }\n        ... on Channel {\n          slug\n        }\n        ... on EditorialProject {\n          slug\n        }\n      }\n      categories {\n        slug\n      }\n      channels {\n        slug\n      }\n      editorsNote {\n        ...editorsNoteSwan\n      }\n      advertisingInfo {\n        disableHouseAd\n      }\n      ... on MagazineArticle {\n        issue {\n          issueName\n          slug\n        }\n      }\n    }\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return re=function(){return r},r}var ne=(0,l.Ps)(re(),Z.Z.fragment,S.Z.fragment,P.Z.fragment,E.Z.fragment,A.Z.fragment,J.default.fragment,F.Z.fragment,L.Z.fragment,N.Z.fragment,U.Z.fragment,Q.Z.fragment,W.Z.fragment,G.Z.fragment,k.Z.fragment,B.Z.fragment,Y.default.fragment,q.Z.fragment,C.Z.fragment,T.Z.fragment),ae=(0,d.default)((function(){return r.e(676).then(r.bind(r,6676))}),{loadableGenerated:{webpack:function(){return[6676]}}}),ie=(0,d.default)((function(){return r.e(838).then(r.bind(r,1838))}),{loadableGenerated:{webpack:function(){return[1838]}}}),oe=function(e){var t,r=e.data,n=(0,y.aC)().hasPaywallAccess;return(0,v.Px)(r),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.default,{children:(0,i.jsxs)("title",{children:[r.article.seoTitle||r.article.title," - The Atlantic"]})}),(0,i.jsx)(F.Z,ee({},r.article)),(0,i.jsx)(q.Z,ee({},r.article)),(0,i.jsx)(m.s,{articleId:r.article.id.split(":")[1],previewParam:r.article.preview,primaryCategorySlug:(null===(t=r.article.primaryCategory)||void 0===t?void 0:t.slug)||"",children:(0,i.jsx)(X,ee({},r.article))}),r.article.hasMeter&&!n?(0,i.jsx)(ae,{}):(0,i.jsx)(ie,ee({},r.article))]})},le=function(){var e=(0,p.useRouter)().query,t=te(e.article,4),r=(t[0],t[1],t[2],t[3]),n="string"===typeof e.preview?e.preview:null,a=te((0,l.aM)({query:ne,variables:{id:r,preview:n}}),1)[0],o=a.error,c=a.data;return o&&(0,u.nm)({error:o}),c?(0,i.jsx)(oe,{data:c},"article-".concat(c.article.id)):null};function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ue(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(u){return void r(u)}l.done?t(c):Promise.resolve(c).then(n,a)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){se(e,t,r[t])}))}return e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(){var e,t,r=(e=["\n  query ArticleInitialPropsQuery($id: ID!, $preview: String) {\n    article(id: $id, preview: $preview) {\n      id\n      isTnfCompatible\n      layout\n      hasMeter\n      url\n    }\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return ye=function(){return r},r}var pe=(0,h.Z)((function(){return r.e(490).then(r.bind(r,7490))})),me=function(){return(0,i.jsx)(o.Z,{analyticsCategory:"story page",sonsPromo:(0,i.jsx)(pe,{showFullWidth:!0}),children:(0,i.jsx)(le,{})})},ve=(0,l.Ps)(ye());me.getInitialProps=function(){var e,t=(e=a().mark((function e(t){var r,n,i,o,l,d,f,y,p,m,v,b,g,h,w,j,x,_,C,O;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.urqlClient,n=t.query,i=t.req,o=t.res,(d=fe(n.article,4))[0],d[1],d[2],f=d[3],y=new RegExp(/^\/[a-z-]+\/archive\/\d{4}\/\d{2}\/[a-z\-\_\d]+\/\d+\/*($|\?)/i),!(null===i||void 0===i?void 0:i.url)){e.next=9;break}if(null===i||void 0===i||null===(p=i.url)||void 0===p?void 0:p.match(y)){e.next=9;break}throw new u.TX;case 9:return(m=parseInt(f,10))&&m<3e5&&"magazine"===n.channel&&(f="".concat(m+3e5)),v="string"===typeof n.preview?n.preview:null,e.next=14,r.query(ve,{id:f,preview:v}).toPromise();case 14:if(b=e.sent,o&&(o.setHeader("Surrogate-Key","article-id-".concat(f)),n.preview&&o.setHeader("Cache-Control","private, no-store, max-age=0")),!o||!(null===(l=b.data)||void 0===l?void 0:l.article)){e.next=27;break}return w=b.data.article,j=w.id.split(":")[1],x=(null===i||void 0===i||null===(g=i.url)||void 0===g?void 0:g.split("?")[1])||"",(0,s.Z)(de({},b.data)),n.preview||(o.setHeader("Cache-Control","s-maxage=180"),o.setHeader("Surrogate-Control","max-age=180, stale-while-revalidate=86400, stale-if-error=259200")),w.hasMeter&&(o.setHeader("X-Is-Metered","1"),o.setHeader("X-Meter-Content",j),_=new Date,C=(0,c.MB)(_),o.setHeader("X-Meter-Expires",C.toUTCString())),O=w.url.split("theatlantic.com")[1],-1===(null===i||void 0===i||null===(h=i.url)||void 0===h?void 0:h.indexOf(O))&&(o.setHeader("Location","".concat(O).concat(x&&"?".concat(x))),o.statusCode=302,o.end()),e.abrupt("return",{});case 27:return e.abrupt("return",{});case 28:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){ue(i,n,a,o,l,"next",e)}function l(e){ue(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();var be=(0,l.du)(me)},9151:function(e){e.exports={root:"Leaderboard_root__nPXmd"}},2912:function(e){e.exports={article:"ArticleLayoutComponent_article__NSQjN",articleStandard:"ArticleLayoutComponent_articleStandard__0M1Pd",articleHeader:"ArticleLayoutComponent_articleHeader__NlhDm",twoColumnLockupWrapper:"ArticleLayoutComponent_twoColumnLockupWrapper__jbsxs",defaultArticleLockup:"ArticleLayoutComponent_defaultArticleLockup__9_zii",twoColArticleLockup:"ArticleLayoutComponent_twoColArticleLockup__b0XCX",rubric:"ArticleLayoutComponent_rubric__YgSfl",featureRubric:"ArticleLayoutComponent_featureRubric__b_sx4",twoColRubric:"ArticleLayoutComponent_twoColRubric__dDtmQ",title:"ArticleLayoutComponent_title__2tOYT",dek:"ArticleLayoutComponent_dek__Yy5TX",byline:"ArticleLayoutComponent_byline__GDNh6",twoColByline:"ArticleLayoutComponent_twoColByline__J6xb1",featureByline:"ArticleLayoutComponent_featureByline__S1T70",articleUtilityBar:"ArticleLayoutComponent_articleUtilityBar__Vc8st"}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,372,320,656,59,843,884,687,278,888,179],(function(){return t(6395),t(347)}));var r=e.O();_N_E=r}]);