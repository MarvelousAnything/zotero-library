(()=>{"use strict";var e;!function(e){e.PAGE_VIEW="page-view",e.VIDEO_PLAY="video-start-playing",e.FIRST_VIDEO_PLAY="first-video-start-playing",e.VIDEO_COMPLETED="video-completed",e.ADDED_BY_PIXELS="added-by-pixels"}(e||(e={}));var t=function(e){var t=new XMLHttpRequest;t.open("POST","https://analytics.pixels.ai",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e))},n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){l={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return o},i=function(e,t,n){if(n||2===arguments.length)for(var i,l=0,a=t.length;l<a;l++)!i&&l in t||(i||(i=Array.prototype.slice.call(t,0,l)),i[l]=t[l]);return e.concat(i||Array.prototype.slice.call(t))},l=function(){var e;return new URLSearchParams(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.search).has("__DEBUGPIXELS__")},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l()&&console.log.apply(console,i([],n(e),!1))},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){l={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return o},r=function(e,t,n){if(n||2===arguments.length)for(var i,l=0,a=t.length;l<a;l++)!i&&l in t||(i||(i=Array.prototype.slice.call(t,0,l)),i[l]=t[l]);return e.concat(i||Array.prototype.slice.call(t))},d=!1,c=function(e,t){d=!0;var n=document.createElement("script");n.defer=!0,n.onload=t,n.src="https://cdn.jwplayer.com/libraries/".concat(e,".js"),document.head.appendChild(n)},s=function(n,i,l){var a,o,r,d,c=window.jwplayer,s="https://api.pixels.ai";/localhost/.test(window.location.href)?s="http://localhost:3000":/pub-dev.pixels.ai/.test(window.location.href)&&(s="https://api-dev.pixels.ai");var u=l.pageOriginUrl||document.location.href,p=function(e){var t=new URL(e),n=t.pathname,i=t.hostname,l=n.split("/").filter(Boolean),a="",o=l[l.length-1].match(/[a-z]?\d+(.html?)?$/);return o&&(a=o[0].replace(/\.html?$/,"")),{hostname:i,id:a,section:l[0]}}(u),f=p.id,v=p.hostname,y=(null===(o=null===(a=c.defaults)||void 0===a?void 0:a.related)||void 0===o?void 0:o.file)||(null===(d=null===(r=c(n).getConfig())||void 0===r?void 0:r.related)||void 0===d?void 0:d.file);if(y){var g=encodeURIComponent(y.replace("MEDIAID",i));l.related={file:"".concat(s,"/video-player/related?playListUrl=").concat(g,"&pageOriginUrl=").concat(u)}}l.playlist="https://cdn.jwplayer.com/v2/media/".concat(i),c(n).setup(l);var w,h,m=function(e){return function(){var i=c(n).getPlaylistItem().mediaid;t({id:i,host:v,eventType:e,href:u})}};c(n).on("firstFrame",m(e.VIDEO_PLAY)),c(n).on("firstFrame",(w=e.FIRST_VIDEO_PLAY,h=!1,function(){if(!h){var e=c(n).getPlaylistItem().mediaid;t({id:"".concat(f,"-").concat(e),host:v,eventType:w,href:u}),h=!0}})),c(n).on("complete",m(e.VIDEO_COMPLETED)),l.isSwapped&&c(n).on("ready",m(e.ADDED_BY_PIXELS))},u={};window.pixels=function(e){return performance.now(),{initPlayer:function(t,n,i,l){a("pixels","initPlayer called with playerId",t,i,l),c(t,n);var o=document.getElementById(e);o.style.position="relative",o.style.width="100%",o.style.paddingTop="56.25%",i&&(o.style.background=i),l&&function(e,t){var n=document.createElement("img");n.src=t,n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.width="10%",n.style.marginLeft="-5%",n.style.marginTop="-5%",e.appendChild(n)}(o,l)},setup:function(t){var n=t.playerId,i=t.mediaId;(function(e,t){return n=void 0,i=void 0,d=function(){var n,i;return function(e,t){var n,i,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(l=2&a[0]?i.return:a[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,a[1])).done)return l;switch(i=0,l&&(a=[2&a[0],l.value]),a[0]){case 0:case 1:l=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((l=(l=o.trys).length>0&&l[l.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1],l=a;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(a);break}l[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}}(this,(function(l){switch(l.label){case 0:return e?[4,fetch("https://content.jwplatform.com/v2/sites/".concat(e,"/base_segments?media_ids=").concat(t)).then((function(e){return e.json()})).catch((function(e){return a("pixels",e),null}))]:(a("pixels","Site ID is not found"),[2,""]);case 1:n=l.sent();try{return i=Object.values((null==n?void 0:n.media_ids[t])||[]).flat(),[2,r([],o(new Set(i)),!1).join(",")]}catch(e){return console.error(e),[2,""]}return[2]}}))},new((l=void 0)||(l=Promise))((function(e,t){function a(e){try{r(d.next(e))}catch(e){t(e)}}function o(e){try{r(d.throw(e))}catch(e){t(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof l?n:new l((function(e){e(n)}))).then(a,o)}r((d=d.apply(n,i||[])).next())}));var n,i,l,d})(t.jwplayerSiteId||"g7SpqmnK",i).then((function(e){u[i]=e})),d?(a("pixels","setup called with mediaId",i),s(e,i,t)):(a("pixels","setup called with mediaId and playerId",i,n),c(n,(function(){s(e,i,t)})))},getVideoPlayerInstance:function(){return window.jwplayer},on:function(t,n){a("pixels","on inited for event",t),(0,window.jwplayer)(e).on(t,n)},resize:function(t,n){a("pixels","resize called"),(0,window.jwplayer)(e).resize(t,n)},getHeight:function(){return a("pixels","getHeight called"),(0,window.jwplayer)(e).getHeight()},getAdTag:function(){var t,n,i,l,o,r,d;a("pixels","getAdTag called");var c=window.jwplayer;return(null===(i=null===(n=null===(t=c(e).getConfig().advertising)||void 0===t?void 0:t.schedule)||void 0===n?void 0:n[0])||void 0===i?void 0:i.tag)?c(e).getConfig().advertising.schedule[0].tag:(null===(d=null===(r=null===(o=null===(l=c.defaults)||void 0===l?void 0:l.advertising)||void 0===o?void 0:o.schedule)||void 0===r?void 0:r[0])||void 0===d?void 0:d.tag)?c.defaults.advertising.schedule[0].tag:void 0},setAdTag:function(t){var n,i,l,o,r,d,c;if(t){var s=window.jwplayer,p=s(e).getConfig().playlistItem.mediaid;a("pixels media id",p);var f=new URL(t),v=f.origin+f.pathname,y=new URLSearchParams(f.search);if(y.has("cust_params")&&u[p]){var g=y.get("cust_params");y.set("cust_params",g+"&ad_intelligence="+u[p])}var w="".concat(v,"?").concat(y.toString());a("pixels","setAdTag called",w),(null===(l=null===(i=null===(n=s(e).getConfig().advertising)||void 0===n?void 0:n.schedule)||void 0===i?void 0:i[0])||void 0===l?void 0:l.tag)?s(e).getConfig().advertising.schedule[0].tag=w:(null===(c=null===(d=null===(r=null===(o=s.defaults)||void 0===o?void 0:o.advertising)||void 0===r?void 0:r.schedule)||void 0===d?void 0:d[0])||void 0===c?void 0:c.tag)&&(s.defaults.advertising.schedule[0].tag=w)}},getMediaId:function(){return a("pixels","getMediaId called"),(0,window.jwplayer)(e).getConfig().playlistItem.mediaid},getPlaylistIndex:function(){return a("pixels","getPlaylistIndex called"),(0,window.jwplayer)(e).getPlaylistIndex()},getPlaylistItem:function(t){return a("pixels","getPlaylistItem called"),(0,window.jwplayer)(e).getPlaylistItem(t)},trigger:function(t,n){return a("pixels","trigger called"),(0,window.jwplayer)(e).trigger(t,n)},getConfig:function(){return a("pixels","getConfig called"),(0,window.jwplayer)(e).getConfig()},pause:function(){return a("pixels","pause called"),(0,window.jwplayer)(e).pause()},play:function(){return a("pixels","play called"),(0,window.jwplayer)(e).play()}}}})();
//# sourceMappingURL=wrap-lib.js.map