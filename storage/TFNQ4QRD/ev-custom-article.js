var curr_url=window.location.hostname;linkedin_key="77dc1zvzq9gqak","indianexpress.com"==curr_url?(ev_domain="ev.indianexpress.com",cookie_domain=".indianexpress.com",geo_api_domain="ua.indianexpress.com"):"indian-express-preprod.go-vip.net"==curr_url?(ev_domain="ieo.uat.evolok.net",cookie_domain=".indian-express-preprod.go-vip.net",geo_api_domain="devua.indianexpress.com"):(ev_domain="ieo.uat.evolok.net",cookie_domain=".vipgo.indianexpress.com",geo_api_domain="devua.indianexpress.com"),EV.Dab.init();let adBlockDetection=EV.Dab.isAdblockDetected(),detectPrivateMode=EV.Dab.detectPrivateMode();EV.Em.init({url:"https://"+ev_domain+"/acd/api/3.0",sidCookieDomain:cookie_domain,brand:"IndianExpress"}),geo_var="",geo_city="",geo_state="",ev_channel="";var ev_channel=ev_getCookie("channel");void 0!==ev_channel&&""!==ev_channel||(ev_channel="WEB");var metering_userdata="",usergeolocation=sessionStorage.getItem("ua_geoip_location"),geo_data=jQuery.parseJSON(usergeolocation);function ev_getCookie(e){var a,s,r,o=document.cookie.split(";"),n=o.length;for(a=0;a<n;a++)if(s=o[a].substr(0,o[a].indexOf("=")),r=o[a].substr(o[a].indexOf("=")+1),(s=s.replace(/^\s+|\s+$/g,""))===e)return unescape(r)}function ev_setCookie(e,a,s){var r=new Date;r.setTime(r.getTime()+24*s*60*60*1e3);var o="expires="+r.toUTCString();document.cookie=e+"="+a+";"+o+";path=/"}function do_metering(e,a,s,r){void 0!==e&&Promise.all([adBlockDetection,detectPrivateMode]).then(o=>{var n=JSON.stringify({articleId:e.articleId,site:e.site,title:e.title,publishDate:e.publish_date,updateDate:e.update_date,authors:e.authors,category:e.category,section:e.section,tags:e.tags,count_metering:e.count_metering,premium:e.premium,premium_paywall:e.premium_paywall,geo:a,geocity:s,geostate:r,channel:ev_channel,adblock:o[0],incognito:o[1]});EV.Em.authorize(n,handleMeteringSuccess,handleMeteringError)})}function handleMeteringSuccess(e){metering_userdata=e.userProperties;var a="guest";if(-1==(s=e.hasOwnProperty("segments")?e.segments:[]).indexOf("Digital Subscriber")&&-1==s.indexOf("E-Paper Subscriber")||-1==s.indexOf("Logged-In")?-1!=s.indexOf("Not Active Subscriber")&&-1!=s.indexOf("Logged-In")&&(a="registered"):a="subscriber",ev_setCookie("ev_user_state",a,365),document.location.pathname.endsWith("/login/")&&e.hasOwnProperty("loggedOut")&&!e.loggedOut&&(window.location="/my-account/"),!document.location.pathname.endsWith("/subscribe/")||-1!==s.indexOf("Not Active Subscriber")||-1==s.indexOf("Digital Subscriber")&&-1==s.indexOf("E-Paper Subscriber")||document.referrer.indexOf("/subscriptions/")<0&&(window.location="/express-plus/today-newsstand/"),jQuery("#evnav_subscribe").length>0&&(e.hasOwnProperty("loggedOut")&&!e.loggedOut&&-1!=s.indexOf("Not Active Subscriber")&&-1!=s.indexOf("Logged-In")?(console.log("Menu - Registered User"),jQuery("#evnav_subscribe").attr("href","/subscribe/"),jQuery("#evnav_subscribe").html('<span class="m-sup-link1 m-sup">Subscribe</span><span class="tnav-txt">Epaper</span>'),jQuery("#evnav_subscribe").removeClass("evsubscribe"),jQuery("#evnav_subscribe").addClass("evepaper"),jQuery(".ie-subscribe").css("display","block"),jQuery("#evnav_login").attr("href","/my-account/"),jQuery("#evnav_login").html("My Account"),jQuery("#evnav_login").addClass("evusrlogin"),jQuery("#evnav_login").removeClass("evusrlogout"),jQuery("#demo-modal-target-subscribe").removeClass("ie-subscribe"),jQuery("#demo-modal-target-subscribe").addClass("m-evepaper")):!e.hasOwnProperty("loggedOut")||e.loggedOut||-1==s.indexOf("Digital Subscriber")&&-1==s.indexOf("E-Paper Subscriber")&&-1==s.indexOf("WasSubscriber")?(console.log("nav Menu - Logged out"),jQuery("#evnav_subscribe").attr("href","/subscribe/"),jQuery("#evnav_subscribe").html('<span class="m-sup-link1 m-sup">Subscribe</span><span class="tnav-txt">Epaper</span>'),jQuery("#evnav_subscribe").addClass("evsubscribe"),jQuery("#evnav_subscribe").removeClass("evepaper"),jQuery("#evnav_login").attr("href","/login/"),jQuery("#evnav_login").html("Sign In"),jQuery("#evnav_login").removeClass("evusrlogin"),jQuery("#evnav_login").addClass("evusrlogout"),jQuery("#demo-modal-target-subscribe").addClass("ie-subscribe"),jQuery("#demo-modal-target-subscribe").removeClass("m-evepaper")):(console.log("Menu - Subscribed User"),jQuery("#evnav_subscribe").attr("href","/express-plus/today-newsstand/"),jQuery("#evnav_subscribe").html("Epaper"),jQuery("#evnav_subscribe").removeClass("evsubscribe"),jQuery("#evnav_subscribe").addClass("evepaper"),jQuery(".ie-subscribe").css("display","block"),jQuery("#evnav_login").attr("href","/my-account/"),jQuery("#evnav_login").html("My Account"),jQuery("#evnav_login").addClass("evusrlogin"),jQuery("#evnav_login").removeClass("evusrlogout"),jQuery("#demo-modal-target-subscribe").removeClass("ie-subscribe"),jQuery("#demo-modal-target-subscribe").addClass("m-evepaper"),jQuery("#demo-modal-target-subscribe").addClass("epaper-icon"))),jQuery("#evnav_subscribe_ham").length>0){var s=e.hasOwnProperty("segments")?e.segments:[];e.hasOwnProperty("loggedOut")&&!e.loggedOut&&-1!=s.indexOf("Not Active Subscriber")&&-1!=s.indexOf("Logged-In")?(console.log("Ham Menu - Registered User"),jQuery("#evnav_subscribe_ham").attr("href","/subscribe/"),jQuery("#evnav_subscribe_ham").addClass("evham_epaper"),jQuery("#evnav_subscribe_ham").removeClass("evham_subscribe"),jQuery("#evnav_login_ham").html("My Account"),jQuery("#evnav_login_ham").attr("href","/my-account/"),jQuery("#evnav_login_ham").addClass("evham_signin"),jQuery("#evnav_login_ham").removeClass("evham_signout"),jQuery(".ev_hide_link").removeClass("ev_hide_link")):!e.hasOwnProperty("loggedOut")||e.loggedOut||-1==s.indexOf("Digital Subscriber")&&-1==s.indexOf("E-Paper Subscriber")&&-1==s.indexOf("WasSubscriber")?(console.log("Ham Menu - Logged out"),jQuery("#evnav_subscribe_ham").attr("href","/subscribe/"),jQuery("#evnav_subscribe_ham").removeClass("evham_epaper"),jQuery("#evnav_subscribe_ham").addClass("evham_subscribe"),jQuery("#evnav_login_ham").html("Sign in"),jQuery("#evnav_login_ham").attr("href","/login/"),jQuery("#evnav_login_ham").removeClass("evham_sign"),jQuery("#evnav_login_ham").addClass("evham_signout"),jQuery(".ev_hide_link").removeClass("ev_hide_link")):(console.log("Ham Menu - Subscribed User"),jQuery("#evnav_subscribe_ham").attr("href","/express-plus/today-newsstand/"),jQuery("#evnav_subscribe_ham").addClass("evham_epaper"),jQuery("#evnav_subscribe_ham").removeClass("evham_subscribe"),jQuery("#evnav_login_ham").html("My Account"),jQuery("#evnav_login_ham").attr("href","/my-account/"),jQuery("#evnav_login_ham").addClass("evham_signin"),jQuery("#evnav_login_ham").removeClass("evham_signout"),jQuery("#evnav_subscribe_ham .m-sup").hide(),jQuery("#evnav_subscribe_ham .tnav-txt").addClass("evonly-subscriber"),jQuery("#evnav_subscribe_ham .tnav-txt").addClass("epaper-ham-icon"),jQuery(".ev_hide_link").removeClass("ev_hide_link"))}"ALLOW_ACCESS"==e.result||(e.requireEntitlement?displayRequireLoginWithEntitlementPaywall():e.result)}function handleMeteringError(e){}null!==geo_data&&void 0!==geo_data.countryIsoCode&&void 0!==geo_data.state&&null!==geo_data.state&&void 0!==geo_data.city&&null!==geo_data.city&&(geo_var=geo_data.countryIsoCode.toLowerCase(),geo_city=geo_data.city.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-"),geo_state=geo_data.state.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-"),(document.location.pathname.endsWith("/subscribe/")||document.location.pathname.endsWith("/registration/"))&&select_tandc(geo_var)),null===geo_var||""===geo_var||null===geo_city||""===geo_city||null===geo_state||""===geo_state?jQuery.ajax({url:"https://"+geo_api_domain+"/api/geoip/resolve",type:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("origin","https://"+location.hostname)},success:function(e){if(console.log("Geo Data ---\x3e"+e),null!==e&&void 0!==e.countryIsoCode&&void 0!==e.state&&null!==e.state&&void 0!==e.city&&null!==e.city){var a=e.countryIsoCode.toLowerCase();console.log("Geo Country ---\x3e"+a);var s=e.city.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-"),r=e.state.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-");(document.location.pathname.endsWith("/subscribe/")||document.location.pathname.endsWith("/registration/"))&&select_tandc(a)}do_metering(custom_ev_data,a,s,r)}}):do_metering(custom_ev_data,geo_var,geo_city,geo_state);