;
(self.AMP=self.AMP||[]).push({m:0,v:"2202230359001",n:"amp-access",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function i(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,i){if(t){if("string"==typeof t)return n(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r;function e(){return r||(r=Promise.resolve(void 0))}var s=function(){var t=this;this.promise=new Promise((function(n,i){t.resolve=n,t.reject=i}))},u=Array.isArray;function o(t,n){for(var i=[],r=0,e=0;e<t.length;e++){var s=t[e];n(s,e,t)?i.push(s):(r<e&&(t[r]=s),r++)}return r<t.length&&(t.length=r),i}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=Object.prototype,h=a.hasOwnProperty,f=a.toString;function l(t){return"[object Object]"===f.call(t)}function v(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function p(t,n){return h.call(t,n)}function d(t,n){if("."==n)return t;for(var r,e=t,s=i(n.split("."),!0);!(r=s()).done;){var u=r.value;if(!(u&&e&&void 0!==e[u]&&"object"==c(e)&&p(e,u))){e=void 0;break}e=e[u]}return e}function m(t){return 1==(null==(n=t)?void 0:n.nodeType)?(t=t).tagName.toLowerCase()+(t.id?"#".concat(t.id):""):t;var n}function b(t,n,i,r,e,s,u,o,c,a,h){return t}var g=function(){function t(){this.Ft=null}var n=t.prototype;return n.add=function(t){var n=this;return this.Ft||(this.Ft=[]),this.Ft.push(t),function(){n.remove(t)}},n.remove=function(t){var n,i,r;this.Ft&&(i=t,-1!=(r=(n=this.Ft).indexOf(i))&&n.splice(r,1))},n.removeAll=function(){this.Ft&&(this.Ft.length=0)},n.fire=function(t){if(this.Ft)for(var n,r=i(this.Ft,!0);!(n=r()).done;)(0,n.value)(t)},n.getHandlerCount=function(){var t,n;return null!==(t=null===(n=this.Ft)||void 0===n?void 0:n.length)&&void 0!==t?t:0},t}();function w(t){return JSON.parse(t)}function y(t,n){try{return w(t)}catch(t){return null==n||n(t),null}}var E=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function S(t,n,i,r,e){return e||(n?"�":r?t.slice(0,-1)+"\\"+t.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+t)}function _(t){return String(t).replace(E,S)}function R(t,n){t.insertBefore(n,t.firstChild)}var A=self.AMP_CONFIG||{},P=("string"==typeof A.thirdPartyFrameRegex?new RegExp(A.thirdPartyFrameRegex):A.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,k=("string"==typeof A.cdnProxyRegex?new RegExp(A.cdnProxyRegex):A.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function x(t){if(!self.document||!self.document.head)return null;if(self.location&&k.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}var T={thirdParty:A.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:A.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:P,cdn:A.cdnUrl||x("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:k,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:A.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:A.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:A.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:A.geoApiUrl||x("amp-geo-api")},O=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function I(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function j(t){var n,i=v();if(!t)return i;for(;n=O.exec(t);){var r=I(n[1],n[1]),e=n[2]?I(n[2].replace(/\+/g," "),n[2]):"";i[r]=e}return i}function U(t){var n=(t||self).location;return j(n.originalHash||n.hash)}var L="";function N(t){var n=t||self;return n.__AMP_MODE?n.__AMP_MODE:n.__AMP_MODE=function(t){return{localDev:!1,development:C(t,U(t)),esm:!1,test:!1,rtvVersion:z(t)}}(n)}function z(t){var n;return L||(L=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"01".concat("2202230359001")),L}function C(t,n){var i=n||U(t);return["1","actions","amp","amp4ads","amp4email"].includes(i.development)||!!t.AMP_DEV_MODE}function M(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var D=self.__AMP_LOG;function F(t,n){throw new Error("failed to call initLogConstructor")}function G(t){return D.user||(D.user=K()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(D.user.win,t)?D.userForEmbed||(D.userForEmbed=K()):D.user}function K(t){return F()}function V(){return D.dev||(D.dev=F())}function $(t,n,i,r,e,s,u,o,c,a,h){return t}function q(t,n,i,r,e,s,u,o,c,a,h){return G().assert(t,n,i,r,e,s,u,o,c,a,h)}function J(t,n){return tt(t=X(t),n)}function H(t,n){return tt(Y(B(t)),n)}function Q(t,n){var i=Y(B(t));return rt(i,n)?tt(i,n):null}function Z(t,n){return function(t,n){var i=nt(t,n);if(i)return i;var r,e,u,o,c=it(t);return c[n]=(e=(r=new s).promise,u=r.reject,o=r.resolve,e.catch((function(){})),{obj:null,promise:e,resolve:o,reject:u,context:null,ctor:null}),c[n].promise}(Y(t),n)}function W(t,n){return nt(Y(t),n)}function X(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function B(t){return t.nodeType?(i=t,n=(i.ownerDocument||i).defaultView,J(n,"ampdoc")).getAmpDoc(t):t;var n,i}function Y(t){var n=B(t);return n.isSingleDoc()?n.win:n}function tt(t,n){$(rt(t,n));var i=it(t)[n];return i.obj||($(i.ctor),$(i.context),i.obj=new i.ctor(i.context),$(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function nt(t,n){var i=it(t)[n];return i?i.promise?i.promise:(tt(t,n),i.promise=Promise.resolve(i.obj)):null}function it(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function rt(t,n){var i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}var et,st=function(t){return function(t,n,i,r){var e=W(t,n);if(e)return e;var s=B(t);return s.whenExtensionsKnown().then((function(){var t=s.getExtensionVersion(i);return t?J(s.win,"extensions").waitForExtension(i,t):null})).then((function(i){return i?Z(t,n):null}))}(t,"amp-analytics-instrumentation","amp-analytics")},ut=function(t){return tt(t,"timer")},ot=function(t){return H(t,"viewer")},ct=function(t){return J(t,"vsync")},at=function(t){return J(t,"xhr")};function ht(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];st(t).then((function(e){e&&e.triggerEventForTarget(t,n,i,r)}))}function ft(t,n,i,r){var e=t,s=i,u=function(t){try{return s(t)}catch(t){var n,i;throw null===(n=(i=self).__AMP_REPORT_ERROR)||void 0===n||n.call(i,t),t}},o=function(){if(void 0!==et)return et;et=!1;try{var t={get capture(){return et=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return et}(),c=!(null==r||!r.capture);return e.addEventListener(n,u,o?r:c),function(){null==e||e.removeEventListener(n,u,o?r:c),s=null,e=null,u=null}}function lt(t){return t.data}var vt=function(){var t=function(t,n,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=n);return i},n=[1,3],i=[1,4],r=[1,18],e=[1,19],s=[1,14],u=[1,15],o=[1,16],a=[1,17],h=[1,21],f=[1,22],l=[5,6,7,10],v=[5,6,7,10,15,16,17,18,19,20,21],p=[5,6,7,10,15,16,17,18,19,20,21,25,27],d={trace:function(){},yy:{},bT:{"error":2,"result":3,"search_condition":4,"EOF":5,"OR":6,"AND":7,"NOT":8,"(":9,")":10,"predicate":11,"comparison_predicate":12,"truthy_predicate":13,"scalar_exp":14,"EQ":15,"DEQ":16,"NEQ":17,"LT":18,"LTE":19,"GT":20,"GTE":21,"atom":22,"field_ref":23,"literal":24,"DOT":25,"field_name":26,"[":27,"string":28,"]":29,"NAME":30,"STRING":31,"NUMERIC":32,"TRUE":33,"FALSE":34,"NULL":35,"$accept":0,"$end":1},ET:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",21:"GTE",25:"DOT",27:"[",29:"]",30:"NAME",31:"STRING",32:"NUMERIC",33:"TRUE",34:"FALSE",35:"NULL"},AT:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,4],[23,1],[26,1],[28,1],[24,1],[24,1],[24,1],[24,1],[24,1]],performAction:function(t,n,i,r,e,s,u){var o=s.length-1;switch(e){case 1:return s[o-1];case 2:this.$=s[o-2]||s[o];break;case 3:this.$=s[o-2]&&s[o];break;case 4:this.$=!s[o];break;case 5:this.$=s[o-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.$=s[o];break;case 9:this.$=s[o-2]===s[o];break;case 10:throw new Error('"==" is not allowed, use "="');case 11:this.$=s[o-2]!==s[o];break;case 12:this.$=c(s[o-2])==c(s[o])&&s[o-2]<s[o];break;case 13:this.$=c(s[o-2])==c(s[o])&&s[o-2]<=s[o];break;case 14:this.$=c(s[o-2])==c(s[o])&&s[o-2]>s[o];break;case 15:this.$=c(s[o-2])==c(s[o])&&s[o-2]>=s[o];break;case 16:this.$=void 0!==s[o]&&null!==s[o]&&""!==s[o]&&0!==s[o]&&!1!==s[o];break;case 20:this.$="[object Object]"==Object.prototype.toString.call(s[o-2])&&s[o-2].hasOwnProperty(s[o])?s[o-2][s[o]]:null;break;case 21:this.$="[object Object]"==Object.prototype.toString.call(s[o-3])&&s[o-3].hasOwnProperty(s[o-1])?s[o-3][s[o-1]]:null;break;case 22:this.$=void 0!==r[s[o]]?r[s[o]]:null;break;case 23:this.$=t;break;case 24:this.$=t.substring(1,t.length-1);break;case 26:this.$=Number(t);break;case 27:this.$=!0;break;case 28:this.$=!1;break;case 29:this.$=null}},table:[{3:1,4:2,8:n,9:i,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{1:[3]},{5:[1,20],6:h,7:f},{4:23,8:n,9:i,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{4:24,8:n,9:i,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},t(l,[2,6]),t(l,[2,7]),t(l,[2,8]),t(l,[2,16],{15:[1,25],16:[1,26],17:[1,27],18:[1,28],19:[1,29],20:[1,30],21:[1,31]}),t(v,[2,17]),t(v,[2,18],{25:[1,32],27:[1,33]}),t(v,[2,19]),t(p,[2,22]),t(v,[2,25]),t(v,[2,26]),t(v,[2,27]),t(v,[2,28]),t(v,[2,29]),t(p,[2,23]),t([5,6,7,10,15,16,17,18,19,20,21,29],[2,24]),{1:[2,1]},{4:34,8:n,9:i,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{4:35,8:n,9:i,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},t(l,[2,4]),{6:h,7:f,10:[1,36]},{14:37,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{14:38,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{14:39,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{14:40,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{14:41,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{14:42,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{14:43,22:9,23:10,24:11,26:12,28:13,30:r,31:e,32:s,33:u,34:o,35:a},{26:44,30:r},{28:45,31:e},t([5,6,10],[2,2],{7:f}),t(l,[2,3]),t(l,[2,5]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,15]),t(p,[2,20]),{29:[1,46]},t(p,[2,21])],defaultActions:{20:[2,1]},parseError:function(t,n){if(!n.recoverable){var i=new Error(t);throw i.hash=n,i}this.trace(t)},parse:function(t){var n=this,i=[0],r=[null],e=[],s=this.table,u="",o=0,c=0,a=0,h=2,f=1,l=e.slice.call(arguments,1),v=Object.create(this.lexer),p={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(p.yy[d]=this.yy[d]);v.setInput(t,p.yy),p.yy.lexer=v,p.yy.parser=this,void 0===v.yylloc&&(v.yylloc={});var m=v.yylloc;e.push(m);var b=v.options&&v.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,w,y,E,S,_,R,A,P,k=function(){var t;return"number"!=typeof(t=v.lex()||f)&&(t=n.bT[t]||t),t},x={};;){if(y=i[i.length-1],this.defaultActions[y]?E=this.defaultActions[y]:(null==g&&(g=k()),E=s[y]&&s[y][g]),void 0===E||!E.length||!E[0]){var T="";for(_ in P=[],s[y])this.ET[_]&&_>h&&P.push("'"+this.ET[_]+"'");T=v.showPosition?"Parse error on line "+(o+1)+":\n"+v.showPosition()+"\nExpecting "+P.join(", ")+", got '"+(this.ET[g]||g)+"'":"Parse error on line "+(o+1)+": Unexpected "+(g==f?"end of input":"'"+(this.ET[g]||g)+"'"),this.parseError(T,{text:v.match,token:this.ET[g]||g,line:v.yylineno,loc:m,expected:P})}if(E[0]instanceof Array&&E.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+g);switch(E[0]){case 1:i.push(g),r.push(v.yytext),e.push(v.yylloc),i.push(E[1]),g=null,w?(g=w,w=null):(c=v.yyleng,u=v.yytext,o=v.yylineno,m=v.yylloc,a>0&&a--);break;case 2:if(R=this.AT[E[1]][1],x.$=r[r.length-R],x._$={first_line:e[e.length-(R||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(R||1)].first_column,last_column:e[e.length-1].last_column},b&&(x._$.range=[e[e.length-(R||1)].range[0],e[e.length-1].range[1]]),void 0!==(S=this.performAction.apply(x,[u,c,o,p.yy,E[1],r,e].concat(l))))return S;R&&(i=i.slice(0,-1*R*2),r=r.slice(0,-1*R),e=e.slice(0,-1*R)),i.push(this.AT[E[1]][0]),r.push(x.$),e.push(x._$),A=s[i[i.length-2]][i[i.length-1]],i.push(A);break;case 3:return!0}}return!0}},m={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(t,n){return this.yy=n||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var n=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===r.length?this.yylloc.first_column:0)+r[r.length-i.length].length-i[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),n=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+n+"^"},test_match:function(t,n){var i,r,e;if(this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,n,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var s in e)this[s]=e[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,n,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e=this._currentRules(),s=0;s<e.length;s++)if((i=this._input.match(this.rules[e[s]]))&&(!n||i[0].length>n[0].length)){if(n=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,e[s])))return t;if(this._backtrack){n=!1;continue}return!1}if(!this.options.flex)break}return n?!1!==(t=this.test_match(n,e[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,i,r){switch(i){case 0:break;case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 35;case 5:case 6:return 33;case 7:case 8:return 34;case 9:return 9;case 10:return 10;case 11:return 27;case 12:return 29;case 13:return"|";case 14:return 19;case 15:return 18;case 16:return 21;case 17:return 20;case 18:return 17;case 19:return 16;case 20:return 15;case 21:return 32;case 22:return 30;case 23:case 24:return 31;case 25:return 25;case 26:return"INVALID";case 27:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^\']*')/,/^(?:"[^\"]*")/,/^(?:\.)/,/^(?:.)/,/^(?:$)/],conditions:{"INITIAL":{"rules":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],"inclusive":!0}}};function b(){this.yy={}}return d.lexer=m,b.prototype=d,d.Parser=b,new b}(),pt=vt,dt=function(){function t(){this.cache=null,this.zwt=null}return t.prototype.evaluate=function(t,n){return this.zwt!==n&&(this.zwt=n,this.cache=v()),p(this.cache,t)||(this.cache[t]=function(t,n){try{return pt.yy=n,!!pt.parse(t)}finally{pt.yy=null}}(t,n)),this.cache[t]},t}();function mt(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,r)}return i}function bt(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?mt(Object(i),!0).forEach((function(n){M(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mt(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}var gt="__AMP__EXPERIMENT_TOGGLES";function wt(t,n){var r=function(t){var n,r,e,s,o;if(t[gt])return t[gt];t[gt]=v();var c=t[gt];b(c);var a=bt(bt({},null!==(n=t.AMP_CONFIG)&&void 0!==n?n:{}),null!==(r=t.AMP_EXP)&&void 0!==r?r:w((null===(e=t.__AMP_EXP)||void 0===e?void 0:e.textContent)||"{}"));for(var h in a){var f=a[h];"number"==typeof f&&f>=0&&f<=1&&(c[h]=Math.random()<f)}var l=null===(s=t.AMP_CONFIG)||void 0===s?void 0:s["allow-doc-opt-in"];if(u(l)&&l.length){var p=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(p)for(var d,m,g=i((null===(d=p.getAttribute("content"))||void 0===d?void 0:d.split(","))||[],!0);!(m=g()).done;){var y=m.value;l.includes(y)&&(c[y]=!0)}}Object.assign(c,function(t){var n,r="";try{var e;"localStorage"in t&&(r=null!==(e=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==e?e:"")}catch(t){V().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}for(var s,u=(null===(n=r)||void 0===n?void 0:n.split(/\s*,\s*/g))||[],o=v(),c=i(u,!0);!(s=c()).done;){var a=s.value;a&&("-"==a[0]?o[a.substr(1)]=!1:o[a]=!0)}return o}(t));var E=null===(o=t.AMP_CONFIG)||void 0===o?void 0:o["allow-url-opt-in"];if(u(E)&&E.length)for(var S,_=j(t.location.originalHash||t.location.hash),R=i(E,!0);!(S=R()).done;){var A=S.value,P=_["e-".concat(A)];"1"==P&&(c[A]=!0),"0"==P&&(c[A]=!1)}return c}(t);return!!r[n]}var yt,Et,St=function(){function t(t){this.Wt=t,this.Kt=0,this.Qt=0,this.Xt=v()}var n=t.prototype;return n.has=function(t){return!!this.Xt[t]},n.get=function(t){var n=this.Xt[t];if(n)return n.access=++this.Qt,n.payload},n.put=function(t,n){this.has(t)||this.Kt++,this.Xt[t]={payload:n,access:this.Qt},this.Yt()},n.Yt=function(){if(!(this.Kt<=this.Wt)){var t,n=this.Xt,i=this.Qt+1;for(var r in n){var e=n[r].access;e<i&&(i=e,t=r)}void 0!==t&&(delete n[t],this.Kt--)}},t}(),_t=new Set(["c","v","a","ad"]),Rt=function(t){return"string"==typeof t?At(t):t};function At(t,n){return yt||(yt=self.document.createElement("a"),Et=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new St(100))),function(t,n,i){if(i&&i.has(n))return i.get(n);t.href=n,t.protocol||(t.href=t.href);var r,e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),r=t.origin&&"null"!=t.origin?t.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,e.origin=r;var s=e;return i&&i.put(n,s),s}(yt,t,n?null:Et)}function Pt(t,n){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}function kt(t){return"https:"==(t=Rt(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(i=".localhost",(r=(n=t.hostname).length-i.length)>=0&&n.indexOf(i,r)==r);var n,i,r}function xt(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";return q(null!=t,"%s %s must be available",n,i),q(kt(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,i,t),t}function Tt(t){var n=t.indexOf("#");return-1==n?t:t.substring(0,n)}function Ot(t){return T.cdnProxyRegex.test(Rt(t).origin)}function It(t){return At(function(t){if(!Ot(t=Rt(t)))return t.href;var n=t.pathname.split("/"),i=n[1];q(_t.has(i),"Unknown path prefix in url %s",t.href);var r=n[2],e="s"==r?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(r);return q(e.indexOf(".")>0,"Expected a . in origin %s",e),n.splice(1,"s"==r?3:2),e+n.join("/")+function(t,n){if(!t||"?"==t)return"";var i=new RegExp("[?&]".concat("(amp_(js[^&=]*|gsa|r|kit)|usqp)","\\b[^&]*"),"g"),r=t.replace(i,"").replace(/^[?&]/,"");return r?"?"+r:""}(t.search)+(t.hash||"")}(t)).origin}var jt="amp-access-client",Ut=function(){function t(t,n,i){this.ampdoc=t,this.Qn=i,this.fvt=q(n.authorization,'"authorization" URL must be specified'),xt(this.fvt,'"authorization"'),this.hvt=!n.noPingback,this.vvt=n.pingback,this.hvt&&(q(this.vvt,'"pingback" URL must be specified'),xt(this.vvt,'"pingback"')),this.pvt=this.dvt(n),this.ee=at(t.win),this.js=ut(t.win)}var n=t.prototype;return n.dvt=function(t){if(!t.authorizationTimeout)return 3e3;var n=t.authorizationTimeout;return q("number"==typeof n,'"authorizationTimeout" must be a number'),N().development||(n=Math.min(n,3e3)),n},n.getConfig=function(){return{"authorizationUrl":this.fvt,"pingbackEnabled":this.hvt,"pingbackUrl":this.vvt,"authorizationTimeout":this.pvt}},n.getAuthorizationUrl=function(){return this.fvt},n.isAuthorizationEnabled=function(){return!0},n.getAuthorizationTimeout=function(){return this.pvt},n.authorize=function(){var t=this;return V().fine(jt,"Start authorization via ",this.fvt),this.Qn.buildUrl(this.fvt,!1).then((function(n){return V().fine(jt,"Authorization URL: ",n),t.js.timeoutPromise(t.pvt,t.ee.fetchJson(n,{credentials:"include"})).then((function(t){return t.json()}))}))},n.isPingbackEnabled=function(){return this.hvt},n.pingback=function(){var t=this;return this.Qn.buildUrl($(this.vvt),!0).then((function(n){return V().fine(jt,"Pingback URL: ",n),t.ee.sendSignal(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:""})}))},n.postAction=function(){},t}(),Lt="__AMP__",Nt=function(){function t(t,n,i){this.t=t,this.Sbt=n,this._b=i,this.h=null,this.Rbt=null,this.Pbt=this.jk.bind(this),this._bt=0,this.kbt={}}var n=t.prototype;return n.connect=function(t){if(this.Rbt)throw new Error("already connected");this.Rbt=t,this.t.addEventListener("message",this.Pbt)},n.disconnect=function(){this.Rbt&&(this.Rbt=null,this.t.removeEventListener("message",this.Pbt))},n.isConnected=function(){return null!=this._b},n.getTarget=function(){var t=this.Obt();if(!t)throw new Error("not connected");return t},n.Obt=function(){return this.Rbt&&!this.h&&("function"==typeof this.Sbt?this.h=this.Sbt():this.h=this.Sbt),this.h},n.getTargetOrigin=function(){if(null==this._b)throw new Error("not connected");return this._b},n.sendCommand=function(t,n){this.dw(void 0,t,n)},n.sendCommandRsvp=function(t,n){var i=String(++this._bt),r=null,e=new Promise((function(t){r=t}));return this.kbt[i]={promise:e,resolver:r},this.dw(i,t,n),e},n.dw=function(t,n,i){var r=this.getTarget(),e="connect"==n?null!=this._b?this._b:"*":this.getTargetOrigin();r.postMessage({"sentinel":Lt,"_rsvp":t,"cmd":n,"payload":i||null},e)},n.jk=function(t){var n=this,i=t,r=i.data;if(r&&r.sentinel==Lt){var e=i.origin,s=r.cmd,u=r.payload||null;if(null==this._b&&"start"==s&&(this._b=e),null==this._b&&i.source&&this.Obt()==i.source&&(this._b=e),e==this._b){var o=r._rsvp,c=!!o&&"rsvp"!=s,a=this.xbt(o,s,u);c&&Promise.resolve(a).then((function(t){n.dw(o,"rsvp",{"result":t})}),(function(t){n.dw(o,"rsvp",{"error":String(t)})}))}}},n.xbt=function(t,n,i){if("rsvp"!=n)return this.Rbt(n,i);var r=t&&this.kbt[t];r&&("error"in i?r.resolver(Promise.reject(new Error(i.error))):r.resolver(i.result),delete this.kbt[t])},t}(),zt="amp-access-iframe",Ct=function(){function t(t,n,i){var r,e,s=this;this.ampdoc=t,this.Qn=i,this.aN=n,this.js=ut(t.win),this.rR=q(n.iframeSrc,'"iframeSrc" URL must be specified'),xt(this.rR,'"iframeSrc"'),this.Ibt=n.iframeVars||null,this.Ibt&&q(u(this.Ibt),'"iframeVars" must be an array'),this.Cwt=q(n.defaultResponse,'"defaultResponse" must be specified'),this._b=At(this.rR).origin,this.jbt=null,this.Tbt=null,this.fb=t.win.document.createElement("iframe"),r=this.fb,void 0===(e=!1)&&(e=r.hasAttribute("hidden")),e?r.removeAttribute("hidden"):r.setAttribute("hidden",""),this.Nbt=new Nt(this.ampdoc.win,(function(){return s.fb.contentWindow}),this._b),this.qS=null}var n=t.prototype;return n.disconnect=function(){this.Nbt.disconnect(),this.ampdoc.getBody().removeChild(this.fb)},n.getConfig=function(){return{"iframeSrc":this.rR,"iframeVars":this.Ibt}},n.isAuthorizationEnabled=function(){return!0},n.authorize=function(){return Promise.race([this.Mwt(),this.Fwt()])},n.isPingbackEnabled=function(){return!0},n.pingback=function(){var t=this;return this.connect().then((function(){return t.Nbt.sendCommandRsvp("pingback",{})}))},n.postAction=function(){this.Gwt(null)},n.connect=function(){if(!this.Tbt){var t=new s;this.Tbt=t.promise,this.jbt=t.resolve,this.qS=this.Ubt(),this.Nbt.connect(this.xbt.bind(this)),this.ampdoc.getBody().appendChild(this.fb),this.fb.src=this.rR}return this.Tbt},n.Ubt=function(){var t=this;return new Promise((function(n){var i=w(JSON.stringify(t.aN));if(t.Ibt){var r=t.Ibt.join("&");n(t.Qn.collectUrlVars(r,!1).then((function(t){return i.iframeVars=t,i})))}else n(i)}))},n.Mwt=function(){var t=this,n=3e3*(N().development?2:1);return this.js.promise(n).then((function(){return t.Kwt()||t.Cwt}))},n.Fwt=function(){var t=this;return this.connect().then((function(){return t.Nbt.sendCommandRsvp("authorize",{})})).then((function(n){return n&&e().then((function(){return t.Gwt(n)})),n}))},n.Kwt=function(){var t=this.ampdoc.win,n=t.sessionStorage||t.localStorage;if(!n)return null;try{var i=n.getItem(zt);if(!i)return null;var r=w(i);return r.t+6048e5<this.ampdoc.win.Date.now()?null:r.d||null}catch(t){V().error(zt,"failed to restore access response: ",t);try{n.removeItem(zt)}catch(t){}return null}},n.Gwt=function(t){var n=this.ampdoc.win,i=n.sessionStorage||n.localStorage;if(i)try{t?i.setItem(zt,JSON.stringify({"t":this.ampdoc.win.Date.now(),"d":t})):i.removeItem(zt)}catch(t){V().error(zt,"failed to store access response: ",t)}},n.xbt=function(t,n){var i=this;"connect"!=t||this.qS.then((function(t){i.Nbt.sendCommandRsvp("start",{"protocol":"amp-access","config":t}).then((function(){i.jbt&&(i.jbt(),i.jbt=null)}))}))},t}(),Mt="amp-access-other",Dt=function(){function t(t,n,i){this.ampdoc=t,this.Qn=i,this.Vwt=n.authorizationFallbackResponse||null,this.Qc=Ot(t.win.location)}var n=t.prototype;return n.getConfig=function(){return{"authorizationResponse":this.Vwt}},n.isAuthorizationEnabled=function(){return!!this.Vwt&&!this.Qc},n.authorize=function(){V().fine(Mt,"Use the authorization fallback for type=other"),$(!this.Qc);var t=$(this.Vwt);return Promise.resolve(t)},n.isPingbackEnabled=function(){return!1},n.pingback=function(){return V().fine(Mt,"Ignore pingback"),e()},n.postAction=function(){},t}(),Ft=["GET","POST"];function Gt(t,n){var i,r=bt({},n);if((i=n.body)&&"function"==typeof i.getFormData){var e=n.body;r.headers["Content-Type"]="multipart/form-data;charset=utf-8",r.body=function(t){for(var n=[],i=t.next();!i.done;i=t.next())n.push(i.value);return n}(e.entries())}return{input:t,init:r}}function Kt(t,n,i){var r=function(t,n){var i,r=t||{},e=r.credentials;return b(void 0===e||"include"==e||"omit"==e),r.method=void 0===(i=r.method)?"GET":(i=i.toUpperCase(),b(Ft.includes(i)),i),r.headers=r.headers||{},r.headers.Accept=n,b(null!==r.body),r}(i,"text/html");r=function(t,n,i){i=i||{};var r=function(t){return t.origin||At(t.location.href).origin}(t);return r==At(n).origin&&(i.headers=i.headers||{},i.headers["AMP-Same-Origin"]="true"),i}(t,n,r),n=function(t,n,i){return b("string"==typeof n),!1!==i.ampCors&&(n=function(t,n){return function(t){q(!("__amp_source_origin"in j(At(t).search)),"Source origin is not allowed in %s",t)}(n),function(t,n,i,r){return function(t,n,i){if(!n)return t;var r=t.split("#",2),e=r[0].split("?",2);return e[0]+(e[1]?"?".concat(e[1],"&").concat(n):"?".concat(n))+(r[1]?"#".concat(r[1]):"")}(t,Pt("__amp_source_origin",i))}(n,0,It(t.location.href))}(t,n)),n}(t,n,r);var s=function(t){return J(t,"ampdoc")}(t),c=s.isSingleDoc()?s.getSingleDoc():null;return r.responseType="document",function(t,n,i,r){if(!n)return e();var s=r.prerenderSafe?e():n.whenFirstVisible(),c=ot(n),a=Ot(i),h=c.hasCapability("xhrInterceptor"),f=r.bypassInterceptorForDev&&!1;return a||!h||f?s:n.getRootNode().documentElement.hasAttribute("allow-xhr-interception")?s.then((function(){return c.isTrustedViewer()})).then((function(n){if(n||wt(t,"untrusted-xhr-interception")){var e={"originalRequest":Gt(i,r)};return c.sendMessageAwaitResponse("xhr",e).then((function(t){return function(t,n){if(function(t,n){var i,r,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assertion failed";if(n)return n;t&&-1==e.indexOf(t)&&(e+=t);for(var s=3,u=e.split("%s"),c=u.shift(),a=[c];u.length;){var h=arguments[s++],f=u.shift();c+=m(h)+f,a.push(h,f.trim())}var l=new Error(c);throw l.messageArray=o(a,(function(t){return""!==t})),null===(i=(r=self).__AMP_REPORT_ERROR)||void 0===i||i.call(r,l),l}("​​​",l(t),"Object expected: %s",t,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0),"document"!=n)return new Response(t.body,t.init);var i=v(),r={status:200,statusText:"OK",getResponseHeader:function(t){return i[String(t).toLowerCase()]||null}};if(t.init){var e=t.init;u(e.headers)&&e.headers.forEach((function(t){var n=t[0],r=t[1];i[String(n).toLowerCase()]=String(r)})),e.status&&(r.status=parseInt(e.status,10)),e.statusText&&(r.statusText=String(e.statusText))}return new Response(t.body?String(t.body):"",r)}(t,r.responseType)}))}})):s}(t,c,n,r).then((function(t){return t?t.text().then((function(t){return(new DOMParser).parseFromString(t,"text/html")})):function(t,n){return new Promise((function(i,r){var e=new XMLHttpRequest;for(var s in e.open(n.method||"GET",t,!0),e.withCredentials="include"==n.credentials,e.responseType="document",n.headers)e.setRequestHeader(s,n.headers[s]);e.onreadystatechange=function(){if(!(e.readyState<2)){if(e.status<100||e.status>599)return e.onreadystatechange=null,void r(G().createExpectedError("Unknown HTTP status ".concat(e.status)));if(4==e.readyState){var t={status:e.status,statusText:e.statusText,headers:(u=e.getAllResponseHeaders(),o={},u.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();o[i]=r}})),o)},n=(s=new Response("",t),new Promise((function(t){if(s.ok)return t(s);var n=s.status,i=G().createError("HTTP error ".concat(n));throw i.retriable=function(t){return 415==t||t>=500&&t<600}(n),i.response=s,i}))).then((function(t){return{response:t,xhr:e}}));i(n)}}var s,u,o},e.onerror=function(){r(G().createExpectedError("Request failure"))},e.onabort=function(){r(G().createExpectedError("Request aborted"))},"POST"==n.method?e.send(n.body):e.send()}))}(n,r).then((function(t){return t.xhr.responseXML}))}))}var Vt="amp-access-server",$t=function(){function t(t,n,i){this.ampdoc=t,this.Qn=i,this.$wt=new Ut(t,n,i),this.ee=at(t.win),this.js=ut(t.win),this.Iu=ct(t.win),this.qwt=t.getMetaByName("i-amphtml-access-state");var r=wt(t.win,"amp-access-server");this.Qc=Ot(t.win.location)||r;var e=r?t.getParam("serverAccessService"):null;this.nR=e||Tt(t.win.location.href)}var n=t.prototype;return n.getConfig=function(){return{"client":this.$wt.getConfig(),"proxy":this.Qc,"serverState":this.qwt}},n.isAuthorizationEnabled=function(){return!0},n.authorize=function(){var t=this;return V().fine(Vt,"Start authorization with ",this.Qc?"proxy":"non-proxy",this.qwt,this.$wt.getAuthorizationUrl()),this.Qc&&this.qwt?(V().fine(Vt,"Proceed via server protocol"),this.Qn.collectUrlVars(this.$wt.getAuthorizationUrl(),!1).then((function(n){var i={};for(var r in n)null!=n[r]&&(i[r]=String(n[r]));var e={"url":Tt(t.ampdoc.win.location.href),"state":t.qwt,"vars":i};return V().fine(Vt,"Authorization request: ",t.nR,e),t.js.timeoutPromise(t.$wt.getAuthorizationTimeout(),Kt(t.ampdoc.win,t.nR,{method:"POST",body:"request="+encodeURIComponent(JSON.stringify(e)),headers:{"Content-Type":"application/x-www-form-urlencoded"}}))})).then((function(n){V().fine(Vt,"Authorization response: ",n);var i=w($(n.querySelector('script[id="amp-access-data"]')).textContent);return V().fine(Vt,"- access data: ",i),t.Jwt(n).then((function(){return i}))}))):(V().fine(Vt,"Proceed via client protocol"),this.$wt.authorize())},n.isPingbackEnabled=function(){return this.$wt.isPingbackEnabled()},n.pingback=function(){return this.$wt.pingback()},n.postAction=function(){},n.Jwt=function(t){var n=this,i=t.querySelectorAll("[i-amphtml-access-id]");return V().fine(Vt,"- access sections: ",i),this.Iu.mutatePromise((function(){for(var t=0;t<i.length;t++){var r=i[t],e=r.getAttribute("i-amphtml-access-id"),s=n.ampdoc.getRootNode().querySelector('[i-amphtml-access-id="'.concat(_(e),'"]'));s?s.parentElement.replaceChild(n.ampdoc.win.document.importNode(r,!0),s):V().warn(Vt,"Section not found: ",e)}}))},t}();function qt(t){if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8").decode(t);var n=function(t){for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(new Uint8Array(t.buffer||t));return decodeURIComponent(escape(n))}function Jt(t){for(var n=new Uint8Array(t.length),i=0;i<t.length;i++){var r=t.charCodeAt(i);b(r<=255),n[i]=r}return n}var Ht={"-":"+","_":"/",".":"="};function Qt(t){return Jt(atob(t.replace(/[-_.]/g,(function(t){return Ht[t]}))))}var Zt=function(){function t(t){this.win=t,this.qgt=t.crypto&&(t.crypto.subtle||t.crypto.webkitSubtle)||null}var n=t.prototype;return n.decode=function(t){return this.twt(t).payload},n.isVerificationSupported=function(){return!!this.qgt},n.decodeAndVerify=function(t,n){var i=this;if(!this.qgt)throw new Error("Crypto is not supported on this platform");return new Promise((function(n){return n(i.twt(t))})).then((function(t){var r=t.header.alg;if(!r||"RS256"!=r)throw new Error("Only alg=RS256 is supported");return i.nwt(n).then((function(n){var r=Qt(t.sig);return i.qgt.verify({name:"RSASSA-PKCS1-v1_5"},n,r,Jt(t.verifiable))})).then((function(n){if(n)return t.payload;throw new Error("Signature verification failed")}))}))},n.twt=function(t){function n(){throw new Error('Invalid token: "'.concat(t,'"'))}var i=t.split(".");3!=i.length&&n();var r=Qt(i[0]),e=Qt(i[1]);return{header:y(qt(r),n),payload:y(qt(e),n),verifiable:"".concat(i[0],".").concat(i[1]),sig:i[2]}},n.nwt=function(t){var n=this;return t.then((function(t){return n.qgt.importKey("spki",function(t){var n=t.trim().replace(/^-+BEGIN[^-]*-+/,"").replace(/-+END[^-]*-+$/,"").replace(/[\r\n]/g,"").trim();return Jt(atob(n))}(t),{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"])}))},t}(),Wt="amp-access-server-jwt",Xt="ampproject.org",Bt=function(){function t(t,n,i){this.ampdoc=t,this.Qn=i,this.$wt=new Ut(t,n,i),this.ee=at(t.win),this.js=ut(t.win),this.Iu=ct(t.win),this.qwt=t.getMetaByName("i-amphtml-access-state");var r=wt(t.win,"amp-access-server-jwt");this.Qc=Ot(t.win.location)||r;var e=r?t.getParam("serverAccessService"):null;this.nR=e||Tt(t.win.location.href),this.pk=n.publicKey||null,this.Hwt=n.publicKeyUrl||null,q(this.pk||this.Hwt,'"publicKey" or "publicKeyUrl" must be specified'),this.Hwt&&xt(this.Hwt,'"publicKeyUrl"'),this.pk&&this.Hwt&&G().warn(Wt,'Both "publicKey" and "publicKeyUrl" specified. The "publicKeyUrl" will be ignored.'),this.swt=new Zt(t.win)}var n=t.prototype;return n.getConfig=function(){return{"client":this.$wt.getConfig(),"proxy":this.Qc,"serverState":this.qwt,"publicKey":this.pk,"publicKeyUrl":this.Hwt}},n.isAuthorizationEnabled=function(){return!0},n.authorize=function(){return V().fine(Wt,"Start authorization with ",this.Qc?"proxy":"non-proxy",this.qwt,this.$wt.getAuthorizationUrl()),this.Qc&&this.qwt?this.Qwt():this.Zwt()},n.isPingbackEnabled=function(){return this.$wt.isPingbackEnabled()},n.pingback=function(){return this.$wt.pingback()},n.postAction=function(){},n.Wwt=function(){var t=this,n=this.Qn.buildUrl(this.$wt.getAuthorizationUrl(),!1).then((function(n){return V().fine(Wt,"Authorization URL: ",n),t.js.timeoutPromise(3e3,t.ee.fetchText(n,{credentials:"include"}))})).then((function(t){return t.text()})).then((function(n){var i=t.swt.decode(n);return q(i.amp_authdata,'"amp_authdata" must be present in JWT'),{encoded:n,jwt:i}}));return this.Xwt()&&(this.swt.isVerificationSupported()?n=n.then((function(n){return t.swt.decodeAndVerify(n.encoded,t.Bwt()).then((function(){return n}))})):G().warn(Wt,"Cannot verify signature on this browser since it doesn't support WebCrypto APIs"),n=n.then((function(n){return t.Ywt(n.jwt),n}))),n.catch((function(t){throw G().createError("JWT fetch or validation failed: ",t)}))},n.Bwt=function(){return this.pk?Promise.resolve(this.pk):this.ee.fetchText(this.Hwt).then((function(t){return t.text()}))},n.Xwt=function(){return N().development},n.Ywt=function(t){var n=Date.now(),i=t.exp;q(i,'"exp" field must be specified'),q(1e3*parseFloat(i)>n,"token has expired: %s",i);var r=t.aud;q(r,'"aud" field must be specified');var e=!1;if(u(r)){for(var s=0;s<r.length;s++)if(r[s]==Xt){e=!0;break}}else e=r==Xt;q(e,'"aud" must be "%s": %s',Xt,r)},n.Zwt=function(){return V().fine(Wt,"Proceed via client protocol via ",this.$wt.getAuthorizationUrl()),this.Wwt().then((function(t){return t.jwt.amp_authdata}))},n.Qwt=function(){var t=this;return V().fine(Wt,"Proceed via server protocol"),this.Wwt().then((function(n){var i=n.encoded,r=n.jwt.amp_authdata,e=function(t){var n,i=[];for(var r in t){var e=t[r];if(null!=e){e=u(n=e)?n:[n];for(var s=0;s<e.length;s++)i.push(Pt(r,e[s]))}}return i.join("&")}({"url":Tt(t.ampdoc.win.location.href),"state":t.qwt,"jwt":i});return V().fine(Wt,"Authorization request: ",t.nR,e),V().fine(Wt,"- access data: ",r),t.js.timeoutPromise(3e3,Kt(t.ampdoc.win,t.nR,{method:"POST",body:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})).then((function(n){return V().fine(Wt,"Authorization response: ",n),t.Jwt(n)})).then((function(){return r}))}))},n.Jwt=function(t){var n=this,i=t.querySelectorAll("[i-amphtml-access-id]");return V().fine(Wt,"- access sections: ",i),this.Iu.mutatePromise((function(){for(var t=0;t<i.length;t++){var r=i[t],e=r.getAttribute("i-amphtml-access-id"),s=n.ampdoc.getRootNode().querySelector('[i-amphtml-access-id="'.concat(_(e),'"]'));s?s.parentElement.replaceChild(n.ampdoc.win.document.importNode(r,!0),s):V().warn(Wt,"Section not found: ",e)}}))},t}(),Yt="amp-access-vendor",tn=function(){function t(t,n){this.ampdoc=t,this._yt=q(n.vendor,'"vendor" name must be specified'),this.Tyt=n[this._yt]||{},this.hvt=!n.noPingback;var i=new s;this.Iyt=i.promise,this.Uyt=i.resolve}var n=t.prototype;return n.getVendorName=function(){return this._yt},n.getConfig=function(){return this.Tyt},n.registerVendor=function(t){q(this.Uyt,"Vendor has already been registered"),this.Uyt(t),this.Uyt=null},n.isAuthorizationEnabled=function(){return!0},n.authorize=function(){return V().fine(Yt,"Start authorization via ",this._yt),this.Iyt.then((function(t){return t.authorize()}))},n.isPingbackEnabled=function(){return this.hvt},n.pingback=function(){return V().fine(Yt,"Pingback via ",this._yt),this.Iyt.then((function(t){return t.pingback()}))},n.postAction=function(){},t}();function nn(t,n,i,r){var e,s,u;try{e=t.open(n,i,r)}catch(t){V().error("DOM","Failed to open url on target: ",i,t)}return!e&&"_top"!=i&&("number"!=typeof u&&(u=0),u+"noopener".length>(s=r||"").length||-1===s.indexOf("noopener",u))&&(e=t.open(n,"_top")),e}var rn="amp-access-login",en=new RegExp("RETURN_URL");function sn(t,n){var i=ot(t);return parseInt(t.getParam("dialog"),10)?new on(i,n):new cn(t.win,i,n)}function un(t,n){return sn(t,n).open()}var on=function(){function t(t,n){this.viewer=t,this.urlOrPromise=n}var n=t.prototype;return n.getLoginUrl=function(){return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then((function(t){return an(t,"RETURN_URL")}))},n.open=function(){var t=this;return this.getLoginUrl().then((function(n){return V().fine(rn,"Open viewer dialog: ",n),t.viewer.sendMessageAwaitResponse("openDialog",{"url":n})}))},t}(),cn=function(){function t(t,n,i){this.win=t,this.viewer=n,this.urlOrPromise=i,this.Dn=null,this.Af=null,this.ebt=null,this.ubt=null,this.obt=null,this.cbt=null}var n=t.prototype;return n.open=function(){var t=this;return q(!this.Dn,"Dialog already opened"),new Promise((function(n,i){t.Dn=n,t.Af=i,t.hbt()})).then((function(n){return t.Vn(),n}),(function(n){throw t.Vn(),n}))},n.Vn=function(){if(this.Dn=null,this.Af=null,this.ebt){try{this.ebt.close()}catch(t){}this.ebt=null}this.obt&&(this.win.clearInterval(this.obt),this.obt=null),this.cbt&&(this.cbt(),this.cbt=null)},n.getLoginUrl=function(){var t=this;return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then((function(n){return an(n,t.abt())}))},n.hbt=function(){var t=this,n=this.win.screen,i=Math.floor(Math.min(700,.9*n.width)),r=Math.floor(Math.min(450,.9*n.height)),s=Math.floor((n.width-i)/2),u=Math.floor((n.height-r)/2),o="height=".concat(r,",width=").concat(i,",left=").concat(s,",top=").concat(u),c="".concat(o,",resizable=yes,scrollbars=yes"),a=this.abt();if(this.ubt=null,"string"==typeof this.urlOrPromise){var h=an(this.urlOrPromise,a);V().fine(rn,"Open dialog: ",h,a,i,r,s,u),this.ebt=nn(this.win,h,"_blank",c),this.ebt&&(this.ubt=e())}else V().fine(rn,"Open dialog: ","about:blank",a,i,r,s,u),this.ebt=nn(this.win,"","_blank",c),this.ebt&&(this.ubt=this.urlOrPromise.then((function(n){var i=an(n,a);V().fine(rn,"Set dialog url: ",i),t.ebt.location.replace(i)}),(function(t){throw new Error("failed to resolve url: "+t)})));this.ubt?this.ubt.then((function(){t.fbt(a)}),(function(n){t.lbt(null,n)})):this.lbt(null,new Error("failed to open dialog"))},n.fbt=function(t){var n=this,i=At(t).origin;this.obt=this.win.setInterval((function(){n.ebt.closed&&(n.win.clearInterval(n.obt),n.obt=null,n.win.setTimeout((function(){n.lbt("")}),3e3))}),500),this.cbt=ft(this.win,"message",(function(t){V().fine(rn,"MESSAGE:",t),t.origin==i&&lt(t)&&"amp"==lt(t).sentinel&&(V().fine(rn,"Received message from dialog: ",lt(t)),"result"==lt(t).type&&(n.ebt&&n.ebt.postMessage({"sentinel":"amp","type":"result-ack"},i),n.lbt(lt(t).result)))}),void 0)},n.lbt=function(t,n){this.Dn&&(V().fine(rn,"Login done: ",t,n),n?this.Af(n):this.Dn(t),this.Vn())},n.abt=function(){var t=this.viewer.getResolvedViewerUrl();return"".concat(T.cdn,"/v0/amp-login-done-0.1.html")+"?url="+encodeURIComponent(t)},t}();function an(t,n){return en.test(t)?t.replace(en,encodeURIComponent(n)):t+(-1==t.indexOf("?")?"?":"&")+"return="+encodeURIComponent(n)}var hn="amp-access",fn="client",ln="server",vn="vendor",pn=function(){function t(t,n,i,r,e,u){this.ampdoc=t,this.Lyt=i,this.Nyt=r,this.Cyt=e,this.Dyt=u,this.Gyt=wt(t.win,"amp-access-server"),this.Kyt=wt(t.win,"amp-access-jwt"),this.wM=this.Vyt(n),this.$yt=this.qyt(n),this.Jyt=n.authorizationFallbackResponse,this.Hyt=n.namespace||null,this.Qyt=this.Zyt(n),this.cj=Q(u,"url-replace"),this.Wyt=un.bind(null,t),this.h4=null;var o=new s;this.Xyt=o.promise,this.Byt=o.resolve,this.Yyt={},this.tEt=null,this.nEt=0}var n=t.prototype;return n.getNamespace=function(){return this.Hyt},n.getType=function(){return this.wM},n.getAdapter=function(){return this.Qyt},n.getAuthResponse=function(){return this.h4},n.Zyt=function(t){var n={buildUrl:this.buildUrl.bind(this),collectUrlVars:this.collectUrlVars.bind(this)},i=this.Kyt&&!0===t.jwt;switch(this.wM){case fn:return i?new Bt(this.ampdoc,t,n):new Ut(this.ampdoc,t,n);case"iframe":return new Ct(this.ampdoc,t,n);case ln:return i?new Bt(this.ampdoc,t,n):new $t(this.ampdoc,t,n);case vn:return new tn(this.ampdoc,t);case"other":return new Dt(this.ampdoc,t,n)}throw V().createError("Unsupported access type: ",this.wM)},n.getAdapterConfig=function(){return this.Qyt.getConfig()},n.whenFirstAuthorized=function(){return this.Xyt},n.Vyt=function(t){var n,i=t.type;return q(!i||"client"===(n=i)||"iframe"===n||"server"===n||"vendor"===n||"other"===n,"Unknown access type: ".concat(i)),i||(i=t.vendor?vn:fn),i!=ln||this.Gyt||(G().warn(hn,'Experiment "amp-access-server" is not enabled.'),i=fn),i==fn&&this.Gyt&&(G().info(hn,"Forcing access type: SERVER"),i=ln),i},n.qyt=function(t){var n=t.login,i={};if(n)if("string"==typeof n)i[""]=n;else if(l(n))for(var r in n)i[r]=n[r];else q(!1,'"login" must be either a single URL or a map of URLs');for(var e in i)xt(i[e],this.Dyt);return i},n.iEt=function(){var t=this.ampdoc.getRootNode();return t.documentElement||t.body||t},n.EV=function(t){ht(this.iEt(),t,void 0,!1)},n.start=function(){V().fine(hn,"config:",this.wM,this.$yt,this.Qyt.getConfig()),this.rEt()},n.buildUrl=function(t,n){var i=this;return this.c4(n).then((function(n){return i.cj.expandUrlAsync(t,n)}))},n.collectUrlVars=function(t,n){var i=this;return this.c4(n).then((function(n){return i.cj.collectVars(t,n)}))},n.c4=function(t){var n=this;return this.Lyt().then((function(i){var r={"READER_ID":i,"ACCESS_READER_ID":i};return t&&(r.AUTHDATA=function(t){if(n.h4)return d(n.h4,t)}),r}))},n.runAuthorization=function(t){var n=this;return this.Qyt.isAuthorizationEnabled()?this.Qyt.authorize().catch((function(i){if(n.EV("access-authorization-failed"),n.Jyt&&!t)return G().error(hn,"Authorization failed: ",i),n.Jyt;throw i})).then((function(t){return V().fine(hn,"Authorization response: ",t),n.eEt(t),n.rEt(),t})).catch((function(t){throw G().error(hn,"Authorization failed: ",t),n.Byt(),t})):(V().fine(hn,"Ignore authorization for type=",this.wM),this.Byt(),e())},n.eEt=function(t){this.h4=t,this.Byt()},n.reportViewToServer=function(){var t=this;return this.Qyt.pingback().then((function(){V().fine(hn,"Pingback complete"),t.EV("access-pingback-sent")})).catch((function(n){throw t.EV("access-pingback-failed"),G().createError("Pingback failed: ",n)}))},n.getLoginUrl=function(t){return function(t,n){return sn(t,n).getLoginUrl()}(this.ampdoc,t)},n.loginWithType=function(t){q(this.$yt[t],"Login URL is not configured: %s",t);var n=q(this.Yyt[t],"Login URL is not ready: %s",t);return this.sEt(n,t)},n.loginWithUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.sEt(t,n)},n.sEt=function(t,n){var i=this,r=Date.now();if(this.tEt&&r-this.nEt<1e3)return this.tEt;V().fine(hn,"Start login: ",t,n),this.uEt(n,"started");var e=this.Wyt(t).then((function(t){V().fine(hn,"Login dialog completed: ",n,t),i.tEt=null;var r=j(t).success,e="true"==r||"yes"==r||"1"==r;if(e?i.uEt(n,"success"):i.uEt(n,"rejected"),e||!r){i.Qyt.postAction();var s=i.runAuthorization(!0);return i.Cyt(s),s.then((function(){i.Nyt(0)}))}})).catch((function(t){throw V().fine(hn,"Login dialog failed: ",n,t),i.uEt(n,"failed"),i.tEt==e&&(i.tEt=null),t}));return this.tEt=e,this.nEt=r,this.tEt},n.uEt=function(t,n){this.EV("access-login-".concat(n)),t&&this.EV("access-login-".concat(t,"-").concat(n))},n.rEt=function(){var t=this;if(0==Object.keys(this.$yt).length)return null;var n=[],i=function(i){n.push(t.buildUrl(t.$yt[i],!0).then((function(n){return t.Yyt[i]=n,{type:i,url:n}})))};for(var r in this.$yt)i(r);return Promise.all(n)},t}();function dn(t,n,i){if(n[i])return n[i];var r=t.querySelector("style[".concat(i,"], link[").concat(i,"]"));return r?(n[i]=r,r):null}function mn(t,n){for(var i=t.styleSheets,r=0;r<i.length;r++)if(i[r].ownerNode==n)return!0;return!1}var bn=self.__AMP_ERRORS||[];self.__AMP_ERRORS=bn;var gn="amp-access",wn="__AMP_ACCESS__TEMPLATE",yn=function(){function t(t){var n=this;this.ampdoc=t,function(t,n,i,r,e){var s=t.getHeadNode(),u=function(t,n,i,r){var e=t.__AMP_CSS_SM;e||(e=t.__AMP_CSS_SM=v());var s="amp-extension=".concat(r);if(s){var u=dn(t,e,s);if(u)return"STYLE"==u.tagName&&u.textContent!==n&&(u.textContent=n),u}var o=(t.ownerDocument||t).createElement("style");o.textContent=n;return o.setAttribute("amp-extension",r),function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i){var r=i.nextSibling;t.insertBefore(n,r)}else R(t,n)}(t,o,dn(t,e,"amp-runtime")),s&&(e[s]=o),o}(s,function(t,n){var i=t.__AMP_CSS_TR;return i?i(n):n}(s,"\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/"),0,"amp-access");if(i){var o=t.getRootNode();if(mn(o,u))return u;var c=setInterval((function(){mn(o,u)&&clearInterval(c)}),4)}}(t,0,(function(){}));var i,r,e,s=t.getElementById("amp-access");if(this.oEt=!!s,this.oEt){this.Dyt=s,this.cEt=It(t.win.location),this.js=ut(t.win),this.Iu=ct(t.win),this.wwt=Z(t,"cid"),this.co=ot(t),this.Tu=H(t,"viewport"),this.Dy=function(t){return H(t,"templates")}(t),this.Aa=function(t){return H(t,"mutator")}(t),this.Z5=(i=t.win,e="performance",rt(r=X(r=i),e)?tt(r,e):null),this.u4=null,this.aEt=new dt,this.BE=this.hEt();var u=this.BE.map((function(t){return t.whenFirstAuthorized()}));this.fEt=!1,this.lEt=Promise.all(u),this.hwt=null,this.vEt=new g,this.lEt.then((function(){n.fEt=!0,n.EV("access-authorization-received"),n.Z5&&(n.Z5.tick("aaa"),n.Z5.tickSinceVisible("aaav"),n.Z5.flush())})),t.getRootNode().addEventListener("amp:dom-update",this.pEt.bind(this))}}var n=t.prototype;return n.getAccessReaderId=function(){return this.oEt?this.Lyt():null},n.Lyt=function(){if(!this.u4){var t=e();this.u4=this.wwt.then((function(n){return n.get({scope:"amp-access",createCookieIfNotPresent:!0},t)}))}return this.u4},n.areFirstAuthorizationsCompleted=function(){return this.fEt},n.onApplyAuthorizations=function(t){this.vEt.add(t)},n.hEt=function(){var t,n,i=this;q("SCRIPT"==(t=this.Dyt).tagName&&"APPLICATION/JSON"==(null===(n=t.getAttribute("type"))||void 0===n?void 0:n.toUpperCase()),"".concat(gn," config should ")+'be inside a <script> tag with type="application/json"');var r=y(this.Dyt.textContent,(function(t){throw G().createError('Failed to parse "amp-access" JSON: '+t)})),e={};if(u(r))for(var s=r,o=0;o<s.length;o++){var c=s[o].namespace;q(!!c,"Namespace required"),q(!e[c],"Namespace already used: "+c),e[c]=s[o]}else e[r.namespace||""]=r;var a=this.Lyt.bind(this),h=this.Nyt.bind(this),f=this.Cyt.bind(this);return Object.keys(e).map((function(t){return new pn(i.ampdoc,e[t],a,h,f,i.Dyt)}))},n.pEt=function(t){var n=this;if(this.fEt){var i=t.target;return this.lEt.then((function(){var t=n.combinedResponses();n.dEt(i,t)}))}},n.getVendorSource=function(t){for(var n=0;n<this.BE.length;n++){var i=this.BE[n];if(i.getType()==vn&&i.getAdapter().getVendorName()==t)return i}throw q(!1,'Access vendor "%s" can only be used for "type=vendor", but none found',t),new Error},n.isEnabled=function(){return this.oEt},n.iEt=function(){var t=this.ampdoc.getRootNode();return t.documentElement||t.body||t},n.EV=function(t){ht(this.iEt(),t,void 0,!1)},n.Ha=function(){return this.oEt?(this.mEt(),this):(G().info(gn,'Access is disabled - no "id=amp-access" element'),this)},n.mEt=function(){var t;(t=this.Dyt,Q(t,"action")).installActionHandler(this.Dyt,this.DG.bind(this));for(var n=0;n<this.BE.length;n++)this.BE[n].start();this.bEt(),this.Nyt(2e3),this.Ga()},n.Ga=function(){var t=this;this.co.onBroadcast((function(n){"amp-access-reauthorize"==n.type&&n.origin==t.cEt&&t.bEt()}))},n.Cyt=function(t){var n=this;this.gEt(),t.then((function(){n.fEt&&n.lEt.then((function(){n.ampdoc.whenReady().then((function(){var t=n.ampdoc.getRootNode(),i=n.combinedResponses();return n.dEt(t,i)}))}))}))},n.gEt=function(){this.co.broadcast({"type":"amp-access-reauthorize","origin":this.cEt})},n.bEt=function(t){var n=this;this.wEt("amp-access-loading",!0);var i=this.ampdoc.whenFirstVisible().then((function(){return Promise.all(n.BE.map((function(t){return n.yEt(t)})))})).then((function(){return n.wEt("amp-access-loading",!1),n.ampdoc.whenReady().then((function(){var t=n.ampdoc.getRootNode(),i=n.combinedResponses();return n.dEt(t,i)}))}));return this.lEt=i,i},n.yEt=function(t){var n=this;return t.runAuthorization().catch((function(){n.wEt("amp-access-error",!0)}))},n.getAuthdataField=function(t){var n=this;return this.oEt?this.lEt.then((function(){var i=d(n.combinedResponses(),t);return void 0!==i?i:null})):null},n.dEt=function(t,n){for(var i=this,r=t.querySelectorAll("[amp-access]"),e=[],s=0;s<r.length;s++)e.push(this.EEt(r[s],n));return Promise.all(e).then((function(){i.vEt.fire()}))},n.EEt=function(t,n){var i=this,r=t.getAttribute("amp-access"),e=!1;try{e=this.aEt.evaluate(r,n)}catch(t){G().error(gn,t)}if(e){var s=this.SEt(t,n);if(s)return s.then((function(){return i._Et(t,e)}))}return this._Et(t,e)},n._Et=function(t,n){var i=!t.hasAttribute("amp-access-hide");return n==i?e():this.Aa.mutateElement(t,(function(){n?t.removeAttribute("amp-access-hide"):t.setAttribute("amp-access-hide","")}))},n.SEt=function(t,n){var i=this,r=[],e=t.querySelectorAll("[amp-access-template]");if(e.length>0)for(var s=function(s){var u=i.yV(t,e[s],n).catch((function(n){V().error(gn,"Template failed: ",n,e[s],t)}));r.push(u)},u=0;u<e.length;u++)s(u);return r.length>0?Promise.all(r):null},n.yV=function(t,n,i){var r=this,e=n,s=null;return"TEMPLATE"!=e.tagName&&(e=(s=e)[wn]),e?this.Dy.renderTemplate(e,i).then((function(t){return r.Iu.mutatePromise((function(){t.setAttribute("amp-access-template",""),t[wn]=e,e.parentElement?e.parentElement.replaceChild(t,e):s&&s.parentElement&&s.parentElement.replaceChild(t,s)}))})):Promise.reject(new Error("template not found"))},n.Nyt=function(t){var n=this;this.BE.some((function(t){return t.getAdapter().isPingbackEnabled()}))&&(this.hwt=null,this.ampdoc.whenReady().then((function(){n.ampdoc.isVisible()&&n.awt(t),n.ampdoc.onVisibilityChanged((function(){n.ampdoc.isVisible()&&n.awt(t)}))})))},n.awt=function(t){var n=this;return this.hwt||(V().fine(gn,"start view monitoring"),this.hwt=this.fwt(t).then((function(){return n.lEt})).then((function(){return n.EV("access-viewed"),n.REt()})).catch((function(t){throw V().fine(gn,"view cancelled:",t),n.hwt=null,t})),this.hwt.then(this.gEt.bind(this))),this.hwt},n.fwt=function(t){var n=this;if(0==t)return e();var i=[];return new Promise((function(r,e){i.push(n.ampdoc.onVisibilityChanged((function(){n.ampdoc.isVisible()||e(new Error("CANCELLED"))})));var s,u,o,c=n.js.delay(r,t);i.push((function(){return n.js.cancel(c)})),i.push(n.Tu.onScroll(r)),i.push((s=n.ampdoc.getRootNode(),u=r,o=ft(s,"click",(function(t){try{u(t)}finally{u=null,o()}}),void 0)))})).then((function(){i.forEach((function(t){return t()}))}),(function(t){throw i.forEach((function(t){return t()})),t}))},n.REt=function(){for(var t=[],n=0;n<this.BE.length;n++)this.BE[n].getAdapter().isPingbackEnabled()&&t.push(this.BE[n].reportViewToServer());return Promise.all(t)},n.wEt=function(t,n){var i=this;this.Iu.mutate((function(){i.iEt().classList.toggle(t,n)}))},n.DG=function(t){return t.satisfiesTrust(2)?("login"==t.method?(t.event&&t.event.preventDefault(),this.AEt("")):t.method.startsWith("login-")?(t.event&&t.event.preventDefault(),this.AEt(t.method.substring("login-".length))):"refresh"==t.method&&(t.event&&t.event.preventDefault(),this.bEt()),null):null},n.getSource=function(t){return q(t>=0&&t<this.BE.length,"Invalid index: %d",t),this.BE[t]},n.AEt=function(t){var n=t.indexOf("-"),i=1==this.BE.length,r=n>-1?t.substring(0,n):t,e=this.BE.filter((function(t){return t.getNamespace()==r}));if(e.length){var s=n>-1?t.substring(n+1):"";return e[0].loginWithType(s)}return q(i,"Login must match namespace: %s",r),this.BE[0].loginWithType(t)},n.combinedResponses=function(){if(1==this.BE.length&&!this.BE[0].getNamespace())return this.BE[0].getAuthResponse()||{};var t={};return this.BE.forEach((function(n){return t[n.getNamespace()]=n.getAuthResponse()})),t},t}();t.registerServiceForDoc("access",(function(t){return new yn(t).Ha()}))}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-access-0.1.js.map