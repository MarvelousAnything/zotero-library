;
(self.AMP=self.AMP||[]).push({m:1,v:"2202230359001",n:"amp-lightbox",ev:"0.1",l:!0,f:function(t,i){(()=>{function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var s=0,n=new Array(i);s<i;s++)n[s]=t[s];return n}function s(t,s){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,s){if(t){if("string"==typeof t)return i(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,s):void 0}}(t))||s&&t&&"number"==typeof t.length){n&&(t=n);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,{isArray:e}=Array,{hasOwnProperty:h,toString:o}=Object.prototype;function r(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function l(t,i,s,n,e,h,o,r,l,a,c){return t}function a(t){return(t.ownerDocument||t).defaultView}function c(t){try{t.focus()}catch(t){}}function u(t){const i=Object.getOwnPropertyDescriptor(t,"message");if(null!=i&&i.writable)return t;const{message:s,stack:n}=t,e=new Error(s);for(const i in t)e[i]=t[i];return e.stack=n,e}function f(t){let i=null,n="";for(var e,h=s(arguments,!0);!(e=h()).done;){const t=e.value;t instanceof Error&&!i?i=u(t):(n&&(n+=" "),n+=t)}return i?n&&(i.message=n+": "+i.message):i=new Error(n),i}function d(t){var i,s;null===(i=(s=self).__AMP_REPORT_ERROR)||void 0===i||i.call(s,t)}function m(t,...i){try{return t.apply(null,i)}catch(t){!function(t){const i=f.apply(null,arguments);setTimeout((()=>{throw d(i),i}))}(t)}}var p,_,A="i-amphtml-element",P=t=>t.unmount();function v(t,i,s,n){if(i&&t.classList.contains(A)){const i=t;if(m(n,i),!s){const t=i.getPlaceholder();return void(t&&v(t,!0,!1,n))}}const e=t.getElementsByClassName(A);let h=null;for(let t=0;t<e.length;t++){const i=e[t];if(s)m(n,i);else{h=h||[];let t=!1;for(let s=0;s<h.length;s++)if(h[s].contains(i)){t=!0;break}t||(h.push(i),m(n,i))}}}function g(t){return function(t,i){l(1===i.length),t.innerHTML=i[0];const s=t.firstElementChild;return l(s),l(!s.nextElementSibling),t.removeChild(s),s}(p,t)}var b=["Webkit","webkit","Moz","moz","ms","O","o"],y={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function E(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return b.some((t=>i.startsWith(t+"-")))?`-${i}`:i}function M(t,i,s){if(i.startsWith("--"))return i;_||(_=r());let n=_[i];if(!n||s){if(n=i,void 0===t[i]){const s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),e=function(t,i){for(let s=0;s<b.length;s++){const n=b[s]+i;if(void 0!==t[n])return n}return""}(t,s);void 0!==t[e]&&(n=e)}s||(_[i]=n)}return n}function T(t,i){const{style:s}=t;for(const t in i)s.setProperty(E(M(s,t)),String(i[t]),"important")}function I(t,i,s,n,e){const h=M(t.style,i,e);if(!h)return;const o=n?s+n:s;t.style.setProperty(E(h),o)}function w(t,i){for(const s in i)I(t,s,i[s])}function R(t){return`${t}px`}function V(t){return"display"in t&&function(t,...i){const s=f.apply(null,i);s.name=t||s.name,d(s)}("STYLE","`display` style detected. You must use toggle instead."),t}var x=self.AMP_CONFIG||{},S=("string"==typeof x.thirdPartyFrameRegex?new RegExp(x.thirdPartyFrameRegex):x.thirdPartyFrameRegex,("string"==typeof x.cdnProxyRegex?new RegExp(x.cdnProxyRegex):x.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function C(t){if(!self.document||!self.document.head)return null;if(self.location&&S.test(self.location.origin))return null;const i=self.document.head.querySelector(`meta[name="${t}"]`);return i&&i.getAttribute("content")||null}x.thirdPartyUrl,x.thirdPartyFrameHost,x.cdnUrl||C("runtime-host"),x.errorReportingUrl,x.betaErrorReportingUrl,x.localDev,x.geoApiUrl||C("amp-geo-api");var k=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function O(t,i=""){try{return decodeURIComponent(t)}catch(t){return i}}function D(t){const{location:i}=t||self;return function(t){const i=r();if(!t)return i;let s;for(;s=k.exec(t);){const t=O(s[1],s[1]),n=s[2]?O(s[2].replace(/\+/g," "),s[2]):"";i[t]=n}return i}(i.originalHash||i.hash)}var z="";function j(t){const i=t||self;return i.__AMP_MODE?i.__AMP_MODE:i.__AMP_MODE=function(t){return{localDev:!1,development:B(t,D(t)),esm:!0,test:!1,rtvVersion:$(t)}}(i)}function $(t){var i;return z||(z=(null===(i=t.AMP_CONFIG)||void 0===i?void 0:i.v)||"012202230359001"),z}function B(t,i){const s=i||D(t);return["1","actions","amp","amp4ads","amp4email"].includes(s.development)||!!t.AMP_DEV_MODE}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var H=self.__AMP_LOG;function Y(t,i){throw new Error("failed to call initLogConstructor")}function X(t){return Y()}function F(t,i,s,n,e,h,o,r,l,a,c){return t}function G(t,i){return Z(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function L(t,i){return Z(W(U(t)),i)}function U(t){return t.nodeType?(i=a(t),G(i,"ampdoc")).getAmpDoc(t):t;var i}function W(t){const i=U(t);return i.isSingleDoc()?i.win:i}function Z(t,i){F(N(t,i));const s=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return s.obj||(F(s.ctor),F(s.context),s.obj=new s.ctor(s.context),F(s.obj),s.context=null,s.resolve&&s.resolve(s.obj)),s.obj}function N(t,i){const s=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!s||!s.ctor)}var q,J=t=>function(t,i){const s=W(U(t));return N(s,i)?Z(s,i):null}(t,"action"),K=t=>G(t,"ampdoc"),Q=t=>L(t,"owners"),tt=t=>Z(t,"timer"),it=class{constructor(){this.Fn=null}add(t){return this.Fn||(this.Fn=[]),this.Fn.push(t),()=>{this.remove(t)}}remove(t){this.Fn&&function(t,i){const s=t.indexOf(i);-1!=s&&t.splice(s,1)}(this.Fn,t)}removeAll(){this.Fn&&(this.Fn.length=0)}fire(t){if(this.Fn)for(var i,n=s(this.Fn,!0);!(i=n()).done;)(0,i.value)(t)}getHandlerCount(){var t,i;return null!==(t=null===(i=this.Fn)||void 0===i?void 0:i.length)&&void 0!==t?t:0}},st="__AMP_Gestures",nt=class{static get(t,i=!1,s=!1){let n=t[st];return n||(n=new nt(t,i,s),t[st]=n),n}constructor(t,i,s){this._n=t,this.wT=[],this.h_=[],this.ri=[],this.IT=[],this.RT=null,this.VT=i,this.yT=s,this.xT=!1,this.Vr=new class{constructor(t,i,s){this.Tr=tt(t),this.Sr=i,this.Mr=s||0,this.Rr=-1,this.kr=0,this.Ht=!1,this.jr=()=>{this.Vr()}}isPending(){return-1!=this.Rr}schedule(t){let i=t||this.Mr;this.Ht&&i<10&&(i=10);const s=Date.now()+i;return(!this.isPending()||s-this.kr<-10)&&(this.cancel(),this.kr=s,this.Rr=this.Tr.delay(this.jr,i),!0)}Vr(){this.Rr=-1,this.kr=0,this.Ht=!0,this.Sr(),this.Ht=!1}cancel(){this.isPending()&&(this.Tr.cancel(this.Rr),this.Rr=-1)}}(a(t),this.bc.bind(this)),this.ST=new it,this.DT=Object.create(null),this.CT=this.py.bind(this),this.zT=this.yy.bind(this),this.GT=this.my.bind(this),this.jT=this.f_.bind(this);const n=function(t){if(void 0!==q)return q;q=!1;try{const i={get passive(){return q=!0,!1}};t.addEventListener("test-options",null,i),t.removeEventListener("test-options",null,i)}catch(t){}return q}(t.ownerDocument.defaultView);this._n.addEventListener("touchstart",this.CT,!!n&&{passive:!0}),this._n.addEventListener("touchend",this.zT),this._n.addEventListener("touchmove",this.GT,!!n&&{passive:!0}),this._n.addEventListener("touchcancel",this.jT),this.OT=!1}cleanup(){this._n.removeEventListener("touchstart",this.CT),this._n.removeEventListener("touchend",this.zT),this._n.removeEventListener("touchmove",this.GT),this._n.removeEventListener("touchcancel",this.jT),delete this._n[st],this.Vr.cancel()}onGesture(t,i){const s=new t(this),n=s.getType();let e=this.DT[n];return e||(this.wT.push(s),e=new it,this.DT[n]=e),e.add(i)}removeGesture(t){const i=new t(this).getType(),s=this.DT[i];if(s){s.removeAll();const t=function(t,s){for(let s=0;s<t.length;s++)if(t[s].getType()==i)return s;return-1}(this.wT);return!(t<0||(this.wT.splice(t,1),this.ri.splice(t,1),this.IT.splice(t,1),this.h_.splice(t,1),delete this.DT[i],0))}return!1}onPointerDown(t){return this.ST.add(t)}py(t){const i=Date.now();this.xT=!1,this.ST.fire(t);for(let s=0;s<this.wT.length;s++)this.ri[s]||(this.IT[s]&&this.IT[s]<i&&this.p_(s),this.wT[s].onTouchStart(t)&&this.m_(s));this.XT(t)}my(t){const i=Date.now();for(let s=0;s<this.wT.length;s++)this.h_[s]&&(this.IT[s]&&this.IT[s]<i?this.p_(s):this.wT[s].onTouchMove(t)||this.p_(s));this.XT(t)}yy(t){const i=Date.now();for(let s=0;s<this.wT.length;s++){if(!this.h_[s])continue;if(this.IT[s]&&this.IT[s]<i){this.p_(s);continue}this.wT[s].onTouchEnd(t);const n=!this.IT[s],e=this.IT[s]<i;this.RT==this.wT[s]||!n&&!e||this.p_(s)}this.XT(t)}f_(t){for(let t=0;t<this.wT.length;t++)this.$T(t);this.XT(t)}ny(t,i){if(this.RT)return void t.acceptCancel();const s=Date.now();for(let n=0;n<this.wT.length;n++)this.wT[n]==t&&(this.ri[n]=s+i,this.IT[n]=0);this.OT=!0}HT(t,i){if(this.RT)return void t.acceptCancel();const s=Date.now();for(let n=0;n<this.wT.length;n++)this.wT[n]==t&&(this.IT[n]=s+i)}LT(t){this.RT==t&&(this.RT=null,this.xT=!0)}UT(t,i,s){F(this.RT==t);const n=this.DT[t.getType()];n&&n.fire(new class{constructor(t,i,s,n){this.type=t,this.data=i,this.time=s,this.event=n}}(t.getType(),i,Date.now(),s))}XT(t){let i=!!this.RT||this.xT;if(this.xT=!1,!i){const t=Date.now();for(let s=0;s<this.wT.length;s++)if(this.ri[s]||this.IT[s]&&this.IT[s]>=t){i=!0;break}}i?(t.stopPropagation(),this.VT||t.preventDefault()):this.yT&&t.stopPropagation(),this.OT&&(this.OT=!1,this.bc())}bc(){const t=Date.now();let i=-1;for(let s=0;s<this.wT.length;s++)this.ri[s]?(-1==i||this.ri[s]>this.ri[i])&&(i=s):this.IT[s]&&this.IT[s]<t&&this.p_(s);if(-1==i)return;let s=0;for(let i=0;i<this.wT.length;i++)!this.ri[i]&&this.h_[i]&&(s=Math.max(s,this.IT[i]-t));s<2?this.YT(i):this.Vr.schedule(s)}YT(t){const i=this.wT[t];for(let i=0;i<this.wT.length;i++)i!=t&&this.$T(i);this.ri[t]=0,this.IT[t]=0,this.RT=i,i.acceptStart()}m_(t){this.h_[t]=!0,this.IT[t]=0}p_(t){this.h_[t]=!1,this.IT[t]=0,this.ri[t]||this.wT[t].acceptCancel()}$T(t){this.ri[t]=0,this.p_(t)}};function et(t,i,s){i<1&&(i=1);const n=t/i,e=.5+Math.min(i/33.34,.5);return n*e+s*(1-e)}function ht(t){return t.classList.contains("i-amphtml-fie")||!!function(t,i){return t.closest?t.closest(".i-amphtml-fie"):function(t,i,s){let n;for(n=t;n&&void 0!==n;n=n.parentElement)if(i(n))return n;return null}(t,(t=>function(t,i){const s=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!s&&s.call(t,".i-amphtml-fie")}(t)))}(t)}Math.round(-16.67/Math.log(.95)),new Set(["c","v","a","ad"]);var ot=['<i-amphtml-ad-close-header role=button tabindex=0 aria-label="Close Ad"><div>Ad</div><i-amphtml-ad-close-button class=amp-ad-close-button></i-amphtml-ad-close-button></i-amphtml-ad-close-header>'],rt="amp-lightbox",lt={"fade-in":{openStyle:{"opacity":1},closedStyle:{"opacity":0},durationSeconds:.1},"fly-in-bottom":{openStyle:{"transform":"translate(0, 0)"},closedStyle:{"transform":"translate(0, 100%)"},durationSeconds:.2},"fly-in-top":{openStyle:{"transform":"translate(0, 0)"},closedStyle:{"transform":"translate(0, -100%)"},durationSeconds:.2}},at=class extends t.BaseElement{constructor(t){super(t),this.Yu=null,this.fn=null,this.Pa=this.win.document,this.el=null,this.Vx=null,this.Cx=!1,this.kx=null,this.Dx=null,this.zx=null,this.Bx=null,this.Hx=!1,this.Yx=0,this.Xx=0,this.Fx=null,this.Gx=(t.getAttribute("animate-in")||"fade-in").toLowerCase(),this.Lx=null,this.Ux=null,this.Wx=null;const i=G(this.win,"platform");this.Zx=i.isIos(),this.Nx=function(t,i,s){let n=0,e=0,h=null;function o(){n=0;const s=500-(t.Date.now()-e);var r;s>0?n=t.setTimeout(o,s):(r=h,h=null,i.apply(null,r))}return function(...i){e=t.Date.now(),h=i,n||(n=t.setTimeout(o,500))}}(this.win,(()=>{const t=(H.user||(H.user=X()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(H.user.win,s)?H.userForEmbed||(H.userForEmbed=X()):H.user).assertElement(this.fn,"E#19457 this.container_"),i=Q(this.element);var s;i.scheduleLayout(this.element,t),i.scheduleResume(this.element,t)}))}buildCallback(){var t,i;this.user().assert((t=lt,i=this.Gx,h.call(t,i)),"Invalid `animate-in` value %s",this.Gx),this.element.classList.add("i-amphtml-overlay"),this.el=J(this.element),this.qx(),this.registerDefaultAction((t=>this.Jx(t.trust,t.caller)),"open"),this.registerAction("close",(t=>this.close(t.trust))),this.el.addToAllowlist("AMP-LIGHTBOX",["open","close"],["email"])}Kx(){F(this.Hx),this.Qx().forEach((t=>{Q(this.element).setOwner(t,this.element)}))}Qx(){return(t=this.element.getElementsByClassName("i-amphtml-element"))?Array.prototype.slice.call(t):[];var t}vr(){if(this.fn)return;const{element:t}=this;this.Hx=t.hasAttribute("scrollable");const i=function(t){return function(t,i){const s=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)!(function(t){let i;var s;return"string"==typeof t?i=t:1==(null==(s=t)?void 0:s.nodeType)&&(i=t.tagName),!!i&&i.toLowerCase().startsWith("i-")}(n=i)||n.nodeType===Node.ELEMENT_NODE&&(n.hasAttribute("placeholder")||n.hasAttribute("fallback")||n.hasAttribute("overflow")))&&s.push(i);var n;return s}(t)}(this.element);this.fn=t.ownerDocument.createElement("div"),this.Hx||function(t,i){t.classList.add("i-amphtml-fill-content")}(this.fn),t.appendChild(this.fn),i.forEach((t=>{this.fn.appendChild(t)})),this.Hx&&(this.Kx(),t.classList.add("i-amphtml-scrollable"),t.addEventListener("amp:dom-update",(()=>{this.Kx(),this.mC(this.Yx)})),t.addEventListener("scroll",this.vm.bind(this))),this.Hx||nt.get(t).onGesture(class extends class extends class{constructor(t,i){this.AV=t,this.g_=i}getType(){return this.AV}signalReady(t){this.g_.ny(this,t)}signalPending(t){this.g_.HT(this,t)}signalEnd(){this.g_.LT(this)}signalEmit(t,i){this.g_.UT(this,t,i)}acceptStart(){}acceptCancel(){}onTouchStart(t){return!1}onTouchMove(t){return!1}onTouchEnd(t){}}{constructor(t,i,s,n){super(t,i),this.PV=s,this.bV=n,this.RT=!1,this.MV=0,this.wV=0,this.EV=0,this.TV=0,this.IV=0,this.RV=0,this.Ih=0,this.VV=0,this.yV=0,this.xV=0,this.kV=0}onTouchStart(t){const{touches:i}=t;return!!(this.RT&&i&&i.length>1)||!(!i||1!=i.length)&&(this.Ih=Date.now(),this.MV=i[0].clientX,this.wV=i[0].clientY,!0)}onTouchMove(t){const{touches:i}=t;if(i&&i.length>=1){const{clientX:s,clientY:n}=i[0];if(this.EV=s,this.TV=n,this.RT)this.SV(!1,!1,t);else{const t=Math.abs(s-this.MV),i=Math.abs(n-this.wV);if(this.PV&&this.bV)(t>=8||i>=8)&&this.signalReady(-10);else if(this.PV){if(t>=8&&t>i)this.signalReady(-10);else if(i>=8)return!1}else{if(!this.bV)return!1;if(i>=8&&i>t)this.signalReady(-10);else if(t>=8)return!1}}return!0}return!1}onTouchEnd(t){const{touches:i}=t;i&&0==i.length&&this.DV(t)}acceptStart(){this.RT=!0,this.IV=this.MV,this.RV=this.wV,this.yV=this.Ih,this.MV=this.EV,this.wV=this.TV,this.SV(!0,!1,null)}acceptCancel(){this.RT=!1}SV(t,i,s){this.VV=Date.now();const n=this.VV-this.yV;if(!i&&n>4||i&&n>16){const t=et(this.EV-this.IV,n,this.xV),s=et(this.TV-this.RV,n,this.kV);(!i||n>32||0!=t||0!=s)&&(this.xV=Math.abs(t)>1e-4?t:0,this.kV=Math.abs(s)>1e-4?s:0),this.IV=this.EV,this.RV=this.TV,this.yV=this.VV}this.signalEmit({first:t,last:i,time:this.VV,deltaX:this.EV-this.MV,deltaY:this.TV-this.wV,startX:this.MV,startY:this.wV,lastX:this.EV,lastY:this.TV,velocityX:this.xV,velocityY:this.kV},s)}DV(t){this.RT&&(this.RT=!1,this.SV(!1,!0,t),this.signalEnd())}}{constructor(t){super("swipe-xy",t,!0,!0)}},(()=>{})),this.pC()}layoutCallback(){return n||(n=Promise.resolve(void 0))}Jx(t,i){if(this.Cx)return;this.vr(),this.Dx=this.vC.bind(this),this.Pa.documentElement.addEventListener("focusin",this.Dx),i&&(this.Bx=i);const{promise:s,resolve:n}=new class{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}};return this.getViewport().enterLightboxMode(this.element,s).then((()=>this.gC(n,t)))}mutatedAttributesCallback(t){const i=t.open;void 0!==i&&(i?this.Jx(2,document.activeElement):this.close(2))}bC(){const t=this.fn.querySelector("[autofocus]");t&&c(t)}gC(t,i){const{element:s}=this,{closedStyle:n,durationSeconds:e,openStyle:h}=this.yC(),o=Object.keys(h).map((t=>`${t} ${e}s ease-in`)).join(",");this.Xx++,this.Hx&&I(s,"webkitOverflowScrolling","touch"),I(s,"transition",o),w(s,V(n)),function(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}(s,!0),this.mutateElement((()=>{s.scrollTop=0})),this.bC(),this.mutateElement((()=>{w(s,V(h))}));const r=this.fn;this.Hx&&(this.vm(),this.mC(this.Yx));const l=()=>{this.Nx(),t()};s.addEventListener("transitionend",l),s.addEventListener("animationend",l),this.setAsContainer();const a=Q(this.element);a.scheduleLayout(this.element,r),a.scheduleResume(this.element,r),this.hO("lightboxOpen",i),this.Vx=new class{constructor(t,i){const{win:s}=t;if(this.i=s,this.Sr=i,this.EC=null,this.wo=null,this.MC=-1,this.TC=null,"function"==typeof s.CloseWatcher)try{this.EC=new s.CloseWatcher}catch(t){(H.dev||(H.dev=Y())).error("CloseWatcherImpl","CloseWatcher failed:",t)}this.EC?this.EC.onclose=()=>{i(),this.destroy()}:(this.wo=L(t,"history"),this.wo.push((()=>i())).then((t=>{this.MC=t})),this.TC=this.IC.bind(this),s.document.documentElement.addEventListener("keydown",this.TC))}signalClosed(){this.EC?this.EC.signalClosed():this.Sr&&((0,this.Sr)(),this.destroy())}destroy(){this.Sr=null,this.EC?(this.EC.destroy(),this.EC=null):-1!=this.MC&&(F(this.wo).pop(this.MC),this.MC=-1,this.wo=null,this.i.document.documentElement.removeEventListener("keydown",this.TC))}IC(t){"Escape"==t.key&&(t.preventDefault(),this.signalClosed())}}(this.getAmpDoc(),(()=>this.close(3))),this.wC(),this.RC(),this.VC(),this.Cx=!0}pC(){const{element:t}=this;null!=t.getAttribute("close-button")&&(this.Lx=function(t){const i=t.ownerDocument||t;return p&&p.ownerDocument===i||(p=i.createElement("div")),g}(t)(ot),t.insertBefore(this.Lx,this.fn))}wC(){if(!this.Lx)return;let t;this.kx=this.xC.bind(this),this.Lx.addEventListener("keydown",this.kx),this.measureMutateElement((()=>{t=this.Lx.getBoundingClientRect().height}),(()=>{this.SC(),T(this.fn,{"margin-top":R(t),"min-height":`calc(100vh - ${R(t)})`})}))}SC(){this.Lx.classList.add("amp-ad-close-header")}VC(){(this.Wx||this.Lx)&&(this.zx=this.CC.bind(this),this.Ux.addEventListener("click",this.zx))}kC(){(this.Wx||this.Lx)&&(this.Ux.removeEventListener("click",this.zx),this.zx=null,this.Lx&&(this.Lx.removeEventListener("keydown",this.kx),this.kx=null))}yC(){return lt[this.Gx]}CC(){this.close(3)}xC(t){"Enter"==t.key&&(t.preventDefault(),this.close(3))}close(t){this.Cx&&(this.Hx&&I(this.element,"webkitOverflowScrolling",""),this.getViewport().leaveLightboxMode(this.element).then((()=>this.OC(t))))}OC(t){const{element:i}=this,s=++this.Xx,n=()=>{s==this.Xx&&(this.collapse(),this.Nx())};this.DC()?(function(t,i){for(let s=0;s<i.length;s++)I(t,i[s],null)}(i,["transition"]),n()):(i.addEventListener("transitionend",n),i.addEventListener("animationend",n)),w(i,V(this.yC().closedStyle)),this.Vx&&(this.Vx.destroy(),this.Vx=null),this.Pa.documentElement.removeEventListener("focusin",this.Dx),this.Dx=null,this.kC(),this.removeAsContainer(),function(t,i=!0){!function(t,i,s,n){const h=e(o=t)?o:[o];var o;for(let t=0;t<h.length;t++)v(h[t],i,!0,n)}(t,i,0,P)}(this.element,!1),Q(this.element).schedulePause(this.element,this.fn),this.Cx=!1,this.hO("lightboxClose",t),this.Bx&&c(this.Bx)}DC(){return"inabox"==j(this.win).runtime||ht(this.element)}zC(){const{element:t}=this;return!!t.contains(document.activeElement)}vC(){this.zC()||this.close(3)}RC(){this.zC()||(this.Ux=this.jC(),this.Ux||(this.Wx=this.$C(),this.element.insertBefore(this.Wx,this.element.firstChild),this.Ux=this.Wx),c(this.Ux))}jC(){if(this.Ux)return this.Ux;if(this.Lx)return this.Lx;const{element:t}=this,i=t.querySelectorAll("[on]");for(let s=0;s<i.length;s++){const n=i[s];if(this.el.hasResolvableActionForTarget(n,"tap",t,F(n.parentElement)))return n}}$C(){const{element:t}=this,i=t.getAttribute("data-close-button-aria-label")||"Close the modal",s=this.Pa.createElement("button");return s.textContent=i,s.classList.add("i-amphtml-screen-reader"),s.tabIndex=-1,s}vm(){const t=this.element.scrollTop;this.Zx&&(0==t?this.element.scrollTop=1:this.element.scrollHeight==t+this.element.offsetHeight&&(this.element.scrollTop=t-1)),this.Yx=t,null===this.Fx&&this.BC(t)}BC(t){this.Fx=tt(this.win).delay((()=>{Math.abs(t-this.Yx)<30?(this.Fx=null,this.Bt(this.Yx)):this.BC(this.Yx)}),100)}Bt(t){this.mC(t),this.Yx=t}mC(t){const i=[];this.HC(t,(t=>{i.push(t),Q(this.element).scheduleLayout(this.element,t)}))}HC(t,i){const s=this.YC().height,n=this.Qx();for(let e=0;e<n.length;e++){const h=n[e];let o=0;for(let t=h;t&&this.element.contains(t);t=t.offsetParent)o+=t.offsetTop;const r=2*s;o+h.offsetHeight>=t-r&&o<=t+r&&i(h)}}YC(){return this.Yu||(this.Yu={width:this.element.clientWidth,height:this.element.clientHeight}),this.Yu}qx(){const{element:t,win:i}=this;ht(t)&&ct(i,i.document.body)}hO(t,i){const s=function(t,i,s,n){const e={detail:{}};return Object.assign(e,void 0),new t.CustomEvent(i,e)}(this.win,`${rt}.${t}`);this.el.trigger(this.element,t,s,i)}};function ct(t,i){const s={},n=K(t).getAmpDoc(i);var e;(e=n,L(e,"mutator")).measureMutateElement(i,(function(){s.alreadyTransparent="rgba(0, 0, 0, 0)"==function(t,i){return t.getComputedStyle(i)||y}(t,i)["background-color"]}),(function(){s.alreadyTransparent,T(i,{background:"transparent"})}))}"inabox"==j().runtime&&ct(window,F(document.body)),t.registerElement(rt,at,'amp-lightbox{display:none;position:fixed!important;z-index:1000;top:0!important;left:0!important;bottom:0!important;right:0!important}amp-lightbox[scrollable]{overflow-y:auto!important;overflow-x:hidden!important}amp-lightbox i-amphtml-ad-close-header{height:60px!important;display:block!important;visibility:visible!important;opacity:0;position:fixed!important;top:0!important;left:0!important;right:0!important;z-index:1000!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;-ms-flex-pack:right!important;justify-content:right!important;transition:opacity 0.1s ease-in}[animate-in=fly-in-bottom]>i-amphtml-ad-close-header,[animate-in=fly-in-top]>i-amphtml-ad-close-header{transition-delay:0.2s}amp-lightbox .amp-ad-close-header{opacity:1!important;box-sizing:border-box;padding:5px;line-height:40px;background-color:#000;color:#fff;font-family:Helvetica,sans-serif;font-size:12px;cursor:pointer}amp-lightbox .amp-ad-close-header>:first-child{margin-left:auto!important;pointer-events:none!important}amp-lightbox .amp-ad-close-button{display:block!important;background:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\') no-repeat;background-position:50%;width:40px;height:40px;pointer-events:none!important;border-radius:40px;margin-left:5px}amp-lightbox .amp-ad-close-header:active>.amp-ad-close-button{background-color:hsla(0,0%,100%,0.3)}\n/*# sourceURL=/extensions/amp-lightbox/0.1/amp-lightbox.css*/')})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-lightbox-0.1.mjs.map