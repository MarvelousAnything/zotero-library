(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{7349:function(r,e,t){"use strict";var n=t(5893),o=t(7294),a=t(4184),i=t.n(a),u=t(542),c=t.n(u),s=t(9008),l=t(131);function f(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function d(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function p(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function y(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function h(r){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function m(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){y(r,e,t[e])}))}return r}function v(r,e){if(null==r)return{};var t,n,o=function(r,e){if(null==r)return{};var t,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||(o[t]=r[t]);return o}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function b(r,e){return!e||"object"!==x(e)&&"function"!==typeof e?function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):e}function g(r,e){return(g=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}function w(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return f(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(r){return r&&"undefined"!==typeof Symbol&&r.constructor===Symbol?"symbol":typeof r};function j(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=h(r);if(e){var o=h(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return b(this,t)}}var O=void 0,S=function(r){!function(r,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&g(r,e)}(u,r);var e,t,o,a=j(u);function u(){var r;return d(this,u),(r=a.apply(this,arguments)).state={hasError:!1},r}return e=u,o=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(t=[{key:"render",value:function(){var r=this.props,e=r.alt,t=r.className,o=(r.lazy,v(r,["alt","className","lazy"]));return this.state.hasError?(0,n.jsx)("img",m({alt:e,className:i()(c().root,t)},o)):this.props.children}}])&&p(e.prototype,t),o&&p(e,o),u}(o.Component),_=function(r){var e=r.src,t=r.sizes,a=r.srcSet,u=r.alt,s=r.className,f=(r.lazy,r.preload,v(r,["src","sizes","srcSet","alt","className","lazy","preload"])),d=(0,o.useState)(!1),p=d[0],y=d[1],h=function(){var r=(0,o.useState)(O),e=r[0],t=r[1];return(0,o.useEffect)((function(){void 0===O&&(O="loading"in HTMLImageElement.prototype,t(O))}),[]),e}(),b=w((0,l.YD)({rootMargin:"200px",threshold:0,triggerOnce:!0,fallbackInView:!0}),2),g=b[0],x=b[1],j="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ".concat(f.width," ").concat(f.height,"' /%3E");return(0,n.jsx)("img",m({ref:h?void 0:g,alt:u,loading:"lazy",className:i()(c().root,c().lazy,p&&c().loaded,s),onLoad:function(){return y(!0)},sizes:t,srcSet:x||h?a:void 0,src:x||h?e:j},f))},A=function(r){var e=r.preload,t=r.src,o=r.sizes,a=r.srcSet,u=r.alt,l=r.className,f=(r.lazy,v(r,["preload","src","sizes","srcSet","alt","className","lazy"]));return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)(s.default,{children:(0,n.jsx)("link",{rel:"preload",as:"image",href:t,imagesrcset:a,imagesizes:o},"preload-".concat(t))}),(0,n.jsx)("img",m({alt:u,className:i()(c().root,l),sizes:o,srcSet:a,src:t},f))]})};e.Z=function(r){return(0,n.jsx)(S,m({},r,{children:r.lazy?(0,n.jsx)(_,m({},r)):(0,n.jsx)(A,m({},r))}))}},1632:function(r,e,t){"use strict";var n=t(5893),o=t(5152),a=t(131);function i(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function u(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function c(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){u(r,e,t[e])}))}return r}function s(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return i(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.Z=function(r,e){var t=c({rootMargin:"500px"},e);return function(e){var i,u=(0,o.default)(r,{loading:function(){return null!==(i=t.loading)&&void 0!==i?i:null},ssr:!1}),l=s((0,a.YD)({rootMargin:t.rootMargin,threshold:0,triggerOnce:!0,fallbackInView:!0}),2),f=l[0],d=l[1];return(0,n.jsx)("div",{ref:f,children:d?(0,n.jsx)(u,c({},e)):null})}}},3437:function(r,e,t){"use strict";t.d(e,{du:function(){return d},aM:function(){return u.aM},Ps:function(){return a.Ps}});var n=t(1325),o=t(1752),a=t(6997),i=t(705),u=t(2432),c=(0,o.default)(),s=c.publicRuntimeConfig,l=(c.serverRuntimeConfig,function(r){return Array.isArray(r)?r.join(", "):r}),f=function(r){var e={"x-api-key":s.GRAPHQL_API_KEY,"user-agent":"Frontend/1.0 (The Atlantic)"};if(!(null===r||void 0===r?void 0:r.req))return e;if(r.req.headers.cookie&&(e.cookie=r.req.headers.cookie),r.req.headers["x-forwarded-for"]&&(e["x-forwarded-for"]=l(r.req.headers["x-forwarded-for"])),r.req.connection.remoteAddress){var t=(e["x-forwarded-for"]||"").split(/,\s*?/);t.includes(r.req.connection.remoteAddress)||t.push(r.req.connection.remoteAddress),e["x-forwarded-for"]=t.join(", "),e["x-real-ip"]=t[0]||r.req.connection.remoteAddress}var n=[],o=r.req.headers["x-forwarded-host"]||r.req.headers.host;o&&(e["x-forwarded-host"]=l(o),n.push(e["x-forwarded-host"].split(",")[0])),r.req.url&&(e["x-forwarded-path"]=r.req.url,n.push(e["x-forwarded-path"]));var a=l(r.req.headers["x-forwarded-proto"]||"").split(/,\s*?/)[0]||"http";if(2===n.length&&(e.referer="".concat(a,"://").concat(n.join(""))),r.req.headers["user-agent"]&&(e["x-forwarded-user-agent"]=r.req.headers["user-agent"]),r.req.headers["x-transaction-id"])e["x-transaction-id"]=l(r.req.headers["x-transaction-id"]);else{var i=Math.random().toString(36).substr(2,9);r.req.headers["x-transaction-id"]=i,e["x-transaction-id"]=i}return e},d=function(r){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n.X)((function(r,e){var t=[a.B5,a.HG,r,(0,i.H)({preferGetForPersistedQueries:!0}),a.Ek];return{url:s.GRAPHQL_API_URL,fetchOptions:{headers:f(e),credentials:"include"},exchanges:t}}),{ssr:!e})(r)}},5971:function(r,e,t){"use strict";var n=t(7294),o=function(r){return r.map((function(r){return r.matches}))};e.Z=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var a=e.map((function(r){return window.matchMedia(r)})),i=a.join(),u=(0,n.useState)((function(){return o(a)})),c=u[0],s=u[1];return(0,n.useEffect)((function(){var r=function(){return s(o(a))};return a.forEach((function(e){return e.addListener(r)})),function(){return a.forEach((function(e){return e.removeListener(r)}))}}),[i]),c}},542:function(r){r.exports={root:"Image_root__d3aBr",lazy:"Image_lazy__tutlP",loaded:"Image_loaded__9ZaHQ"}}}]);