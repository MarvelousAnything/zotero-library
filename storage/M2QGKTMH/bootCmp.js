(()=>{"use strict";const e=new Map,t=/[()<>@,;"\\/[\]?={} \t]/g,n=e=>{const t=`${e}=`;return document.cookie.split(";").reduce(((e,n)=>{const o=n.trim();return o.startsWith(t)&&e.push(o.substring(t.length,o.length)),e}),[])},o=e=>!t.test(e),a=({isCrossSubdomain:e=!1}={})=>{const t=(({isCrossSubdomain:e=!1}={})=>{var t,n,o;const a=document.domain||"";return"localhost"===a||null!==(t=window.guardian)&&void 0!==t&&null!==(n=t.config)&&void 0!==n&&null!==(o=n.page)&&void 0!==o&&o.isPreview?a:e?["",...a.split(".").slice(-2)].join("."):a.replace(/^(www|m\.code|dev|m)\./,".")})({isCrossSubdomain:e});return"localhost"===t?"":` domain=${t};`},r=({name:t,shouldMemoize:o=!1})=>{var a;if(e.has(t))return null!==(a=e.get(t))&&void 0!==a?a:null;const r=n(t);return r.length>0?(o&&e.set(t,r[0]),r[0]):null};var i,s,c,l,d=function(e,t,n,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(e,n):a?a.value=n:t.set(e,n),n},u=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};class p{constructor(e){i.set(this,void 0);try{const t=(new Date).toString();e.setItem(t,t);const n=e.getItem(t)==t;e.removeItem(t),n&&d(this,i,e,"f")}catch(e){}}isAvailable(){return Boolean(u(this,i,"f"))}get(e){try{var t,n;const{value:o,expires:a}=JSON.parse(null!==(t=null===(n=u(this,i,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:"");return a&&new Date>new Date(a)?(this.remove(e),null):o}catch(e){return null}}set(e,t,n){var o;return null===(o=u(this,i,"f"))||void 0===o?void 0:o.setItem(e,JSON.stringify({value:t,expires:n}))}remove(e){var t;return null===(t=u(this,i,"f"))||void 0===t?void 0:t.removeItem(e)}clear(){var e;return null===(e=u(this,i,"f"))||void 0===e?void 0:e.clear()}getRaw(e){var t,n;return null!==(t=null===(n=u(this,i,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:null}setRaw(e,t){var n;return null===(n=u(this,i,"f"))||void 0===n?void 0:n.setItem(e,t)}}i=new WeakMap;const w=new(l=class{constructor(){s.set(this,void 0),c.set(this,void 0)}get local(){return d(this,s,u(this,s,"f")||new p(localStorage),"f")}get session(){return d(this,c,u(this,c,"f")||new p(sessionStorage),"f")}},s=new WeakMap,c=new WeakMap,l);var f;const g="gu.logger",m={common:{background:"#052962",font:"#ffffff"},commercial:{background:"#77EEAA",font:"#004400"},cmp:{background:"#FF6BB5",font:"#2F0404"},dotcom:{background:"#000000",font:"#ff7300"},design:{background:"#185E36",font:"#FFF4F2"},tx:{background:"#2F4F4F",font:"#FFFFFF"}},v=e=>{const{background:t,font:n}=m[e];return`background: ${t}; color: ${n}; padding: 2px 3px; border-radius:3px`},h=(e,...t)=>{if(!(w.local.get(g)||"").includes(e))return;const n=[v("common"),"",v(e),""];console.log(`%c@guardian%c %c${e}%c`,...n,...t)};function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}"undefined"!=typeof window&&(window.guardian||(window.guardian={}),(f=window.guardian).logger||(f.logger={subscribeTo:e=>{const t=w.local.get(g)?w.local.get(g).split(","):[];t.includes(e)||t.push(e),w.local.set(g,t.join(",")),h(e,"ðŸ”” Subscribed, hello!")},unsubscribeFrom:e=>{h(e,"ðŸ”• Unsubscribed, good-bye!");const t=w.local.get(g).split(",").filter((t=>t!==e));w.local.set(g,t.join(","))},teams:()=>Object.keys(m)}));var S,C,P,M,E=function(e,t,n,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(e,n):a?a.value=n:t.set(e,n),n},k=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};class F{constructor(e){S.set(this,void 0);try{const t=(new Date).toString();e.setItem(t,t);const n=e.getItem(t)==t;e.removeItem(t),n&&E(this,S,e,"f")}catch(e){}}isAvailable(){return Boolean(k(this,S,"f"))}get(e){try{var t,n;const{value:o,expires:a}=JSON.parse(null!==(t=null===(n=k(this,S,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:"");return a&&new Date>new Date(a)?(this.remove(e),null):o}catch(e){return null}}set(e,t,n){var o;return null===(o=k(this,S,"f"))||void 0===o?void 0:o.setItem(e,JSON.stringify({value:t,expires:n}))}remove(e){var t;return null===(t=k(this,S,"f"))||void 0===t?void 0:t.removeItem(e)}clear(){var e;return null===(e=k(this,S,"f"))||void 0===e?void 0:e.clear()}getRaw(e){var t,n;return null!==(t=null===(n=k(this,S,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:null}setRaw(e,t){var n;return null===(n=k(this,S,"f"))||void 0===n?void 0:n.setItem(e,t)}}S=new WeakMap;const I=new(M=class{constructor(){C.set(this,void 0),P.set(this,void 0)}get local(){return E(this,C,k(this,C,"f")||new F(localStorage),"f")}get session(){return E(this,P,k(this,P,"f")||new F(sessionStorage),"f")}},C=new WeakMap,P=new WeakMap,M);var T;const D="gu.logger",O={common:{background:"#052962",font:"#ffffff"},commercial:{background:"#77EEAA",font:"#004400"},cmp:{background:"#FF6BB5",font:"#2F0404"},dotcom:{background:"#000000",font:"#ff7300"},design:{background:"#185E36",font:"#FFF4F2"},tx:{background:"#2F4F4F",font:"#FFFFFF"}},$=e=>{const{background:t,font:n}=O[e];return`background: ${t}; color: ${n}; padding: 2px 3px; border-radius:3px`},N=(e,...t)=>{if(!(I.local.get(D)||"").includes(e))return;const n=[$("common"),"",$(e),""];console.log(`%c@guardian%c %c${e}%c`,...n,...t)};"undefined"!=typeof window&&(window.guardian||(window.guardian={}),(T=window.guardian).logger||(T.logger={subscribeTo:e=>{const t=I.local.get(D)?I.local.get(D).split(","):[];t.includes(e)||t.push(e),I.local.set(D,t.join(",")),N(e,"ðŸ”” Subscribed, hello!")},unsubscribeFrom:e=>{N(e,"ðŸ”• Unsubscribed, good-bye!");const t=I.local.get(D).split(",").filter((t=>t!==e));I.local.set(D,t.join(","))},teams:()=>Object.keys(O)}));const j=e=>{var t,n;null===(t=window.performance)||void 0===t||null===(n=t.mark)||void 0===n||n.call(t,e),N("cmp","[event]",e)},A="undefined"==typeof window,x=()=>{console.warn("This is a server-side version of the @guardian/consent-management-platform","No consent signals will be received.")},U=e=>()=>(x(),e),R={__disable:x,__enable:U(!1),__isDisabled:U(!1),hasInitialised:U(!1),init:x,showPrivacyManager:x,version:"n/a",willShowPrivacyMessage:U(Promise.resolve(!1)),willShowPrivacyMessageSync:U(!1)};let H;const L=()=>(void 0===H&&(H=!!A||window.location.host.endsWith(".theguardian.com")),H),J=1257,B=L()?"https://sourcepoint.theguardian.com":"https://cdn.privacy-mgmt.com",G=({live:e,test:t})=>L()?e:t,W=async()=>{return{personalisedAdvertising:!("Y"===(await(e="getUSPData",new Promise(((t,n)=>{window.__uspapi?window.__uspapi(e,1,((e,o)=>o?t(e):n(new Error("Unable to get getUSPData data")))):n(new Error("No __uspapi found on window"))})))).uspString.charAt(2))};var e},V=async()=>{return{doNotSell:"Y"===(await(e="getUSPData",new Promise(((t,n)=>{window.__uspapi?window.__uspapi(e,1,((e,o)=>o?t(e):n(new Error("Unable to get getUSPData data")))):n(new Error("No __uspapi found on window"))})))).uspString.charAt(2)};var e};let z;const q=()=>z,Y=e=>new Promise(((t,n)=>{window.__tcfapi?window.__tcfapi(e,2,((o,a)=>a?t(o):n(new Error(`Unable to get ${e} data`)))):n(new Error("No __tcfapi found on window"))})),Z={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,10:!1},K=async()=>{const[e,t]=await Promise.all([Y("getTCData"),Y("getCustomVendorConsents")]);if(void 0===e){var n;const e=null!==(n=q())&&void 0!==n?n:"undefined";throw new Error(`No TC Data found with current framework: ${e}`)}const o=_(_({},Z),e.purpose.consents),{eventStatus:a,gdprApplies:r,tcString:i,addtlConsent:s}=e,{grants:c}=t;return{consents:o,eventStatus:a,vendorConsents:Object.keys(c).sort().reduce(((e,t)=>_(_({},e),{},{[t]:c[t].vendorGrant})),{}),addtlConsent:s,gdprApplies:r,tcString:i}},Q=[],X=e=>{var t;return"cmpuishown"===(null===(t=e.tcfv2)||void 0===t?void 0:t.eventStatus)},ee=(e,t)=>{if(X(t))return;const n=JSON.stringify(t);n!==e.lastState&&(e.fn(t),e.lastState=n)},te=async()=>{if(window.__uspapi)return"aus"===q()?{aus:await W()}:{ccpa:await V()};if(window.__tcfapi)return{tcfv2:await K()};throw new Error("no IAB consent framework found on the page")},ne=()=>{te().then((e=>{X(e)||Q.forEach((t=>ee(t,e)))}))};let oe;const ae=new Promise((e=>{oe=e}));let re;new Promise((e=>{re=e}));const ie={live:"https://au.theguardian.com",test:"https://au.theguardian.com"},se={init:e=>{j("cmp-aus-init"),((e={})=>{if((()=>{var e=window,t=document;function n(t){var n="string"==typeof t.data;try{var o=n?JSON.parse(t.data):t.data;if(o.__cmpCall){var a=o.__cmpCall;e.__uspapi(a.command,a.parameter,(function(e,o){var r={__cmpReturn:{returnValue:e,success:o,callId:a.callId}};t.source.postMessage(n?JSON.stringify(r):r,"*")}))}}catch(o){}}!function n(){if(!e.frames.__uspapiLocator)if(t.body){var o=t.body,a=t.createElement("iframe");a.style.cssText="display:none",a.name="__uspapiLocator",o.appendChild(a)}else setTimeout(n,5)}(),"function"!=typeof __uspapi&&(e.__uspapi=function(){var e=arguments;if(__uspapi.a=__uspapi.a||[],!e.length)return __uspapi.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(e))},__uspapi.msgHandler=n,e.addEventListener("message",n,!1))})(),window._sp_ccpa)throw new Error("Sourcepoint CCPA global (window._sp_ccpa) is already defined!");ne(),window._sp_ccpa={config:{baseEndpoint:B,accountId:J,getDnsMsgMms:!0,alwaysDisplayDns:!1,siteHref:G(ie),targetingParams:{framework:"aus"},pubData:_(_({},e),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:()=>{j("cmp-aus-got-consent"),setTimeout(ne,0)},onMessageReady:()=>{j("cmp-aus-ui-displayed")},onMessageReceiveData:e=>{oe(0!==e.msg_id),re()},onMessageChoiceSelect:(e,t)=>{11!==t&&13!==t&&15!==t||setTimeout(ne,0)}}}};const t=document.createElement("script");t.id="sourcepoint-aus-lib",t.src=`${B}/ccpa.js`,document.body.appendChild(t)})(e)},willShowPrivacyMessage:()=>ae,showPrivacyManager:function(){var e,t;null===(e=window._sp_ccpa)||void 0===e||null===(t=e.loadPrivacyManagerModal)||void 0===t||t.call(e,null,"5f859e174ed5055e72ce26a6")}};let ce;const le=new Promise((e=>{ce=e})),de={live:null,test:"https://test.theguardian.com"},ue={init:e=>{j("cmp-ccpa-init"),((e={})=>{if((()=>{var e=window,t=document;function n(t){var n="string"==typeof t.data;try{var o=n?JSON.parse(t.data):t.data;if(o.__cmpCall){var a=o.__cmpCall;e.__uspapi(a.command,a.parameter,(function(e,o){var r={__cmpReturn:{returnValue:e,success:o,callId:a.callId}};t.source.postMessage(n?JSON.stringify(r):r,"*")}))}}catch(o){}}!function n(){if(!e.frames.__uspapiLocator)if(t.body){var o=t.body,a=t.createElement("iframe");a.style.cssText="display:none",a.name="__uspapiLocator",o.appendChild(a)}else setTimeout(n,5)}(),"function"!=typeof __uspapi&&(e.__uspapi=function(){var e=arguments;if(__uspapi.a=__uspapi.a||[],!e.length)return __uspapi.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(e))},__uspapi.msgHandler=n,e.addEventListener("message",n,!1))})(),window._sp_ccpa)throw new Error("Sourcepoint CCPA global (window._sp_ccpa) is already defined!");ne(),window._sp_ccpa={config:{baseEndpoint:B,accountId:J,getDnsMsgMms:!0,alwaysDisplayDns:!1,siteHref:G(de),targetingParams:{framework:"ccpa"},pubData:_(_({},e),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:()=>{j("cmp-ccpa-got-consent"),setTimeout(ne,0)},onMessageReady:()=>{j("cmp-ccpa-ui-displayed")},onMessageReceiveData:e=>{ce(0!==e.msg_id)},onMessageChoiceSelect:(e,t)=>{11!==t&&13!==t&&15!==t||setTimeout(ne,0)}}}};const t=document.createElement("script");t.id="sourcepoint-ccpa-lib",t.src=`${B}/ccpa.js`,document.body.appendChild(t)})(e)},willShowPrivacyMessage:()=>le,showPrivacyManager:function(){var e,t;null===(e=window._sp_ccpa)||void 0===e||null===(t=e.loadPrivacyManagerModal)||void 0===t||t.call(e,null,"5eba7ef78c167c47ca8b433d")}},pe="gu-cmp-disabled",we=()=>new RegExp(`${pe}=true(\\W+|$)`).test(document.cookie),fe={a9:["5f369a02b8e05c308701f829"],acast:["5f203dcb1f0dea790562e20f"],braze:["5ed8c49c4b8ce4571c7ad801"],comscore:["5efefe25b8e05c06542b2a77"],fb:["5e7e1298b8e05c54a85c52d2"],"google-analytics":["5e542b3a4cd8884eb41b5a72"],"google-mobile-ads":["5f1aada6b8e05c306c0597d7"],"google-tag-manager":["5e952f6107d9d20c88e7c975"],googletag:["5f1aada6b8e05c306c0597d7"],ias:["5e7ced57b8e05c485246ccf3"],inizio:["5e37fc3e56a5e6615502f9c9"],ipsos:["5f745ab96f3aae0163740409"],lotame:["5ed6aeb1b8e05c241a63c71f"],nielsen:["5ef5c3a5b8e05c69980eaa5b"],ophan:["5f203dbeeaaaa8768fd3226a"],permutive:["5eff0d77969bfa03746427eb"],prebid:["5f92a62aa22863685f4daa4c"],redplanet:["5f199c302425a33f3f090f51"],remarketing:["5ed0eb688a76503f1016578f"],sentry:["5f0f39014effda6e8bbd2006"],teads:["5eab3d5ab8e05c2bbe33f399"],twitter:["5e71760b69966540e4554f01"],"youtube-player":["5e7ac3fae30e7d1bc1ebf5e8"]};let ge;const me=new Promise((e=>{ge=e})),ve={live:null,test:"https://test.theguardian.com"},he={init:e=>{j("cmp-tcfv2-init"),((e={})=>{if(function(){for(var e,t="__tcfapiLocator",n=[],o=window;o;){try{if(o.frames[t]){e=o;break}}catch(e){}if(o===window.top)break;o=o.parent}e||(function e(){var n=o.document,a=!!o.frames[t];if(!a)if(n.body){var r=n.createElement("iframe");r.style.cssText="display:none",r.name=t,n.body.appendChild(r)}else setTimeout(e,5);return!a}(),o.__tcfapi=function(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];if(!o.length)return n;if("setGdprApplies"===o[0])o.length>3&&2===parseInt(o[1],10)&&"boolean"==typeof o[3]&&(e=o[3],"function"==typeof o[2]&&o[2]("set",!0));else if("ping"===o[0]){var r={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof o[2]&&o[2](r)}else n.push(o)},o.addEventListener("message",(function(e){var t="string"==typeof e.data,n={};try{n=t?JSON.parse(e.data):e.data}catch(e){}var o=n.__tcfapiCall;o&&window.__tcfapi(o.command,o.version,(function(n,a){var r={__tcfapiReturn:{returnValue:n,success:a,callId:o.callId}};t&&(r=JSON.stringify(r)),e.source.postMessage(r,"*")}),o.parameter)}),!1))}(),window._sp_)throw new Error("Sourcepoint TCF global (window._sp_) is already defined!");ne(),window._sp_={config:{baseEndpoint:B,accountId:J,propertyHref:G(ve),targetingParams:{framework:"tcfv2"},pubData:_(_({},e),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:()=>{j("cmp-tcfv2-got-consent"),setTimeout(ne,0)},onMessageReady:()=>{j("cmp-tcfv2-ui-displayed")},onMessageReceiveData:e=>{ge(0!==e.messageId)},onMessageChoiceSelect:(e,t)=>{11!==t&&13!==t&&15!==t||setTimeout(ne,0)}}}};const t=document.createElement("script");t.id="sourcepoint-tcfv2-lib",t.src=`${B}/wrapperMessagingWithoutDetection.js`,document.body.appendChild(t)})(e)},willShowPrivacyMessage:()=>me,showPrivacyManager:function(){var e,t;null===(e=window._sp_)||void 0===e||null===(t=e.loadPrivacyManagerModal)||void 0===t||t.call(e,106842)}};var be,ye,_e;let Se,Ce;A||window.guCmpHotFix||(window.guCmpHotFix={});let Pe,Me=!1;const Ee=new Promise((e=>{Pe=e})),ke=A?R:(be=window.guCmpHotFix).cmp||(be.cmp={init:({pubData:e,country:t})=>{if(we()||A)return;var n,o;if(window.guCmpHotFix.initialised)return void("10.3.1"!==(null===(n=window.guCmpHotFix.cmp)||void 0===n?void 0:n.version)&&console.warn("Two different versions of the CMP are running:",["10.3.1",null===(o=window.guCmpHotFix.cmp)||void 0===o?void 0:o.version]));if(window.guCmpHotFix.initialised=!0,void 0===t)throw new Error("CMP initialised without `country` property. A 2-letter, ISO ISO_3166-1 country code is required.");const a=(e=>{let t;switch(e){case"US":t="ccpa";break;case"AU":t="aus";break;default:t="tcfv2"}return t})(t);switch(a){case"ccpa":Se=ue;break;case"aus":Se=se;break;default:Se=he}(e=>{N("cmp",`Framework set to ${e}`),z=e})(a),Se.init(null!=e?e:{}),Se.willShowPrivacyMessage().then((e=>{Ce=e,Me=!0,N("cmp","initComplete")})),Pe()},willShowPrivacyMessage:()=>Ee.then((()=>{var e,t;return null!==(e=null===(t=Se)||void 0===t?void 0:t.willShowPrivacyMessage())&&void 0!==e&&e})),willShowPrivacyMessageSync:()=>{if(void 0!==Ce)return Ce;throw new Error("CMP has not been initialised. Use the async willShowPrivacyMessage() instead.")},hasInitialised:()=>Me,showPrivacyManager:()=>{var e;Se||console.warn("cmp.showPrivacyManager() was called before the CMP was initialised. This will work but you are probably calling cmp.init() too late."),Ee.then(null===(e=Se)||void 0===e?void 0:e.showPrivacyManager)},version:"10.3.1",__isDisabled:we,__enable:()=>{document.cookie=`${pe}=false`},__disable:()=>{document.cookie=`${pe}=true`}}),Fe=A?()=>x():(ye=window.guCmpHotFix).onConsentChange||(ye.onConsentChange=e=>{const t={fn:e};Q.push(t),te().then((e=>{ee(t,e)})).catch((()=>{}))}),Ie=A?(e,t)=>(console.log(`Server-side call for getConsentFor(${e}, ${JSON.stringify(t)})`,"getConsentFor will always return false server-side"),x(),!1):(_e=window.guCmpHotFix).getConsentFor||(_e.getConsentFor=(e,t)=>{var n;const o=fe[e];if(void 0===o||o===[])throw new Error(`Vendor '${e}' not found, or with no Sourcepoint ID. If it should be added, raise an issue at https://git.io/JUzVL`);if(t.ccpa)return!t.ccpa.doNotSell;if(t.aus)return t.aus.personalisedAdvertising;const a=o.find((e=>{var n;return void 0!==(null===(n=t.tcfv2)||void 0===n?void 0:n.vendorConsents[e])}));if(void 0===a)return console.warn(`No consent returned from Sourcepoint for vendor: '${e}'`),!1;const r=null===(n=t.tcfv2)||void 0===n?void 0:n.vendorConsents[a];return void 0===r?(console.warn(`No consent returned from Sourcepoint for vendor: '${e}'`),!1):r}),Te=/^[A-Z]{2}$/,De=e=>{return t=e,"[object String]"===Object.prototype.toString.call(t)&&Te.test(e);var t};let Oe;const $e=async()=>{if(Oe)return Oe;const t=w.local.get("gu.geo.override");if(De(t))return Oe=t;const i=r({name:"GU_geo_country"});if(i&&De(i))return Oe=i;try{const{country:t}=await fetch("https://api.nextgen.guardianapps.co.uk/geolocation").then((e=>e.json()));if(De(t))return(({name:t,value:r})=>{if(!((e,t)=>o(e)&&o(t))(t,r))throw new Error(`Cookie must not contain invalid characters (space, tab and the following characters: '()<>@,;"/[]?={}') ${t}=${r}`);document.cookie=`${t}=${r}; path=/;${a()}`,e.has(t)&&e.set(t,n(t)[0])})({name:"GU_geo_country",value:t}),Oe=t}catch(e){}return null};let Ne;const je=async()=>$e().then((e=>(Ne=e,e))).catch((e=>(console.log("Error getting location from libs/getLocale"),window.guardian.modules.sentry.reportError(e,"get-country-code"),Ne=Ne||w.local.get("gu.geo.override")||r({name:"GU_geo_country",shouldMemoize:!0}),Ne)));let Ae;const xe=(e,t)=>new Promise(((n,o)=>{var a;const r=document.createElement("script");if(r.src=e,Array.from(document.scripts).some((({src:e})=>r.src===e)))return n(void 0);Object.assign(r,t),r.onload=n,r.onerror=()=>{o(new Error(`Failed to load script ${e}`))};const i=document.scripts[0];null===(a=i.parentNode)||void 0===a||a.insertBefore(r,i)})),Ue=e=>{if(!(window.guardian&&window.guardian.ophan&&window.guardian.ophan.record))throw new Error("window.guardian.ophan.record doesn't exist");window.guardian.ophan.record(e)},Re=(e,t=Ue)=>{t({componentEvent:e})};((e,t,n)=>{const o=()=>{((e,t)=>{const{start:n,end:o}=(e=>{const t=window.performance,n=`${e}-start`,o=`${e}-end`;return t&&t.getEntriesByName?{start:()=>{t.mark(n)},end:()=>{t.mark(o),t.measure(e,n,o),h("dotcom",JSON.stringify(t.getEntriesByName(e)));const a=t.getEntriesByName(e,"measure"),r=a&&a[0]&&a[0].duration||0;return Math.round(r)},clear:()=>{t.clearMarks(n),t.clearMarks(o),t.clearMeasures(e)}}:{start:()=>{},end:()=>0,clear:()=>{}}})(e);n(),t().then((()=>{o()})).catch((()=>{o()}))})("bootCmp",n.bind(null,null))};window.guardian.mustardCut||window.guardian.polyfilled?o():window.guardian.queue.push(o)})(0,0,(async()=>{if(!window.guardian.config.switches.consentManagement)return;const e=r({name:"bwid",shouldMemoize:!0}),{pageViewId:t}=window.guardian.config.ophan;return ke.willShowPrivacyMessage().then((e=>{((e,t,n)=>{const{ga:o}=window;o&&window.performance&&window.performance.now&&o("allEditorialPropertyTracker.send","timing","consent","acquired",Math.round(window.performance.now()),n)})(0,0,e?"new":"existing")})).catch((e=>h("dotcom",`CMP willShowPrivacyMessage - error: ${e}`))),Fe((e=>{if(!e)return;const t={component:{componentType:"CONSENT",products:[],labels:e.tcfv2?["01:TCF.v2",`02:${r({name:"consentUUID"})||""}`,`03:${null===(n=e.tcfv2)||void 0===n?void 0:n.tcString}`]:e.ccpa?["01:CCPA",`04:${r({name:"ccpaUUID"})||""}`,"05:"+(null!==(o=e.ccpa)&&void 0!==o&&o.doNotSell?"true":"false")]:e.aus?["01:AUS",`06:${r({name:"ccpaUUID"})||""}`,`07:${r({name:"consentStatus"})||""}`]:[]},action:"MANAGE_CONSENT"};var n,o;Re(t),Ie("google-analytics",e)?Promise.all([xe("https://www.google-analytics.com/analytics.js"),xe(window.guardian.gaPath)]).then((()=>{h("dotcom","GA script loaded")})).catch((e=>console.error(`GA - error: ${e}`))):window.ga=null})),document.onreadystatechange=()=>{"interactive"!==document.readyState&&"complete"!==document.readyState||(()=>{const e=document.querySelector("a[data-link-name=privacy]");if(!document.querySelector("a[data-link-name=privacy-settings]")&&e){const t=e.parentElement;t&&(async()=>{if(void 0===Ae){const e="US"===await je();Ae={ccpa:e,tcfv2:!e}}return Ae})().then((n=>{const o=e.cloneNode(!1);o.setAttribute("data-link-name","privacy-settings"),o.setAttribute("href","#"),o.innerHTML=n.ccpa?"California resident â€“ Do Not Sell":"Privacy settings";const a=t.cloneNode(!1);a.appendChild(o),t.insertAdjacentElement("beforebegin",a),o.addEventListener("click",ke.showPrivacyManager)})).catch((e=>console.error(`privacy settings - error: ${e}`)))}})()},ke.init({pubData:{platform:"next-gen",browserId:null!=e?e:void 0,pageViewId:t},country:await je()||void 0}),h("dotcom","CMP initialised"),Promise.resolve()}))})();
//# sourceMappingURL=bootCmp.b67f5913e883f31b4db5.js.map