(()=>{var e={7135:(e,t,n)=>{e.exports=n(6248)},6248:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),i=new M(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw a;return F()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?v:d,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f="suspendedStart",d="suspendedYield",p="executing",v="completed",h={};function w(){}function g(){}function m(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(O([])));_&&_!==n&&r.call(_,a)&&(y=_);var k=m.prototype=w.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:F}}function F(){return{value:t,done:!0}}return g.prototype=m,u(k,"constructor",m),u(m,"constructor",g),g.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,a){var i=t.apply(n,r);function c(t){e(i,o,a,c,u,"next",t)}function u(t){e(i,o,a,c,u,"throw",t)}c(void 0)}))}}var r=n(7135),o=n.n(r);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=new Map,s=/[()<>@,;"\\/[\]?={} \t]/g,l=function(e){var t="".concat(e,"=");return document.cookie.split(";").reduce((function(e,n){var r=n.trim();return r.startsWith(t)&&e.push(r.substring(t.length,r.length)),e}),[])},f=function(e){return!s.test(e)},d=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.isCrossSubdomain,a=void 0!==o&&o,i=document.domain||"";return"localhost"===i||null!==(e=window.guardian)&&void 0!==e&&null!==(t=e.config)&&void 0!==t&&null!==(n=t.page)&&void 0!==n&&n.isPreview?i:a?[""].concat(c(i.split(".").slice(-2))).join("."):i.replace(/^(www|m\.code|dev|m)\./,".")},p=function(e){var t=e.name,n=e.value;if(!function(e,t){return f(e)&&f(t)}(t,n))throw new Error("".concat("Cookie must not contain invalid characters (space, tab and the following characters: '()<>@,;\"/[]?={}')"," ").concat(t,"=").concat(n));document.cookie="".concat(t,"=").concat(n,"; path=/;").concat(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isCrossSubdomain,t=d({isCrossSubdomain:void 0!==e&&e});return"localhost"===t?"":" domain=".concat(t,";")}()),u.has(t)&&u.set(t,l(t)[0])},v=function(e){var t,n=e.name,r=e.shouldMemoize,o=void 0!==r&&r;if(u.has(n))return null!==(t=u.get(n))&&void 0!==t?t:null;var a=l(n);return a.length>0?(o&&u.set(n,a[0]),a[0]):null};function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var m,y,b,_,k=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},S=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},x=function(){function e(t){h(this,e),m.set(this,void 0);try{var n=(new Date).toString();t.setItem(n,n);var r=t.getItem(n)==n;t.removeItem(n),r&&k(this,m,t,"f")}catch(e){}}return g(e,[{key:"isAvailable",value:function(){return Boolean(S(this,m,"f"))}},{key:"get",value:function(e){try{var t,n,r=JSON.parse(null!==(t=null===(n=S(this,m,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:""),o=r.value,a=r.expires;return a&&new Date>new Date(a)?(this.remove(e),null):o}catch(e){return null}}},{key:"set",value:function(e,t,n){var r;return null===(r=S(this,m,"f"))||void 0===r?void 0:r.setItem(e,JSON.stringify({value:t,expires:n}))}},{key:"remove",value:function(e){var t;return null===(t=S(this,m,"f"))||void 0===t?void 0:t.removeItem(e)}},{key:"clear",value:function(){var e;return null===(e=S(this,m,"f"))||void 0===e?void 0:e.clear()}},{key:"getRaw",value:function(e){var t,n;return null!==(t=null===(n=S(this,m,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:null}},{key:"setRaw",value:function(e,t){var n;return null===(n=S(this,m,"f"))||void 0===n?void 0:n.setItem(e,t)}}]),e}();m=new WeakMap;var E,P=new(_=function(){function e(){h(this,e),y.set(this,void 0),b.set(this,void 0)}return g(e,[{key:"local",get:function(){return k(this,y,S(this,y,"f")||new x(localStorage),"f")}},{key:"session",get:function(){return k(this,b,S(this,b,"f")||new x(sessionStorage),"f")}}]),e}(),y=new WeakMap,b=new WeakMap,_),C="gu.logger",M={common:{background:"#052962",font:"#ffffff"},commercial:{background:"#77EEAA",font:"#004400"},cmp:{background:"#FF6BB5",font:"#2F0404"},dotcom:{background:"#000000",font:"#ff7300"},design:{background:"#185E36",font:"#FFF4F2"},tx:{background:"#2F4F4F",font:"#FFFFFF"}},O=function(e){var t=M[e],n=t.background,r=t.font;return"background: ".concat(n,"; color: ").concat(r,"; padding: 2px 3px; border-radius:3px")},F=function(e){var t;if((P.local.get(C)||"").includes(e)){for(var n=[O("common"),"",O(e),""],r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=console).log.apply(t,["%c@guardian%c %c".concat(e,"%c")].concat(n,o))}};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}"undefined"!=typeof window&&(window.guardian||(window.guardian={}),(E=window.guardian).logger||(E.logger={subscribeTo:function(e){var t=P.local.get(C)?P.local.get(C).split(","):[];t.includes(e)||t.push(e),P.local.set(C,t.join(",")),F(e,"🔔 Subscribed, hello!")},unsubscribeFrom:function(e){F(e,"🔕 Unsubscribed, good-bye!");var t=P.local.get(C).split(",").filter((function(t){return t!==e}));P.local.set(C,t.join(","))},teams:function(){return Object.keys(M)}}));var A,L,N,D,U=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},R=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},G=function(){function e(t){h(this,e),A.set(this,void 0);try{var n=(new Date).toString();t.setItem(n,n);var r=t.getItem(n)==n;t.removeItem(n),r&&U(this,A,t,"f")}catch(e){}}return g(e,[{key:"isAvailable",value:function(){return Boolean(R(this,A,"f"))}},{key:"get",value:function(e){try{var t,n,r=JSON.parse(null!==(t=null===(n=R(this,A,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:""),o=r.value,a=r.expires;return a&&new Date>new Date(a)?(this.remove(e),null):o}catch(e){return null}}},{key:"set",value:function(e,t,n){var r;return null===(r=R(this,A,"f"))||void 0===r?void 0:r.setItem(e,JSON.stringify({value:t,expires:n}))}},{key:"remove",value:function(e){var t;return null===(t=R(this,A,"f"))||void 0===t?void 0:t.removeItem(e)}},{key:"clear",value:function(){var e;return null===(e=R(this,A,"f"))||void 0===e?void 0:e.clear()}},{key:"getRaw",value:function(e){var t,n;return null!==(t=null===(n=R(this,A,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:null}},{key:"setRaw",value:function(e,t){var n;return null===(n=R(this,A,"f"))||void 0===n?void 0:n.setItem(e,t)}}]),e}();A=new WeakMap;var H,J=new(D=function(){function e(){h(this,e),L.set(this,void 0),N.set(this,void 0)}return g(e,[{key:"local",get:function(){return U(this,L,R(this,L,"f")||new G(localStorage),"f")}},{key:"session",get:function(){return U(this,N,R(this,N,"f")||new G(sessionStorage),"f")}}]),e}(),L=new WeakMap,N=new WeakMap,D),B="gu.logger",W={common:{background:"#052962",font:"#ffffff"},commercial:{background:"#77EEAA",font:"#004400"},cmp:{background:"#FF6BB5",font:"#2F0404"},dotcom:{background:"#000000",font:"#ff7300"},design:{background:"#185E36",font:"#FFF4F2"},tx:{background:"#2F4F4F",font:"#FFFFFF"}},V=function(e){var t=W[e],n=t.background,r=t.font;return"background: ".concat(n,"; color: ").concat(r,"; padding: 2px 3px; border-radius:3px")},z=function(e){var t;if((J.local.get(B)||"").includes(e)){for(var n=[V("common"),"",V(e),""],r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=console).log.apply(t,["%c@guardian%c %c".concat(e,"%c")].concat(n,o))}};"undefined"!=typeof window&&(window.guardian||(window.guardian={}),(H=window.guardian).logger||(H.logger={subscribeTo:function(e){var t=J.local.get(B)?J.local.get(B).split(","):[];t.includes(e)||t.push(e),J.local.set(B,t.join(",")),z(e,"🔔 Subscribed, hello!")},unsubscribeFrom:function(e){z(e,"🔕 Unsubscribed, good-bye!");var t=J.local.get(B).split(",").filter((function(t){return t!==e}));J.local.set(B,t.join(","))},teams:function(){return Object.keys(W)}}));var q,Y,$,Z,K=function(e){var t,n;null===(t=window.performance)||void 0===t||null===(n=t.mark)||void 0===n||n.call(t,e),z("cmp","[event]",e)},Q="undefined"==typeof window,X=function(){console.warn("This is a server-side version of the @guardian/consent-management-platform","No consent signals will be received.")},ee=function(e){return function(){return X(),e}},te={__disable:X,__enable:ee(!1),__isDisabled:ee(!1),hasInitialised:ee(!1),init:X,showPrivacyManager:X,version:"n/a",willShowPrivacyMessage:ee(Promise.resolve(!1)),willShowPrivacyMessageSync:ee(!1)},ne=function(){return void 0===q&&(q=!!Q||window.location.host.endsWith(".theguardian.com")),q},re=1257,oe=ne()?"https://sourcepoint.theguardian.com":"https://cdn.privacy-mgmt.com",ae=function(e){var t=e.live,n=e.test;return ne()?t:n},ie=function(){return e="getUSPData",new Promise((function(t,n){window.__uspapi?window.__uspapi(e,1,(function(r,o){return o?t(r):n(new Error("Unable to get ".concat(e," data")))})):n(new Error("No __uspapi found on window"))}));var e},ce=function(){var e=t(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:return t=e.sent,n="Y"===t.uspString.charAt(2),e.abrupt("return",{personalisedAdvertising:!n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){return e="getUSPData",new Promise((function(t,n){window.__uspapi?window.__uspapi(e,1,(function(r,o){return o?t(r):n(new Error("Unable to get ".concat(e," data")))})):n(new Error("No __uspapi found on window"))}));var e},se=function(){var e=t(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:return t=e.sent,e.abrupt("return",{doNotSell:"Y"===t.uspString.charAt(2)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){return Y},fe=function(e){return new Promise((function(t,n){window.__tcfapi?window.__tcfapi(e,2,(function(r,o){return o?t(r):n(new Error("Unable to get ".concat(e," data")))})):n(new Error("No __tcfapi found on window"))}))},de={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,10:!1},pe=function(){var e=t(o().mark((function e(){var t,n,r,a,c,u,s,l,f,d,p,v,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fe("getTCData"),fe("getCustomVendorConsents")]);case 2:if(t=e.sent,w=2,n=function(e){if(Array.isArray(e))return e}(o=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(o,w)||i(o,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],a=n[1],void 0!==r){e.next=9;break}throw u=null!==(c=le())&&void 0!==c?c:"undefined",new Error("No TC Data found with current framework: ".concat(u));case 9:return s=I(I({},de),r.purpose.consents),l=r.eventStatus,f=r.gdprApplies,d=r.tcString,p=r.addtlConsent,v=a.grants,h=Object.keys(v).sort().reduce((function(e,t){return I(I({},e),{},j({},t,v[t].vendorGrant))}),{}),e.abrupt("return",{consents:s,eventStatus:l,vendorConsents:h,addtlConsent:p,gdprApplies:f,tcString:d});case 14:case"end":return e.stop()}var o,w}),e)})));return function(){return e.apply(this,arguments)}}(),ve=[],he=function(e){var t;return"cmpuishown"===(null===(t=e.tcfv2)||void 0===t?void 0:t.eventStatus)},we=function(e,t){if(!he(t)){var n=JSON.stringify(t);n!==e.lastState&&(e.fn(t),e.lastState=n)}},ge=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__uspapi){e.next=10;break}if("aus"!==le()){e.next=6;break}return e.next=4,ce();case 4:return e.t0=e.sent,e.abrupt("return",{aus:e.t0});case 6:return e.next=8,se();case 8:return e.t1=e.sent,e.abrupt("return",{ccpa:e.t1});case 10:if(!window.__tcfapi){e.next=15;break}return e.next=13,pe();case 13:return e.t2=e.sent,e.abrupt("return",{tcfv2:e.t2});case 15:throw new Error("no IAB consent framework found on the page");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){ge().then((function(e){he(e)||ve.forEach((function(t){return we(t,e)}))}))},ye=function(){var e=window,t=document;function n(t){var n="string"==typeof t.data;try{var r=n?JSON.parse(t.data):t.data;if(r.__cmpCall){var o=r.__cmpCall;e.__uspapi(o.command,o.parameter,(function(e,r){var a={__cmpReturn:{returnValue:e,success:r,callId:o.callId}};t.source.postMessage(n?JSON.stringify(a):a,"*")}))}}catch(r){}}!function n(){if(!e.frames.__uspapiLocator)if(t.body){var r=t.body,o=t.createElement("iframe");o.style.cssText="display:none",o.name="__uspapiLocator",r.appendChild(o)}else setTimeout(n,5)}(),"function"!=typeof __uspapi&&(e.__uspapi=function(){var e=arguments;if(__uspapi.a=__uspapi.a||[],!e.length)return __uspapi.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(e))},__uspapi.msgHandler=n,e.addEventListener("message",n,!1))},be=new Promise((function(e){$=e}));new Promise((function(e){Z=e}));var _e,ke,Se,xe,Ee,Pe,Ce,Me={live:"https://au.theguardian.com",test:"https://au.theguardian.com"},Oe={init:function(e){K("cmp-aus-init"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ye(),window._sp_ccpa)throw new Error("Sourcepoint CCPA global (window._sp_ccpa) is already defined!");me(),window._sp_ccpa={config:{baseEndpoint:oe,accountId:re,getDnsMsgMms:!0,alwaysDisplayDns:!1,siteHref:ae(Me),targetingParams:{framework:"aus"},pubData:I(I({},e),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:function(){K("cmp-aus-got-consent"),setTimeout(me,0)},onMessageReady:function(){K("cmp-aus-ui-displayed")},onMessageReceiveData:function(e){$(0!==e.msg_id),Z()},onMessageChoiceSelect:function(e,t){11!==t&&13!==t&&15!==t||setTimeout(me,0)}}}};var t=document.createElement("script");t.id="sourcepoint-aus-lib",t.src="".concat(oe,"/ccpa.js"),document.body.appendChild(t)}(e)},willShowPrivacyMessage:function(){return be},showPrivacyManager:function(){var e,t;null===(e=window._sp_ccpa)||void 0===e||null===(t=e.loadPrivacyManagerModal)||void 0===t||t.call(e,null,"5f859e174ed5055e72ce26a6")}},Fe=function(){var e=window,t=document;function n(t){var n="string"==typeof t.data;try{var r=n?JSON.parse(t.data):t.data;if(r.__cmpCall){var o=r.__cmpCall;e.__uspapi(o.command,o.parameter,(function(e,r){var a={__cmpReturn:{returnValue:e,success:r,callId:o.callId}};t.source.postMessage(n?JSON.stringify(a):a,"*")}))}}catch(r){}}!function n(){if(!e.frames.__uspapiLocator)if(t.body){var r=t.body,o=t.createElement("iframe");o.style.cssText="display:none",o.name="__uspapiLocator",r.appendChild(o)}else setTimeout(n,5)}(),"function"!=typeof __uspapi&&(e.__uspapi=function(){var e=arguments;if(__uspapi.a=__uspapi.a||[],!e.length)return __uspapi.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(e))},__uspapi.msgHandler=n,e.addEventListener("message",n,!1))},je=new Promise((function(e){_e=e})),Te={live:null,test:"https://test.theguardian.com"},Ie={init:function(e){K("cmp-ccpa-init"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Fe(),window._sp_ccpa)throw new Error("Sourcepoint CCPA global (window._sp_ccpa) is already defined!");me(),window._sp_ccpa={config:{baseEndpoint:oe,accountId:re,getDnsMsgMms:!0,alwaysDisplayDns:!1,siteHref:ae(Te),targetingParams:{framework:"ccpa"},pubData:I(I({},e),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:function(){K("cmp-ccpa-got-consent"),setTimeout(me,0)},onMessageReady:function(){K("cmp-ccpa-ui-displayed")},onMessageReceiveData:function(e){_e(0!==e.msg_id)},onMessageChoiceSelect:function(e,t){11!==t&&13!==t&&15!==t||setTimeout(me,0)}}}};var t=document.createElement("script");t.id="sourcepoint-ccpa-lib",t.src="".concat(oe,"/ccpa.js"),document.body.appendChild(t)}(e)},willShowPrivacyMessage:function(){return je},showPrivacyManager:function(){var e,t;null===(e=window._sp_ccpa)||void 0===e||null===(t=e.loadPrivacyManagerModal)||void 0===t||t.call(e,null,"5eba7ef78c167c47ca8b433d")}},Ae="gu-cmp-disabled",Le=function(){return new RegExp("".concat(Ae,"=true(\\W+|$)")).test(document.cookie)},Ne={a9:["5f369a02b8e05c308701f829"],acast:["5f203dcb1f0dea790562e20f"],braze:["5ed8c49c4b8ce4571c7ad801"],comscore:["5efefe25b8e05c06542b2a77"],fb:["5e7e1298b8e05c54a85c52d2"],"google-analytics":["5e542b3a4cd8884eb41b5a72"],"google-mobile-ads":["5f1aada6b8e05c306c0597d7"],"google-tag-manager":["5e952f6107d9d20c88e7c975"],googletag:["5f1aada6b8e05c306c0597d7"],ias:["5e7ced57b8e05c485246ccf3"],inizio:["5e37fc3e56a5e6615502f9c9"],ipsos:["5f745ab96f3aae0163740409"],lotame:["5ed6aeb1b8e05c241a63c71f"],nielsen:["5ef5c3a5b8e05c69980eaa5b"],ophan:["5f203dbeeaaaa8768fd3226a"],permutive:["5eff0d77969bfa03746427eb"],prebid:["5f92a62aa22863685f4daa4c"],redplanet:["5f199c302425a33f3f090f51"],remarketing:["5ed0eb688a76503f1016578f"],sentry:["5f0f39014effda6e8bbd2006"],teads:["5eab3d5ab8e05c2bbe33f399"],twitter:["5e71760b69966540e4554f01"],"youtube-player":["5e7ac3fae30e7d1bc1ebf5e8"]},De=function(){!function(){for(var e,t="__tcfapiLocator",n=[],r=window;r;){try{if(r.frames[t]){e=r;break}}catch(e){}if(r===window.top)break;r=r.parent}e||(function e(){var n=r.document,o=!!r.frames[t];if(!o)if(n.body){var a=n.createElement("iframe");a.style.cssText="display:none",a.name=t,n.body.appendChild(a)}else setTimeout(e,5);return!o}(),r.__tcfapi=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(!r.length)return n;if("setGdprApplies"===r[0])r.length>3&&2===parseInt(r[1],10)&&"boolean"==typeof r[3]&&(e=r[3],"function"==typeof r[2]&&r[2]("set",!0));else if("ping"===r[0]){var a={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof r[2]&&r[2](a)}else n.push(r)},r.addEventListener("message",(function(e){var t="string"==typeof e.data,n={};try{n=t?JSON.parse(e.data):e.data}catch(e){}var r=n.__tcfapiCall;r&&window.__tcfapi(r.command,r.version,(function(n,o){var a={__tcfapiReturn:{returnValue:n,success:o,callId:r.callId}};t&&(a=JSON.stringify(a)),e.source.postMessage(a,"*")}),r.parameter)}),!1))}()},Ue=new Promise((function(e){ke=e})),Re={live:null,test:"https://test.theguardian.com"},Ge={init:function(e){K("cmp-tcfv2-init"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(De(),window._sp_)throw new Error("Sourcepoint TCF global (window._sp_) is already defined!");me(),window._sp_={config:{baseEndpoint:oe,accountId:re,propertyHref:ae(Re),targetingParams:{framework:"tcfv2"},pubData:I(I({},e),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:function(){K("cmp-tcfv2-got-consent"),setTimeout(me,0)},onMessageReady:function(){K("cmp-tcfv2-ui-displayed")},onMessageReceiveData:function(e){ke(0!==e.messageId)},onMessageChoiceSelect:function(e,t){11!==t&&13!==t&&15!==t||setTimeout(me,0)}}}};var t=document.createElement("script");t.id="sourcepoint-tcfv2-lib",t.src="".concat(oe,"/wrapperMessagingWithoutDetection.js"),document.body.appendChild(t)}(e)},willShowPrivacyMessage:function(){return Ue},showPrivacyManager:function(){var e,t;null===(e=window._sp_)||void 0===e||null===(t=e.loadPrivacyManagerModal)||void 0===t||t.call(e,106842)}};Q||window.guCmpHotFix||(window.guCmpHotFix={});var He,Je,Be,We,Ve,ze,qe=!1,Ye=new Promise((function(e){He=e})),$e=Q?te:(Se=window.guCmpHotFix).cmp||(Se.cmp={init:function(e){var t=e.pubData,n=e.country;if(!Le()&&!Q)if(window.guCmpHotFix.initialised){var r,o;"10.3.1"!==(null===(r=window.guCmpHotFix.cmp)||void 0===r?void 0:r.version)&&console.warn("Two different versions of the CMP are running:",["10.3.1",null===(o=window.guCmpHotFix.cmp)||void 0===o?void 0:o.version])}else{if(window.guCmpHotFix.initialised=!0,void 0===n)throw new Error("CMP initialised without `country` property. A 2-letter, ISO ISO_3166-1 country code is required.");var a=function(e){var t;switch(e){case"US":t="ccpa";break;case"AU":t="aus";break;default:t="tcfv2"}return t}(n);switch(a){case"ccpa":Pe=Ie;break;case"aus":Pe=Oe;break;default:Pe=Ge}!function(e){z("cmp","Framework set to ".concat(e)),Y=e}(a),Pe.init(null!=t?t:{}),Pe.willShowPrivacyMessage().then((function(e){Ce=e,qe=!0,z("cmp","initComplete")})),He()}},willShowPrivacyMessage:function(){return Ye.then((function(){var e,t;return null!==(e=null===(t=Pe)||void 0===t?void 0:t.willShowPrivacyMessage())&&void 0!==e&&e}))},willShowPrivacyMessageSync:function(){if(void 0!==Ce)return Ce;throw new Error("CMP has not been initialised. Use the async willShowPrivacyMessage() instead.")},hasInitialised:function(){return qe},showPrivacyManager:function(){var e;Pe||console.warn("cmp.showPrivacyManager() was called before the CMP was initialised. This will work but you are probably calling cmp.init() too late."),Ye.then(null===(e=Pe)||void 0===e?void 0:e.showPrivacyManager)},version:"10.3.1",__isDisabled:Le,__enable:function(){document.cookie="".concat(Ae,"=false")},__disable:function(){document.cookie="".concat(Ae,"=true")}}),Ze=Q?function(){return X()}:(xe=window.guCmpHotFix).onConsentChange||(xe.onConsentChange=function(e){var t={fn:e};ve.push(t),ge().then((function(e){we(t,e)})).catch((function(){}))}),Ke=Q?function(e,t){return console.log("Server-side call for getConsentFor(".concat(e,", ").concat(JSON.stringify(t),")"),"getConsentFor will always return false server-side"),X(),!1}:(Ee=window.guCmpHotFix).getConsentFor||(Ee.getConsentFor=function(e,t){var n,r=Ne[e];if(void 0===r||r===[])throw new Error("Vendor '".concat(e,"' not found, or with no Sourcepoint ID. ")+"If it should be added, raise an issue at https://git.io/JUzVL");if(t.ccpa)return!t.ccpa.doNotSell;if(t.aus)return t.aus.personalisedAdvertising;var o=r.find((function(e){var n;return void 0!==(null===(n=t.tcfv2)||void 0===n?void 0:n.vendorConsents[e])}));if(void 0===o)return console.warn("No consent returned from Sourcepoint for vendor: '".concat(e,"'")),!1;var a=null===(n=t.tcfv2)||void 0===n?void 0:n.vendorConsents[o];return void 0===a?(console.warn("No consent returned from Sourcepoint for vendor: '".concat(e,"'")),!1):a}),Qe=/^[A-Z]{2}$/,Xe=function(e){return t=e,"[object String]"===Object.prototype.toString.call(t)&&Qe.test(e);var t},et=function(){var e=t(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Je){e.next=2;break}return e.abrupt("return",Je);case 2:if(t=P.local.get("gu.geo.override"),!Xe(t)){e.next=5;break}return e.abrupt("return",Je=t);case 5:if(!(n=v({name:"GU_geo_country"}))||!Xe(n)){e.next=8;break}return e.abrupt("return",Je=n);case 8:return e.prev=8,e.next=11,fetch("https://api.nextgen.guardianapps.co.uk/geolocation").then((function(e){return e.json()}));case 11:if(r=e.sent,a=r.country,!Xe(a)){e.next=16;break}return p({name:"GU_geo_country",value:a}),e.abrupt("return",Je=a);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(8);case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et().then((function(e){return Be=e,e})).catch((function(e){return console.log("Error getting location from libs/getLocale"),window.guardian.modules.sentry.reportError(e,"get-country-code"),Be=Be||P.local.get("gu.geo.override")||v({name:"GU_geo_country",shouldMemoize:!0})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=t(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==We){e.next=6;break}return e.next=3,tt();case 3:e.t0=e.sent,t="US"===e.t0,We={ccpa:t,tcfv2:!t};case 6:return e.abrupt("return",We);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt="privacy-settings",ot=function(){var e=document.querySelector("a[data-link-name=privacy]");if(!document.querySelector("a[data-link-name=".concat(rt,"]"))&&e){var t=e.parentElement;t&&nt().then((function(n){var r=e.cloneNode(!1);r.setAttribute("data-link-name",rt),r.setAttribute("href","#"),r.innerHTML=n.ccpa?"California resident – Do Not Sell":"Privacy settings";var o=t.cloneNode(!1);o.appendChild(r),t.insertAdjacentElement("beforebegin",o),r.addEventListener("click",$e.showPrivacyManager)})).catch((function(e){return console.error("privacy settings - error: ".concat(e))}))}},at=function(e,t){return new Promise((function(n,r){var o,a=document.createElement("script");if(a.src=e,Array.from(document.scripts).some((function(e){var t=e.src;return a.src===t})))return n(void 0);Object.assign(a,t),a.onload=n,a.onerror=function(){r(new Error("Failed to load script ".concat(e)))};var i=document.scripts[0];null===(o=i.parentNode)||void 0===o||o.insertBefore(a,i)}))},it=function(e){if(!(window.guardian&&window.guardian.ophan&&window.guardian.ophan.record))throw new Error("window.guardian.ophan.record doesn't exist");window.guardian.ophan.record(e)},ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it;t({componentEvent:e})};Ve=function(){var e=t(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.guardian.config.switches.consentManagement){e.next=2;break}return e.abrupt("return");case 2:return t=v({name:"bwid",shouldMemoize:!0}),n=window.guardian.config.ophan.pageViewId,$e.willShowPrivacyMessage().then((function(e){var t,n;t=e?"new":"existing",(n=window.ga)&&window.performance&&window.performance.now&&n("allEditorialPropertyTracker.send","timing","consent","acquired",Math.round(window.performance.now()),t)})).catch((function(e){return F("dotcom","CMP willShowPrivacyMessage - error: ".concat(e))})),Ze((function(e){if(e){var t={component:{componentType:"CONSENT",products:[],labels:function(){if(e.tcfv2){var t,n=v({name:"consentUUID"})||"",r=null===(t=e.tcfv2)||void 0===t?void 0:t.tcString;return["01:TCF.v2","02:".concat(n),"03:".concat(r)]}if(e.ccpa){var o,a=v({name:"ccpaUUID"})||"",i=null!==(o=e.ccpa)&&void 0!==o&&o.doNotSell?"true":"false";return["01:CCPA","04:".concat(a),"05:".concat(i)]}if(e.aus){var c=v({name:"ccpaUUID"})||"",u=v({name:"consentStatus"})||"";return["01:AUS","06:".concat(c),"07:".concat(u)]}return[]}()},action:"MANAGE_CONSENT"};ct(t),Ke("google-analytics",e)?Promise.all([at("https://www.google-analytics.com/analytics.js"),at(window.guardian.gaPath)]).then((function(){F("dotcom","GA script loaded")})).catch((function(e){return console.error("GA - error: ".concat(e))})):window.ga=null}})),document.onreadystatechange=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||ot()},e.t0=$e,e.t1={platform:"next-gen",browserId:null!=t?t:void 0,pageViewId:n},e.next=11,tt();case 11:if(e.t2=e.sent,e.t2){e.next=14;break}e.t2=void 0;case 14:return e.t3=e.t2,e.t4={pubData:e.t1,country:e.t3},e.t0.init.call(e.t0,e.t4),F("dotcom","CMP initialised"),e.abrupt("return",Promise.resolve());case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){!function(e,t){var n=function(e){var t=window.performance,n="".concat(e,"-start"),r="".concat(e,"-end");return t&&t.getEntriesByName?{start:function(){t.mark(n)},end:function(){t.mark(r),t.measure(e,n,r),F("dotcom",JSON.stringify(t.getEntriesByName(e)));var o=t.getEntriesByName(e,"measure"),a=o&&o[0]&&o[0].duration||0;return Math.round(a)},clear:function(){t.clearMarks(n),t.clearMarks(r),t.clearMeasures(e)}}:{start:function(){},end:function(){return 0},clear:function(){}}}(e),r=n.start,o=n.end;r(),t().then((function(){o()})).catch((function(){o()}))}("bootCmp",Ve.bind(null,null))},window.guardian.mustardCut||window.guardian.polyfilled?ze():window.guardian.queue.push(ze)})()})();
//# sourceMappingURL=bootCmp.legacy.401beda5dc90513173df.js.map