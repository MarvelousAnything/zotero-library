jQuery(document).ready(function(){if(jQuery(".non-city-story-widget").length>0){var state_name="";var city_name="";var city_array=["delhi","mumbai","pune","chandigarh","lucknow","kolkata","ahmedabad","jaipur","chennai","bangalore","hyderabad"];var usergeolocation=sessionStorage.getItem("ua_geoip_location");var city_data=jQuery.parseJSON(usergeolocation);if(city_data!==null&&typeof city_data.city!=="undefined"){city_name=city_data.city.toLowerCase();state_name=city_data.state.toLowerCase();if("new delhi"===city_name){city_name="delhi"}if("bengaluru"===city_name){city_name="bangalore"}if(jQuery.inArray(city_name,city_array)<0){city_name="other city"}}else{api_domain_js="ua.indianexpress.com";if("object"==typeof api_domain&&false!==api_domain.hasOwnProperty("value")){api_domain_js=api_domain.value}jQuery.ajax({url:"https://"+api_domain_js+"/api/geoip/resolve",type:"GET",dataType:"json",beforeSend:function(xhr){xhr.setRequestHeader("origin","https://"+location.hostname)},success:function(response){if(response!==null&&typeof response.city!=="undefined"){city_name=response.city.toLowerCase();state_name=response.state.toLowerCase();if("new delhi"===city_name){city_name="delhi"}if("bengaluru"===city_name){city_name="bangalore"}}else{var city_name="other city"}if(jQuery.inArray(city_name,city_array)<0){city_name="other city"}jQuery.ajax({type:"POST",dataType:"json",url:custom_city_data.ajax_url,data:{action:"ie_location_non_city_data",user_city:city_name,user_state:state_name,city_ajax_nonce:custom_city_data.city_security},success:function(response){var response=jQuery.parseJSON(JSON.stringify(response));jQuery(".non-city-story-widget").append(response.data)}})}})}jQuery.ajax({type:"POST",dataType:"json",url:custom_city_data.ajax_url,data:{action:"ie_location_non_city_data",user_city:city_name,user_state:state_name,city_ajax_nonce:custom_city_data.city_security},success:function(response){var response=jQuery.parseJSON(JSON.stringify(response));jQuery(".non-city-story-widget").append(response.data)}})}});
