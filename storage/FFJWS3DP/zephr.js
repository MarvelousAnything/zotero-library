/*! For license information please see zephr.bundle.min.js.LICENSE.txt */
!function(){"use strict";function e(e){const t=document.documentElement,o=document.body;if(!0===e){if(t.scrollHeight>t.offsetHeight){const e=t.scrollTop?t.scrollTop:o.scrollTop;t.classList.add("no-scroll"),t.style.top="".concat(-e,"px")}}else{const e=-parseInt(t.style.top,10);t.classList.remove("no-scroll"),t.scrollTop=e,o.scrollTop=e}}function t(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)e[n]=o[n]}return e}var o=function e(o,n){function r(e,r,s){if("undefined"!=typeof document){"number"==typeof(s=t({},n,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var c in s)s[c]&&(i+="; "+c,!0!==s[c]&&(i+="="+s[c].split(";")[0]));return document.cookie=e+"="+o.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},r=0;r<t.length;r++){var s=t[r].split("="),i=s.slice(1).join("=");try{var c=decodeURIComponent(s[0]);if(n[c]=o.read(i,c),e===c)break}catch(e){}}return e?n[e]:n}},remove:function(e,o){r(e,"",t({},o,{expires:-1}))},withAttributes:function(o){return e(this.converter,t({},this.attributes,o))},withConverter:function(o){return e(t({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(o)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),n=o;const r={ls:window.localStorage,isLsAvailable(){const e="test";try{return r.ls.setItem(e,e),r.ls.removeItem(e),!0}catch(e){return this.throwError(e),!1}},throwError(e,t="error"){console[t]("[NYP Storage] An error has occurred: ".concat(e))},set(e,t,o){const s=o;let i=t;if(void 0!==o){if("object"!=typeof o)return this.throwError('The "attributes" parameter must be an object.',"warn"),!1;s.value=t,i=s}if(!r.isLsAvailable())return this.throwError("Local Storage is not available, action was completed using cookies","warn"),n.set(e,t,o);try{return this.ls.setItem(e,JSON.stringify(i)),!0}catch(e){return this.throwError(e),!1}},get(e,t=!0){if(!r.isLsAvailable())return this.throwError("Local Storage is not available, action was completed using cookies","warn"),n.get(e);try{return t?JSON.parse(this.ls.getItem(e)):this.ls.getItem(e)}catch(e){return this.throwError(e),!1}},remove(e){if(!r.isLsAvailable())return this.throwError("Local Storage is not available, tried removing via Cookies."),n.remove(e),!1;try{return this.ls.removeItem(e),!0}catch(e){return this.throwError(e),!1}},hasCookie:e=>void 0!==n.get(e)||!1};var s=r;const i="nyp_zephr",c="__all";function a(){let e=s.get(i);return e||(e={}),{subscribed:[],suppressed:{},suppressedWhitelist:[],...e}}function l(e){s.set(i,e)}function p(){const e=Math.floor(Date.now()/1e3),t=a();let{suppressedWhitelist:o=[]}=t;if(!o.length)return!1;const[n="",r=0]=o;return r<=e?(o=[],l(t),!1):n}function u(e=!1){e||(e=c);const t=a(),{suppressed:o=[]}=t,n=Math.floor(Date.now()/1e3),r=p();return!((!r||e===c||r===e)&&(void 0===o[e]||o[e]<=n&&(delete o[e],l(t),1)))}const d=document.documentElement.clientWidth<=640;function h(e,t,o,n){const{fireToEmbed:r=console.error}=window.zephr;r(e,{success:t,message:o,isMobile:d,object:"string"==typeof n?n.replace("zephr:event:",""):n})}function w(e,t,o,n="",r=""){let s=e||n;r&&r.length||(r="Flyout: "),s?s.startsWith("flyout ")?s=s.replace(/-/g," ").replace(/^(.)|\s+(.)/g,(e=>e.toUpperCase())).replace(/^Flyout /,"").replace(/ Left$/,"").replace(/ Right$/,""):s.startsWith("pencil-unit ")&&(s=s.replace("pencil-unit ","").trim()):s="Template name not defined - Zephr",s="".concat(r).concat(s),"function"==typeof window.ga&&window.ga("send","event",s,t,o)}function m(e){const{email:t="",event:o,iframeId:n="",nypPhone:r="",maropostsource:s="",experienceActionId:i="",zephrComponent:c="",selectedLists:p={},towersource:u="nypost"}=e;let{lists:d="",source:m="",model:{templateName:f=""}={}}=e;const{model:{GAPrefix:v=""}={}}=e;d=function(e){return e.split(",").map((e=>e.trim())).filter((e=>e.length>1)).join(",")}(d),m=m||s,t&&d?(f=f||i||c,async function(e,t){try{const o=await fetch("https://developer.nypost.com/temp/maropost/webhooks/validate-email/",{body:"email=".concat(encodeURIComponent(e),"&tower_source=").concat(encodeURIComponent(t)),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"});if(!o.ok)return!0;const{pass:n=!0}=await o.json();return n}catch(e){return!0}}(t,u).then((s=>{if(s){!async function(e,t,o,n,r,s){const{nypZephr:{nonce:i=""}={}}=window,c=r.hasOwnProperty("trackingId")?r.trackingId:"",a=await fetch("/wp-json/nypost-zephr/v1/newsletters/",{body:(l={email:e,subscribe:t,_wpnonce:i,nypPhone:o,source:n,tpEvent:c},Object.keys(l).reduce(((e,t)=>[...e,"".concat(t,"=").concat(encodeURIComponent(l[t]))]),[]).join("&")),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});var l;if(!a.ok)return void h(s,!1,"An error has ocurred.",r.event);const{status:p=!1}=await a.json()||{};p?h(s,!0,"Success",r.event):h(s,!1,"An error has ocurred.",r.event)}(t,d,r,m,e,n),window.newslettersConverted=window.newslettersConverted||[];const s=Object.values(p).filter((e=>!window.newslettersConverted.includes(e)));w(f,"newsletter-single-signup"===o?"Submit - Single Signup":"Submit - Multiple","Converted: ".concat(s.join(", ")),c,v);const{permutive:i=!1}=window;i&&i.track("Newsletter",{pageUri:window.location.href,newsletters:s.join(", ")}),window.newslettersConverted.push(...s),function(e){const t=a(),{subscribed:o=[]}=t;o.push(e),l(t)}(c)}else h(n,!1,"An error has ocurred.","invalid-email"),w(f,"Submit","FAIL: EMAIL DOES NOT EXIST (TOWER API)",c,v)})).catch((()=>{w(f,"Submit","FAIL: EMAIL DOES NOT EXIST (TOWER API)",c,v),h(n,!1,"An error has ocurred.","invalid-email")}))):h(n,!1,"An error has ocurred. Missing email address or list IDs.",e.event)}window.nypZephr=window.nypZephr||{},window.zephr=window.zephr||[],window.nypZephr.isMobile=d,window.zephr.push(["loaded",e=>{h(e.iframeId,!0,"isMobile",{isMobile:d})}]),window.zephr.push(["flyout-close",t=>{const{iframeId:o="",eventAction:n="Button Click - Close",eventLabel:r="X button close",model:{GAPrefix:s="",templateName:i=""}={},zephrComponent:c=""}=t;if(d&&e(!1),!o)return;const a=document.getElementById(o);if(a){const e=a.closest(".zephr-component");e&&!e.classList.contains("closed")&&(e.classList.add("closed"),w(i,n,r,c,s))}}]),window.zephr.push(["show",t=>{const{model:{GAPrefix:o="",templateName:n=""}={},zephrComponent:r=""}=t;w(n,"Show Template",window.location.href.split("?").shift(),r,o),function(e,t=86400){const o=Math.floor(Date.now()/1e3),n=a();n.suppressedWhitelist=[e,o+t],l(n)}(n||r),d&&e(!0)}]),window.zephr.push(["*",e=>{const{event:t,eventAction:o="",eventLabel:n="",model:{GAPrefix:r="",templateName:s=""}={},zephrComponent:i=""}=e;"flyout-close"!==t&&(-1===t.indexOf("-clicked")&&-1===t.indexOf("-close")&&"track-analytics"!==t||w(s,o||t,n||t,i,r))}]),window.zephr.push(["newsletter-single-signup",m]),window.zephr.push(["newsletter-multi-signup",m]),window.zephr.push(["boot",()=>{const{hooks:{addFilter:e=(()=>null)}={}}=window.zephr;e("zephr.componentEndpoint","nypost",(e=>{u(c)&&(e="".concat(e,"&suppressAll=true"));const t=p();return t&&(e="".concat(e,"&suppressedExcept=").concat(t)),e})),e("zephr.componentProps","nypost",((e,t,o)=>!!function(e){const{subscribed:t=[]}=a()||{},{env:o="local"}=window.nypZephr||{};return!(("production"===o||!window.location.hash.includes("zephrRender=1"))&&(t.includes(e)||u(c)||"local"===o&&u(e)))}(o)&&e))}])}();
//# sourceMappingURL=zephr.bundle.min.js.map