!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["fast-path"]=t():e["fast-path"]=t()}(this,(function(){return(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}e.r(t);var o=function e(t,o){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=n({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var i=n[r].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(o[s]=t.read(a,s),e===s)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const r=o;var i;!function(e){e.BLOOMBERG_ALL="bbg-all",e.BLOOMBERG_DIGITAL="bbg-digital",e.BUSINESSWEEK_PRINT="bw-print",e.BUSINESSWEEK_DIGITAL="bw-digital",e.BUSINESSWEEK_ZINIO="bw-zinio"}(i||(i={}));const a=["bingbot","facebot","googlebot","googlebot-news","mediapartners-google","publication-access-for-facebook","slurp","spinn3r","wazzupcrawler","socialflow/0.10","socialflow/2014","socialflow/2015","socialflow/2016"],s=["red","orange","yellow","green","blue","purple","sandcastle"];function c(e){const t=function(e){if(!e)return;const t=e.split(".");if(t.length<3||"bloomberg"!==t[2])return;const n=t[1];return s.includes(n)?n:void 0}(window.location.hostname);return"blue"===t&&e.includes("www")?e.replace("www","origin.blue"):"blue"===t&&e.includes("https://login")?e.replace("https://login","https://blue-login"):t&&e.includes("staging")?e.replace("staging",t):e}const l=function(e=window.location.href){const t={},n=new URL(e),o=n.searchParams.keys();for(const e of o){const o=n.searchParams.get(e);t[e]=o||!0}return t};var u;!function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.info=2]="info",e[e.debug=3]="debug",e[e.trace=4]="trace"}(u||(u={}));const f=u.warn;function d(e,...t){const n=u[e],o=l().fortressLog,i=o&&u[o];n>f&&i&&n>i||(("error"===e||i)&&console[e]("[FORTRESS]",new Date(Date.now()).toISOString(),...t),n===u.error&&window.fetch(c("https://login.bloomberg.com/api/client-log"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","x-csrf-token":r.get("_reg-csrf-token")},body:JSON.stringify({source:"FORTRESS",message:t})}))}const p=function(){return"www.bloomberg.com"===window.location.hostname},w=(e,t)=>(e=>[i.BLOOMBERG_ALL,i.BLOOMBERG_DIGITAL].some((t=>e.has(t))))(e)||"businessweek"===t&&(e=>[i.BUSINESSWEEK_DIGITAL,i.BUSINESSWEEK_PRINT,i.BUSINESSWEEK_ZINIO].some((t=>e.has(t))))(e);const g=e=>!p()&&new URL(window.location.href).searchParams.get("showPaywall")===e,b=()=>"milk"!==r.get("tagalong")&&!g("true")&&null===new URL(window.location.href).searchParams.get("abbaPreview")&&(!((p()||"milk"!==r.get("samoa"))&&!g("false"))||!!r.get("_accesslist-membership")),m={runChecks:e=>(d("info",`article info in fast path is ${JSON.stringify(e)}`),(e=>!!e&&"string"==typeof e.locale&&"en"!==e.locale)(e)||w((()=>{let e;try{e=JSON.parse(r.get("_user-data"))}catch(e){}return e&&e.subscriptionsData?e.subscriptionsData.reduce(((e,{entitlements:t})=>(t&&t.forEach((t=>e.add(t))),e)),new Set):new Set})(),(null==e?void 0:e.brand)||"")||b()||a.includes(window.navigator.userAgent.toLowerCase())?"allow":(e=>!!(null==e?void 0:e.premium)||!!(null==e?void 0:e.archived))(e)?"block":(e=>!!window.location.pathname.includes("/press-releases/")||!(!e||e.contentId))(e)?"allow":"indeterminate")},h=e=>{window.fastPath&&(window.fastPath.result=e)};return window.fastPath={evaluate(e,t){d("info","Running evaluate from fast-path");const n=m.runChecks(null==t?void 0:t.articleInfo);d("info",`fast-path result is ${n}`),window.performance.mark("fortress: fast-path decision made"),n&&"indeterminate"!==n?function(e,t){h(e),t(e,{isUsingOverlay:"block"===e})}(n,e):h(n)}},t})()}));